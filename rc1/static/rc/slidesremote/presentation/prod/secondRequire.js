define("famous/core/Entity",["require","exports","module"],function(t,i,e){function o(t){return a[t]}function s(t,i){a[t]=i}function n(t){var i=a.length;return s(i,t),i}function r(t){s(t,null)}var a=[];e.exports={register:n,unregister:r,get:o,set:s}}),define("famous/core/Transform",["require","exports","module"],function(t,i,e){function o(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function s(t){return Math.sqrt(o(t))}function n(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function(t,i){return[t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12]*i[3],t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13]*i[3],t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14]*i[3],t[3]*i[0]+t[7]*i[1]+t[11]*i[2]+t[15]*i[3],t[0]*i[4]+t[4]*i[5]+t[8]*i[6]+t[12]*i[7],t[1]*i[4]+t[5]*i[5]+t[9]*i[6]+t[13]*i[7],t[2]*i[4]+t[6]*i[5]+t[10]*i[6]+t[14]*i[7],t[3]*i[4]+t[7]*i[5]+t[11]*i[6]+t[15]*i[7],t[0]*i[8]+t[4]*i[9]+t[8]*i[10]+t[12]*i[11],t[1]*i[8]+t[5]*i[9]+t[9]*i[10]+t[13]*i[11],t[2]*i[8]+t[6]*i[9]+t[10]*i[10]+t[14]*i[11],t[3]*i[8]+t[7]*i[9]+t[11]*i[10]+t[15]*i[11],t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12]*i[15],t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13]*i[15],t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14]*i[15],t[3]*i[12]+t[7]*i[13]+t[11]*i[14]+t[15]*i[15]]},r.multiply=function(t,i){return[t[0]*i[0]+t[4]*i[1]+t[8]*i[2],t[1]*i[0]+t[5]*i[1]+t[9]*i[2],t[2]*i[0]+t[6]*i[1]+t[10]*i[2],0,t[0]*i[4]+t[4]*i[5]+t[8]*i[6],t[1]*i[4]+t[5]*i[5]+t[9]*i[6],t[2]*i[4]+t[6]*i[5]+t[10]*i[6],0,t[0]*i[8]+t[4]*i[9]+t[8]*i[10],t[1]*i[8]+t[5]*i[9]+t[9]*i[10],t[2]*i[8]+t[6]*i[9]+t[10]*i[10],0,t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12],t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13],t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14],1]},r.thenMove=function(t,i){return i[2]||(i[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+i[0],t[13]+i[1],t[14]+i[2],1]},r.moveThen=function(t,i){t[2]||(t[2]=0);var e=t[0]*i[0]+t[1]*i[4]+t[2]*i[8],o=t[0]*i[1]+t[1]*i[5]+t[2]*i[9],s=t[0]*i[2]+t[1]*i[6]+t[2]*i[10];return r.thenMove(i,[e,o,s])},r.translate=function(t,i,e){return void 0===e&&(e=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,i,e,1]},r.thenScale=function(t,i){return[i[0]*t[0],i[1]*t[1],i[2]*t[2],0,i[0]*t[4],i[1]*t[5],i[2]*t[6],0,i[0]*t[8],i[1]*t[9],i[2]*t[10],0,i[0]*t[12],i[1]*t[13],i[2]*t[14],1]},r.scale=function(t,i,e){return void 0===e&&(e=1),[t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1]},r.rotateX=function(t){var i=Math.cos(t),e=Math.sin(t);return[1,0,0,0,0,i,e,0,0,-e,i,0,0,0,0,1]},r.rotateY=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,0,-e,0,0,1,0,0,e,0,i,0,0,0,0,1]},r.rotateZ=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,e,0,0,-e,i,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,i,e){var o=Math.cos(t),s=Math.sin(t),n=Math.cos(i),r=Math.sin(i),a=Math.cos(e),h=Math.sin(e),c=[n*a,o*h+s*r*a,s*h-o*r*a,0,-n*h,o*a-s*r*h,s*a+o*r*h,0,r,-s*n,o*n,0,0,0,0,1];return c},r.rotateAxis=function(t,i){var e=Math.sin(i),o=Math.cos(i),s=1-o,n=t[0]*t[0]*s,r=t[0]*t[1]*s,a=t[0]*t[2]*s,h=t[1]*t[1]*s,c=t[1]*t[2]*s,u=t[2]*t[2]*s,p=t[0]*e,l=t[1]*e,f=t[2]*e,d=[n+o,r+f,a-l,0,r-f,h+o,c+p,0,a+l,c-p,u+o,0,0,0,0,1];return d},r.aboutOrigin=function(t,i){var e=t[0]-(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]),o=t[1]-(t[0]*i[1]+t[1]*i[5]+t[2]*i[9]),s=t[2]-(t[0]*i[2]+t[1]*i[6]+t[2]*i[10]);return r.thenMove(i,[e,o,s])},r.skew=function(t,i,e){return[1,0,0,0,Math.tan(e),1,0,0,Math.tan(i),Math.tan(t),1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var i=t[5]*t[10]-t[6]*t[9],e=t[4]*t[10]-t[6]*t[8],o=t[4]*t[9]-t[5]*t[8],s=t[1]*t[10]-t[2]*t[9],n=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],h=t[0]*t[6]-t[2]*t[4],c=t[0]*t[5]-t[1]*t[4],u=t[0]*i-t[1]*e+t[2]*o,p=1/u,l=[p*i,-p*s,p*a,0,-p*e,p*n,-p*h,0,p*o,-p*r,p*c,0,0,0,0,1];return l[12]=-t[12]*l[0]-t[13]*l[4]-t[14]*l[8],l[13]=-t[12]*l[1]-t[13]*l[5]-t[14]*l[9],l[14]=-t[12]*l[2]-t[13]*l[6]-t[14]*l[10],l},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var i=[t[0],t[1],t[2]],e=n(i[0]),a=s(i),h=[i[0]+e*a,i[1],i[2]],c=2/o(h);if(c>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];u[0]=1-c*h[0]*h[0],u[5]=1-c*h[1]*h[1],u[10]=1-c*h[2]*h[2],u[1]=-c*h[0]*h[1],u[2]=-c*h[0]*h[2],u[6]=-c*h[1]*h[2],u[4]=u[1],u[8]=u[2],u[9]=u[6];var p=r.multiply(u,t),l=[p[5],p[6]],f=n(l[0]),d=s(l),m=[l[0]+f*d,l[1]],g=2/o(m),y=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];y[5]=1-g*m[0]*m[0],y[10]=1-g*m[1]*m[1],y[6]=-g*m[0]*m[1],y[9]=y[6];var _=r.multiply(y,u),v=r.multiply(_,t),O=r.scale(v[0]<0?-1:1,v[5]<0?-1:1,v[10]<0?-1:1);v=r.multiply(v,O),_=r.multiply(O,_);var S={};return S.translate=r.getTranslate(t),S.rotate=[Math.atan2(-_[6],_[10]),Math.asin(_[2]),Math.atan2(-_[1],_[0])],S.rotate[0]||(S.rotate[0]=0,S.rotate[2]=Math.atan2(_[4],_[5])),S.scale=[v[0],v[5],v[10]],S.skew=[Math.atan2(v[9],S.scale[2]),Math.atan2(v[8],S.scale[2]),Math.atan2(v[4],S.scale[0])],Math.abs(S.rotate[0])+Math.abs(S.rotate[2])>1.5*Math.PI&&(S.rotate[1]=Math.PI-S.rotate[1],S.rotate[1]>Math.PI&&(S.rotate[1]-=2*Math.PI),S.rotate[1]<-Math.PI&&(S.rotate[1]+=2*Math.PI),S.rotate[0]<0?S.rotate[0]+=Math.PI:S.rotate[0]-=Math.PI,S.rotate[2]<0?S.rotate[2]+=Math.PI:S.rotate[2]-=Math.PI),S},r.average=function(t,i,e){e=void 0===e?.5:e;for(var o=r.interpret(t),s=r.interpret(i),n={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)n.translate[a]=(1-e)*o.translate[a]+e*s.translate[a],n.rotate[a]=(1-e)*o.rotate[a]+e*s.rotate[a],n.scale[a]=(1-e)*o.scale[a]+e*s.scale[a],n.skew[a]=(1-e)*o.skew[a]+e*s.skew[a];return r.build(n)},r.build=function(t){var i=r.scale(t.scale[0],t.scale[1],t.scale[2]),e=r.skew(t.skew[0],t.skew[1],t.skew[2]),o=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.thenMove(r.multiply(r.multiply(o,e),i),t.translate)},r.equals=function(t,i){return!r.notEquals(t,i)},r.notEquals=function(t,i){return t===i?!1:t&&i?!(t&&i)||t[12]!==i[12]||t[13]!==i[13]||t[14]!==i[14]||t[0]!==i[0]||t[1]!==i[1]||t[2]!==i[2]||t[4]!==i[4]||t[5]!==i[5]||t[6]!==i[6]||t[8]!==i[8]||t[9]!==i[9]||t[10]!==i[10]:!0},r.normalizeRotation=function(t){var i=t.slice(0);for((i[0]===.5*Math.PI||i[0]===.5*-Math.PI)&&(i[0]=-i[0],i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]>.5*Math.PI&&(i[0]=i[0]-Math.PI,i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]<.5*-Math.PI&&(i[0]=i[0]+Math.PI,i[1]=-Math.PI-i[1],i[2]-=Math.PI);i[1]<-Math.PI;)i[1]+=2*Math.PI;for(;i[1]>=Math.PI;)i[1]-=2*Math.PI;for(;i[2]<-Math.PI;)i[2]+=2*Math.PI;for(;i[2]>=Math.PI;)i[2]-=2*Math.PI;return i},r.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],r.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],e.exports=r}),define("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,i,e){function o(){this.result={}}function s(t,i){return[t[0]*i[0]+t[1]*i[4]+t[2]*i[8],t[0]*i[1]+t[1]*i[5]+t[2]*i[9],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]]}var n=t("./Transform");o._instance=new o,o.parse=function(t,i){return o._instance.parse(t,i)},o.prototype.parse=function(t,i){return this.reset(),this._parseSpec(t,i,n.identity),this.result},o.prototype.reset=function(){this.result={}};var r=[0,0];o.prototype._parseSpec=function(t,i,e){var o,a,h,c,u,p,l;if("number"==typeof t){if(o=t,h=i.transform,p=i.align||i.origin,i.size&&p&&(p[0]||p[1])){var f=[p[0]*i.size[0],p[1]*i.size[1],0];h=n.thenMove(h,s(f,e))}this.result[o]={transform:h,opacity:i.opacity,origin:i.origin||r,align:i.align||i.origin||r,size:i.size}}else{if(!t)return;if(t instanceof Array)for(var d=0;d<t.length;d++)this._parseSpec(t[d],i,e);else{a=t.target,h=i.transform,c=i.opacity,u=i.origin,p=i.align,l=i.size;var m=e;if(void 0!==t.opacity&&(c=i.opacity*t.opacity),t.transform&&(h=n.multiply(i.transform,t.transform)),t.origin&&(u=t.origin,m=i.transform),t.align&&(p=t.align),t.size){var g=i.size;l=[void 0!==t.size[0]?t.size[0]:g[0],void 0!==t.size[1]?t.size[1]:g[1]],g&&(p||(p=u),p&&(p[0]||p[1])&&(h=n.thenMove(h,s([p[0]*g[0],p[1]*g[1],0],e))),u&&(u[0]||u[1])&&(h=n.moveThen([-u[0]*l[0],-u[1]*l[1],0],h))),m=i.transform,u=null,p=null}this._parseSpec(a,{transform:h,opacity:c,origin:u,align:p,size:l},m)}}},e.exports=o}),define("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,i,e){function o(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function s(t,i,e){for(var o=r.parse(t,i),a=Object.keys(o),h=0;h<a.length;h++){var c=a[h],u=n.get(c),p=o[c];p.allocator=i.allocator;var l=u.commit(p);l?s(l,i,e):e[c]=p}}var n=t("./Entity"),r=t("./SpecParser");o.prototype.add=function(t){var i=t instanceof o?t:new o(t);return this._child instanceof Array?this._child.push(i):this._child?(this._child=[this._child,i],this._hasMultipleChildren=!0,this._childResult=[]):this._child=i,i},o.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},o.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof o?t:this},o.prototype.getSize=function(){var t=null,i=this.get();return i&&i.getSize&&(t=i.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},o.prototype.commit=function(t){for(var i=Object.keys(this._prevResults),e=0;e<i.length;e++){var o=i[e];if(void 0===this._resultCache[o]){var r=n.get(o);r.cleanup&&r.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},s(this.render(),t,this._resultCache)},o.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var i=this._child,e=0;e<i.length;e++)t[e]=i[e].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},e.exports=o}),define("famous/core/EventEmitter",["require","exports","module"],function(t,i,e){function o(){this.listeners={},this._owner=this}o.prototype.emit=function(t,i){var e=this.listeners[t];if(e)for(var o=0;o<e.length;o++)e[o].call(this._owner,i);return this},o.prototype.on=function(t,i){t in this.listeners||(this.listeners[t]=[]);var e=this.listeners[t].indexOf(i);return 0>e&&this.listeners[t].push(i),this},o.prototype.addListener=o.prototype.on,o.prototype.removeListener=function(t,i){var e=this.listeners[t].indexOf(i);return e>=0&&this.listeners[t].splice(e,1),this},o.prototype.bindThis=function(t){this._owner=t},e.exports=o}),define("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,i,e){function o(){s.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var s=t("./EventEmitter");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.setInputHandler=function(t,i){t.trigger=i.trigger.bind(i),i.subscribe&&i.unsubscribe&&(t.subscribe=i.subscribe.bind(i),t.unsubscribe=i.unsubscribe.bind(i))},o.setOutputHandler=function(t,i){i instanceof o&&i.bindThis(t),t.pipe=i.pipe.bind(i),t.unpipe=i.unpipe.bind(i),t.on=i.on.bind(i),t.addListener=t.on,t.removeListener=i.removeListener.bind(i)},o.prototype.emit=function(t,i){s.prototype.emit.apply(this,arguments);var e=0;for(e=0;e<this.downstream.length;e++)this.downstream[e].trigger&&this.downstream[e].trigger(t,i);for(e=0;e<this.downstreamFn.length;e++)this.downstreamFn[e](t,i);return this},o.prototype.trigger=o.prototype.emit,o.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return 0>e&&i.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},o.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return e>=0?(i.splice(e,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},o.prototype.on=function(t){if(s.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var i=this.trigger.bind(this,t);this.upstreamListeners[t]=i;for(var e=0;e<this.upstream.length;e++)this.upstream[e].on(t,i)}return this},o.prototype.addListener=o.prototype.on,o.prototype.subscribe=function(t){var i=this.upstream.indexOf(t);if(0>i){this.upstream.push(t);for(var e in this.upstreamListeners)t.on(e,this.upstreamListeners[e])}return this},o.prototype.unsubscribe=function(t){var i=this.upstream.indexOf(t);if(i>=0){this.upstream.splice(i,1);for(var e in this.upstreamListeners)t.removeListener(e,this.upstreamListeners[e])}return this},e.exports=o}),define("famous/core/ElementAllocator",["require","exports","module"],function(t,i,e){function o(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}o.prototype.migrate=function(t){var i=this.container;if(t!==i){if(i instanceof DocumentFragment)t.appendChild(i);else for(;i.hasChildNodes();)t.appendChild(i.removeChild(i.firstChild));this.container=t}},o.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var i,e=this.detachedNodes[t];return e.length>0?i=e.pop():(i=document.createElement(t),this.container.appendChild(i)),this.nodeCount++,i},o.prototype.deallocate=function(t){var i=t.nodeName.toLowerCase(),e=this.detachedNodes[i];e.push(t),this.nodeCount--},o.prototype.getNodeCount=function(){return this.nodeCount},e.exports=o}),define("famous/utilities/Utility",["require","exports","module"],function(t,i,e){var o={};o.Direction={X:0,Y:1,Z:2},o.after=function(t,i){var e=t;return function(){e--,0===e&&i.apply(this,arguments)}},o.loadURL=function(t,i){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===this.readyState&&i&&i(this.responseText)},e.open("GET",t),e.send()},o.createDocumentFragmentFromHTML=function(t){var i=document.createElement("div");i.innerHTML=t;for(var e=document.createDocumentFragment();i.hasChildNodes();)e.appendChild(i.firstChild);return e},e.exports=o}),define("famous/transitions/MultipleTransition",["require","exports","module","famous/utilities/Utility"],function(t,i,e){function o(t){this.method=t,this._instances=[],this.state=[]}var s=t("famous/utilities/Utility");o.SUPPORTS_MULTIPLE=!0,o.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},o.prototype.set=function(t,i,e){for(var o=s.after(t.length,e),n=0;n<t.length;n++)this._instances[n]||(this._instances[n]=new this.method),this._instances[n].set(t[n],i,o)},o.prototype.reset=function(t){for(var i=0;i<t.length;i++)this._instances[i]||(this._instances[i]=new this.method),this._instances[i].reset(t[i])},e.exports=o}),define("famous/transitions/TweenTransition",["require","exports","module"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function s(t,i,e){return(1-e)*t+e*i}function n(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,i){var e={curve:i.curve};return i.duration&&(e.duration=i.duration),i.speed&&(e.speed=i.speed),t instanceof Object&&(void 0!==t.duration&&(e.duration=t.duration),t.curve&&(e.curve=t.curve),t.speed&&(e.speed=t.speed)),"string"==typeof e.curve&&(e.curve=o.getCurve(e.curve)),e}function a(t,i,e,o,s){var n,r=1e-7,a=(e(s)-e(s-r))/r;if(t instanceof Array){n=[];for(var h=0;h<t.length;h++)n[h]="number"==typeof t[h]?a*(t[h]-i[h])/o:0}else n=a*(t-i)/o;return n}function h(t,i,e){var o;if(t instanceof Array){o=[];for(var n=0;n<t.length;n++)o[n]="number"==typeof t[n]?s(t[n],i[n],e):t[n]}else o=s(t,i,e);return o}o.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},o.SUPPORTS_MULTIPLE=!0,o.DEFAULT_OPTIONS={curve:o.Curves.linear,duration:500,speed:0};var c={};o.registerCurve=function(t,i){return c[t]?!1:(c[t]=i,!0)},o.unregisterCurve=function(t){return c[t]?(delete c[t],!0):!1},o.getCurve=function(t){var i=c[t];if(void 0!==i)return i;throw Error("curve not registered")},o.getCurves=function(){return c},o.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},o.prototype.set=function(t,i,e){if(!i)return this.reset(t),void(e&&e());if(this._startValue=n(this.get()),i=r(i,this.options),i.speed){var o=this._startValue;if(o instanceof Object){var s=0;for(var a in o)s+=(t[a]-o[a])*(t[a]-o[a]);i.duration=Math.sqrt(s)/i.speed}else i.duration=Math.abs(t-o)/i.speed}this._startTime=Date.now(),this._endValue=n(t),this._startVelocity=n(i.velocity),this._duration=i.duration,this._curve=i.curve,this._active=!0,this._callback=e},o.prototype.reset=function(t,i){if(this._callback){var e=this._callback;this._callback=void 0,e()}this.state=n(t),this.velocity=n(i),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},o.prototype.getVelocity=function(){return this.velocity},o.prototype.get=function(t){return this.update(t),this.state},o.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var i=t-this._startTime;if(i>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>i)this.state=this._startValue,this.velocity=this._startVelocity;else{var e=i/this._duration;this.state=h(this._startValue,this._endValue,this._curve(e)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,e)}}}else if(this._callback){var o=this._callback;this._callback=void 0,o()}},o.prototype.isActive=function(){return this._active},o.prototype.halt=function(){this.reset(this.get())},o.registerCurve("linear",o.Curves.linear),o.registerCurve("easeIn",o.Curves.easeIn),o.registerCurve("easeOut",o.Curves.easeOut),o.registerCurve("easeInOut",o.Curves.easeInOut),o.registerCurve("easeOutBounce",o.Curves.easeOutBounce),o.registerCurve("spring",o.Curves.spring),o.customCurve=function(t,i){return t=t||0,i=i||0,function(e){return t*e+(-2*t-i+3)*e*e+(t+i-2)*e*e*e}},e.exports=o}),define("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,i,e){function o(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function s(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var i=null,e=this.currentAction[0],o=this.currentAction[1];o instanceof Object&&o.method?(i=o.method,"string"==typeof i&&(i=a[i])):i=r,this._currentMethod!==i&&(this._engineInstance=!(e instanceof Object)||i.SUPPORTS_MULTIPLE===!0||e.length<=i.SUPPORTS_MULTIPLE?new i:new n(i),this._currentMethod=i),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(o.velocity=this.velocity),this._engineInstance.set(e,o,s.bind(this))}var n=t("./MultipleTransition"),r=t("./TweenTransition"),a={};o.registerMethod=function(t,i){return t in a?!1:(a[t]=i,!0)},o.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},o.prototype.set=function(t,i,e){if(!i)return this.reset(t),e&&e(),this;var o=[t,i];return this.actionQueue.push(o),this.callbackQueue.push(e),this.currentAction||s.call(this),this},o.prototype.reset=function(t,i){this._currentMethod=null,this._engineInstance=null,this.state=t,this.velocity=i,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},o.prototype.delay=function(t,i){this.set(this._engineInstance.get(),{duration:t,curve:function(){return 0}},i)},o.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},o.prototype.isActive=function(){return!!this.currentAction},o.prototype.halt=function(){this.set(this.get())},e.exports=o}),define("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","famous/transitions/Transitionable"],function(t,i,e){function o(t){return[t.clientWidth,t.clientHeight]}function s(t){this.container=t,this._allocator=new a(t),this._node=new n,this._eventOutput=new r,this._size=o(this.container),this._perspectiveState=new c(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:h.identity,opacity:1,origin:u,align:null,size:this._size},this._eventOutput.on("resize",function(){this.setSize(o(this.container))}.bind(this))}var n=t("./RenderNode"),r=t("./EventHandler"),a=t("./ElementAllocator"),h=t("./Transform"),c=t("famous/transitions/Transitionable"),u=[0,0];s.prototype.getAllocator=function(){return this._allocator},s.prototype.add=function(t){return this._node.add(t)},s.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},s.prototype.getSize=function(){return this._size},s.prototype.setSize=function(t){t||(t=o(this.container)),this._size[0]=t[0],this._size[1]=t[1]},s.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var i=this._perspectiveState.get();i!==this._perspective&&(this.container.style.perspective=i?i.toFixed()+"px":"",this.container.style.webkitPerspective=i?i.toFixed():"",this._perspective=i),this._node.commit(this._nodeContext)},s.prototype.getPerspective=function(){return this._perspectiveState.get()},s.prototype.setPerspective=function(t,i,e){return this._perspectiveState.set(t,i,e)},s.prototype.emit=function(t,i){return this._eventOutput.emit(t,i)},s.prototype.on=function(t,i){return this._eventOutput.on(t,i)},s.prototype.removeListener=function(t,i){return this._eventOutput.removeListener(t,i)},s.prototype.pipe=function(t){return this._eventOutput.pipe(t)},s.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},e.exports=s}),define("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,i,e){function o(t){this._value=t,this.eventOutput=null}function s(){this.eventOutput=new n,this.eventOutput.bindThis(this),n.setOutputHandler(this,this.eventOutput)}var n=t("./EventHandler");o.patch=function(t){for(var i=new o(t),e=1;e<arguments.length;e++)i.patch(arguments[e]);return t},o.prototype.patch=function(){for(var t=this._value,i=0;i<arguments.length;i++){var e=arguments[i];for(var o in e)o in t&&e[o]&&e[o].constructor===Object&&t[o]&&t[o].constructor===Object?(t.hasOwnProperty(o)||(t[o]=Object.create(t[o])),this.key(o).patch(e[o]),this.eventOutput&&this.eventOutput.emit("change",{id:o,value:this.key(o).value()})):this.set(o,e[o])}return this},o.prototype.setOptions=o.prototype.patch,o.prototype.key=function(t){var i=new o(this._value[t]);return(!(i._value instanceof Object)||i._value instanceof Array)&&(i._value={}),i},o.prototype.get=function(t){return this._value[t]},o.prototype.getOptions=o.prototype.get,o.prototype.set=function(t,i){var e=this.get(t);return this._value[t]=i,this.eventOutput&&i!==e&&this.eventOutput.emit("change",{id:t,value:i}),this},o.prototype.value=function(){return this._value},o.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},o.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},o.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},o.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},e.exports=o}),define("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,i,e){function o(){_.runLoop?(u.step(),requestAnimationFrame(o)):m=!1}function s(){for(var t=0;t<p.length;t++)p[t].emit("resize");y.emit("resize")}var n,r,a=t("./Context"),h=t("./EventHandler"),c=t("./OptionsManager"),u={},p=[],l=[],f=[],d=Date.now(),m=!0,g={},y=new h,_={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0},v=new c(_),O=10;u.step=function(){var t=Date.now();if(!(r&&r>t-d)){var i=0;for(n=t-d,d=t,y.emit("prerender"),i=0;i<l.length;i++)l[i].call(this);for(l.splice(0);f.length&&Date.now()-t<O;)f.shift().call(this);for(i=0;i<p.length;i++)p[i].update();y.emit("postrender")}},requestAnimationFrame(o),window.addEventListener("resize",s,!1),s(),window.addEventListener("touchmove",function(t){t.preventDefault()},!0),u.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(u):y.pipe(t)},u.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(u):y.unpipe(t)},u.on=function(t,i){return t in g||(g[t]=y.emit.bind(y,t),document.body?document.body.addEventListener(t,g[t]):u.nextTick(function(t,i){document.body.addEventListener(t,i)}.bind(this,t,g[t]))),y.on(t,i)},u.emit=function(t,i){return y.emit(t,i)},u.removeListener=function(t,i){return y.removeListener(t,i)},u.getFPS=function(){return 1e3/n},u.setFPSCap=function(t){r=Math.floor(1e3/t)},u.getOptions=function(){return v.getOptions.apply(v,arguments)},u.setOptions=function(){return v.setOptions.apply(v,arguments)},u.createContext=function(t){var i=!1;t||(t=document.createElement(_.containerType),t.classList.add(_.containerClass),i=!0);var e=new a(t);return u.registerContext(e),i&&u.nextTick(function(t,i){document.body.appendChild(i),t.emit("resize")}.bind(this,e,t)),e},u.registerContext=function(t){return p.push(t),t},u.nextTick=function(t){l.push(t)},u.defer=function(t){f.push(t)},v.on("change",function(t){"fpsCap"===t.id?u.setFPSCap(t.value):"runLoop"===t.id&&!m&&t.value&&(m=!0,requestAnimationFrame(o))}),e.exports=u}),define("famous/core/Surface",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,i,e){function o(t){this.options={},this.properties={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new f,this.eventHandler.bindThis(this),this.id=l.register(this),t&&this.setOptions(t),this._currTarget=null}function s(t){for(var i in this.eventHandler.listeners)t.addEventListener(i,this.eventForwarder)}function n(t){for(var i in this.eventHandler.listeners)t.removeEventListener(i,this.eventForwarder)}function r(t){for(var i=0;i<this._dirtyClasses.length;i++)t.classList.remove(this._dirtyClasses[i]);this._dirtyClasses=[]}function a(t){for(var i in this.properties)t.style[i]=this.properties[i]}function h(t){for(var i in this.properties)t.style[i]=""}function c(t){t[12]=Math.round(t[12]*m)/m,t[13]=Math.round(t[13]*m)/m;for(var i="matrix3d(",e=0;15>e;e++)i+=t[e]<1e-6&&t[e]>-1e-6?"0,":t[e]+",";return i+=t[15]+")"}function u(t){return 100*t[0]+"% "+100*t[1]+"%"}function p(t,i){return t&&i?t[0]!==i[0]||t[1]!==i[1]:t!==i}var l=t("./Entity"),f=t("./EventHandler"),d=t("./Transform"),m=window.devicePixelRatio||1,g=void 0!==document.createElement("div").style.webkitTransform;o.prototype.elementType="div",o.prototype.elementClass="famous-surface",o.prototype.on=function(t,i){this._currTarget&&this._currTarget.addEventListener(t,this.eventForwarder),this.eventHandler.on(t,i)},o.prototype.removeListener=function(t,i){this.eventHandler.removeListener(t,i)},o.prototype.emit=function(t,i){i&&!i.origin&&(i.origin=this);var e=this.eventHandler.emit(t,i);return e&&i&&i.stopPropagation&&i.stopPropagation(),e},o.prototype.pipe=function(t){return this.eventHandler.pipe(t)},o.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},o.prototype.render=function(){return this.id},o.prototype.setProperties=function(t){for(var i in t)this.properties[i]=t[i];this._stylesDirty=!0},o.prototype.getProperties=function(){return this.properties},o.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},o.prototype.removeClass=function(t){var i=this.classList.indexOf(t);i>=0&&(this._dirtyClasses.push(this.classList.splice(i,1)[0]),this._classesDirty=!0)},o.prototype.setClasses=function(t){var i=0,e=[];for(i=0;i<this.classList.length;i++)t.indexOf(this.classList[i])<0&&e.push(this.classList[i]);for(i=0;i<e.length;i++)this.removeClass(e[i]);for(i=0;i<t.length;i++)this.addClass(t[i])},o.prototype.getClassList=function(){return this.classList},o.prototype.setContent=function(t){this.content!==t&&(this.content=t,this._contentDirty=!0)},o.prototype.getContent=function(){return this.content},o.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)};var y;y=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,i){t.style.zIndex=1e6*i[14]|0,t.style.transform=c(i)}:g?function(t,i){t.style.webkitTransform=c(i)}:function(t,i){t.style.transform=c(i)};var _=g?function(t,i){t.style.webkitTransformOrigin=u(i)}:function(t,i){t.style.transformOrigin=u(i)},v=g?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0};o.prototype.setup=function(t){var i=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var e=0;e<this.elementClass.length;e++)i.classList.add(this.elementClass[e]);else i.classList.add(this.elementClass);i.style.display="",s.call(this,i),this._currTarget=i,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._matrix=null,this._opacity=void 0,this._origin=null,this._size=null},o.prototype.commit=function(t){this._currTarget||this.setup(t.allocator);var i=this._currTarget,e=t.transform,o=t.opacity,s=t.origin,n=t.size;if(this._classesDirty){r.call(this,i);for(var h=this.getClassList(),c=0;c<h.length;c++)i.classList.add(h[c]);this._classesDirty=!1}if(this._stylesDirty&&(a.call(this,i),this._stylesDirty=!1),this._contentDirty&&(this.deploy(i),this.eventHandler.emit("deploy"),this._contentDirty=!1),this.size){var u=n;n=[this.size[0],this.size[1]],void 0===n[0]&&u[0]&&(n[0]=u[0]),void 0===n[1]&&u[1]&&(n[1]=u[1])}if(n[0]===!0&&(n[0]=i.clientWidth),n[1]===!0&&(n[1]=i.clientHeight),p(this._size,n)&&(this._size||(this._size=[0,0]),this._size[0]=n[0],this._size[1]=n[1],this._sizeDirty=!0),!e&&this._matrix)return this._matrix=null,this._opacity=0,void v(i);if(this._opacity!==o&&(this._opacity=o,i.style.opacity=o>=1?"0.999999":o),p(this._origin,s)||d.notEquals(this._matrix,e)||this._sizeDirty){e||(e=d.identity),this._matrix=e;var l=e;s&&(this._origin||(this._origin=[0,0]),this._origin[0]=s[0],this._origin[1]=s[1],l=d.thenMove(e,[-this._size[0]*s[0],-this._size[1]*s[1],0]),_(i,s)),y(i,l)}this._sizeDirty&&(this._size&&(i.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",i.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._sizeDirty=!1)},o.prototype.cleanup=function(t){var i=0,e=this._currTarget;this.eventHandler.emit("recall"),this.recall(e),e.style.display="none",e.style.width="",e.style.height="",this._size=null,h.call(this,e);
var o=this.getClassList();for(r.call(this,e),i=0;i<o.length;i++)e.classList.remove(o[i]);if(this.elementClass)if(this.elementClass instanceof Array)for(i=0;i<this.elementClass.length;i++)e.classList.remove(this.elementClass[i]);else e.classList.remove(this.elementClass);n.call(this,e),this._currTarget=null,t.deallocate(e),v(e)},o.prototype.deploy=function(t){var i=this.getContent();if(i instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}else t.innerHTML=i},o.prototype.recall=function(t){for(var i=document.createDocumentFragment();t.hasChildNodes();)i.appendChild(t.firstChild);this.setContent(i)},o.prototype.getSize=function(t){return t?this._size:this.size||this._size},o.prototype.setSize=function(t){this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0},e.exports=o}),define("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(t,i,e){function o(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new s(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var s=t("./Context"),n=t("./Transform"),r=t("./Surface");o.SIZE_ZERO=[0,0],o.prototype=Object.create(r.prototype),o.prototype.elementType="div",o.prototype.elementClass="famous-group",o.prototype.add=function(){return this.context.add.apply(this.context,arguments)},o.prototype.render=function(){return r.prototype.render.call(this)},o.prototype.deploy=function(t){this.context.migrate(t)},o.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},o.prototype.commit=function(t){var i=t.transform,e=t.origin,s=t.opacity,a=t.size,h=r.prototype.commit.call(this,{allocator:t.allocator,transform:n.thenMove(i,[-e[0]*a[0],-e[1]*a[1],0]),opacity:s,origin:e,size:o.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:n.translate(-e[0]*a[0],-e[1]*a[1],0),origin:e,size:a}),h},e.exports=o}),define("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","famous/core/Transform","famous/utilities/Utility"],function(t,i,e){function o(t){this._final=r.identity.slice(),this.translate=new n([0,0,0]),this.rotate=new n([0,0,0]),this.skew=new n([0,0,0]),this.scale=new n([1,1,1]),t&&this.set(t)}function s(){return r.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}var n=t("./Transitionable"),r=t("famous/core/Transform"),a=t("famous/utilities/Utility");o.prototype.setTranslate=function(t,i,e){return this.translate.set(t,i,e),this._final=this._final.slice(),this._final[12]=t[0],this._final[13]=t[1],void 0!==t[2]&&(this._final[14]=t[2]),this},o.prototype.setScale=function(t,i,e){return this.scale.set(t,i,e),this._final=this._final.slice(),this._final[0]=t[0],this._final[5]=t[1],void 0!==t[2]&&(this._final[10]=t[2]),this},o.prototype.setRotate=function(t,i,e){return this.rotate.set(t,i,e),this._final=s.call(this),this._final=r.build({translate:this.translate.get(),rotate:t,scale:this.scale.get(),skew:this.skew.get()}),this},o.prototype.setSkew=function(t,i,e){return this.skew.set(t,i,e),this._final=r.build({translate:this.translate.get(),rotate:this.rotate.get(),scale:this.scale.get(),skew:t}),this},o.prototype.set=function(t,i,e){this._final=t;var o=r.interpret(t),s=e?a.after(4,e):null;return this.translate.set(o.translate,i,s),this.rotate.set(o.rotate,i,s),this.skew.set(o.skew,i,s),this.scale.set(o.scale,i,s),this},o.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},o.prototype.get=function(){return this.isActive()?s.call(this):this._final},o.prototype.getFinal=function(){return this._final},o.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},o.prototype.halt=function(){this._final=this.get(),this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt()},e.exports=o}),define("famous/core/Modifier",["require","exports","module","./Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,i,e){function o(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._legacyStates={},this._output={transform:n.identity,opacity:1,origin:null,align:null,size:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size))}function s(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter())}var n=t("./Transform"),r=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");o.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},o.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},o.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},o.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},o.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},o.prototype.setTransform=function(t,i,e){return i||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,i,e),this):this.transformFrom(t)},o.prototype.setOpacity=function(t,i,e){return i||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new r(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,i,e)):this.opacityFrom(t)},o.prototype.setOrigin=function(t,i,e){return i||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new r(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,i,e),this):this.originFrom(t)},o.prototype.setAlign=function(t,i,e){return i||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new r(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,i,e),this):this.alignFrom(t)},o.prototype.setSize=function(t,i,e){return t&&(i||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new r(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,i,e),this):this.sizeFrom(t)},o.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null},o.prototype.getTransform=function(){return this._transformGetter()},o.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},o.prototype.getOpacity=function(){return this._opacityGetter()},o.prototype.getOrigin=function(){return this._originGetter()},o.prototype.getAlign=function(){return this._alignGetter()},o.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},o.prototype.modify=function(t){return s.call(this),this._output.target=t,this._output},e.exports=o}),define("famous/core/Scene",["require","exports","module","./Transform","./Modifier","./RenderNode"],function(t,i,e){function o(t){this.id=null,this._objects=null,this.node=new u,this._definition=null,t&&this.load(t)}function s(t){for(var i in p)if(i in t){var e=t[i];return e instanceof Array||(e=[e]),p[i].apply(this,e)}}function n(t){var i=t.transform,e=t.opacity,o=t.origin,n=t.size,r=h.identity;if(i instanceof Array)if(16===i.length&&"number"==typeof i[0])r=i;else for(var a=0;a<i.length;a++)r=h.multiply(r,s(i[a]));else i instanceof Object&&(r=s(i));var u=new c({transform:r,opacity:e,origin:o,size:n});return u}function r(t){for(var i=new u,e=0;e<t.length;e++){var o=a.call(this,t[e]);o&&i.add(o)}return i}function a(t){var i,e;if(t instanceof Array)i=r.call(this,t);else if(e=this._objects.length,t.render&&t.render instanceof Function)i=t;else if(t.target){var o=a.call(this,t.target),s=n.call(this,t);i=new u(s),i.add(o),t.id&&(this.id[t.id]=s)}else t.id&&(i=new u,this.id[t.id]=i);return this._objects[e]=i,i}var h=t("./Transform"),c=t("./Modifier"),u=t("./RenderNode"),p={translate:h.translate,rotate:h.rotate,rotateX:h.rotateX,rotateY:h.rotateY,rotateZ:h.rotateZ,rotateAxis:h.rotateAxis,scale:h.scale,skew:h.skew,matrix3d:function(){return arguments}};o.prototype.create=function(){return new o(this._definition)},o.prototype.load=function(t){this._definition=t,this.id={},this._objects=[],this.node.set(a.call(this,t))},o.prototype.add=function(){return this.node.add.apply(this.node,arguments)},o.prototype.render=function(){return this.node.render.apply(this.node,arguments)},e.exports=o}),define("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode"],function(t,i,e){function o(t){this._node=new r,this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this.options=Object.create(this.constructor.DEFAULT_OPTIONS||o.DEFAULT_OPTIONS),this._optionsManager=new n(this.options),t&&this.setOptions(t)}var s=t("./EventHandler"),n=t("./OptionsManager"),r=t("./RenderNode");o.DEFAULT_OPTIONS={},o.prototype.getOptions=function(){return this._optionsManager.value()},o.prototype.setOptions=function(t){this._optionsManager.patch(t)},o.prototype.add=function(){return this._node.add.apply(this._node,arguments)},o.prototype._add=o.prototype.add,o.prototype.render=function(){return this._node.render()},o.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},e.exports=o}),define("famous/core/ViewSequence",["require","exports","module"],function(t,i,e){function o(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),this._previousNode=null,this._nextNode=null}o.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null},o.Backing.prototype.getValue=function(t){var i=t-this.firstIndex;return 0>i||i>=this.array.length?null:this.array[i]},o.Backing.prototype.setValue=function(t,i){this.array[t-this.firstIndex]=i},o.Backing.prototype.reindex=function(t,i,e){if(this.array[0]){for(var o=0,s=this.firstIndex,n=e-i,r=this.firstNode;t-1>s;)r=r.getNext(),s++;var a=r;for(o=0;i>o;o++)r=r.getNext(),r&&(r._previousNode=a);var h=r?r.getNext():null;for(a._nextNode=null,r=a,o=0;e>o;o++)r=r.getNext();if(s+=e,r!==h&&(r._nextNode=h,h&&(h._previousNode=r)),h)for(r=h,s++;r&&s<this.array.length+this.firstIndex;)r._nextNode?r.index+=n:r.index=s,r=r.getNext(),s++}},o.prototype.getPrevious=function(){return this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+this._.array.length-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this),this._previousNode},o.prototype.getNext=function(){return this.index===this._.firstIndex+this._.array.length-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this),this._nextNode},o.prototype.getIndex=function(){return this.index},o.prototype.toString=function(){return""+this.index},o.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length},o.prototype.push=function(){this._.array.push.apply(this._.array,arguments)},o.prototype.splice=function(t,i){var e=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,i].concat(e)),this._.reindex(t,i,e.length)},o.prototype.swap=function(t){var i=t.get(),e=this.get();this._.setValue(this.index,i),this._.setValue(t.index,e);var o=this._previousNode,s=this._nextNode,n=this.index,r=t._previousNode,a=t._nextNode,h=t.index;this.index=h,this._previousNode=r===this?t:r,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=n,t._previousNode=o===t?this:o,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=s===t?this:s,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t)},o.prototype.get=function(){return this._.getValue(this.index)},o.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},o.prototype.render=function(){var t=this.get();return t?t.render.apply(t,arguments):null},e.exports=o}),define("famous/events/EventArbiter",["require","exports","module","famous/core/EventHandler"],function(t,i,e){function o(t){this.dispatchers={},this.currMode=void 0,this.setMode(t)}var s=t("famous/core/EventHandler");o.prototype.setMode=function(t){if(t!==this.currMode){var i=this.currMode;this.dispatchers[this.currMode]&&this.dispatchers[this.currMode].trigger("unpipe"),this.currMode=t,this.dispatchers[t]&&this.dispatchers[t].emit("pipe"),this.emit("change",{from:i,to:t})}},o.prototype.forMode=function(t){return this.dispatchers[t]||(this.dispatchers[t]=new s),this.dispatchers[t]},o.prototype.emit=function(t,i){if(void 0===this.currMode)return!1;i||(i={});var e=this.dispatchers[this.currMode];return e?e.trigger(t,i):void 0},e.exports=o}),define("famous/events/EventFilter",["require","exports","module","famous/core/EventHandler"],function(t,i,e){function o(t){s.call(this),this._condition=t}var s=t("famous/core/EventHandler");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.emit=function(t,i){return this._condition(t,i)?s.prototype.emit.apply(this,arguments):void 0},o.prototype.trigger=o.prototype.emit,e.exports=o}),define("famous/events/EventMapper",["require","exports","module","famous/core/EventHandler"],function(t,i,e){function o(t){s.call(this),this._mappingFunction=t}var s=t("famous/core/EventHandler");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.subscribe=null,o.prototype.unsubscribe=null,o.prototype.emit=function(t,i){var e=this._mappingFunction.apply(this,arguments);e&&e.emit instanceof Function&&e.emit(t,i)},o.prototype.trigger=o.prototype.emit,e.exports=o}),define("famous/inputs/Accumulator",["require","exports","module","famous/core/EventHandler","famous/transitions/Transitionable"],function(t,i,e){function o(t,i){void 0===i&&(i="update"),this._state=t&&t.get&&t.set?t:new r(t||0),this._eventInput=new n,n.setInputHandler(this,this._eventInput),this._eventInput.on(i,s.bind(this))}function s(t){var i=t.delta,e=this.get();if(i.constructor===e.constructor){var o=i instanceof Array?[e[0]+i[0],e[1]+i[1]]:e+i;this.set(o)}}var n=t("famous/core/EventHandler"),r=t("famous/transitions/Transitionable");o.prototype.get=function(){return this._state.get()},o.prototype.set=function(t){this._state.set(t)},e.exports=o}),define("famous/inputs/FastClick",["require","exports","module"],function(){if(window.CustomEvent){var t=300,i=500,e={},o={},s=Date.now;window.addEventListener("touchstart",function(t){for(var i=s(),o=0;o<t.changedTouches.length;o++){var n=t.changedTouches[o];e[n.identifier]=i}}),window.addEventListener("touchmove",function(t){for(var i=0;i<t.changedTouches.length;i++){var o=t.changedTouches[i];delete e[o.identifier]}}),window.addEventListener("touchend",function(i){for(var n=s(),r=0;r<i.changedTouches.length;r++){var a=i.changedTouches[r],h=e[a.identifier];if(h&&t>n-h){var c=new window.CustomEvent("click",{bubbles:!0,details:a});o[n]=i,i.target.dispatchEvent(c)}delete e[a.identifier]}}),window.addEventListener("click",function(t){var e=s();for(var n in o){var r=o[n];i>e-n?t instanceof window.MouseEvent&&t.target===r.target&&t.stopPropagation():delete o[n]}},!0)}}),define("famous/inputs/GenericSync",["require","exports","module","famous/core/EventHandler"],function(t,i,e){function o(t,i){this._eventInput=new n,this._eventOutput=new n,n.setInputHandler(this,this._eventInput),n.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),i&&this.setOptions(i)}function s(t,i){r[t]&&(this._syncs[t]=new r[t](i),this.pipeSync(t))}var n=t("famous/core/EventHandler");o.DIRECTION_X=0,o.DIRECTION_Y=1,o.DIRECTION_Z=2;var r={};o.register=function(t){for(var i in t){if(r[i]){if(r[i]===t[i])return;throw Error("this key is registered to a different sync class")}r[i]=t[i]}},o.prototype.setOptions=function(t){for(var i in this._syncs)this._syncs[i].setOptions(t)},o.prototype.pipeSync=function(t){var i=this._syncs[t];this._eventInput.pipe(i),i.pipe(this._eventOutput)},o.prototype.unpipeSync=function(t){var i=this._syncs[t];this._eventInput.unpipe(i),i.unpipe(this._eventOutput)},o.prototype.addSync=function(t){if(t instanceof Array)for(var i=0;i<t.length;i++)s.call(this,t[i]);else if(t instanceof Object)for(var e in t)s.call(this,e,t[e])},e.exports=o}),define("famous/inputs/MouseSync",["require","exports","module","famous/core/EventHandler"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._eventInput=new c,this._eventOutput=new c,c.setInputHandler(this,this._eventInput),c.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",n.bind(this)),this._eventInput.on("mousemove",r.bind(this)),this._eventInput.on("mouseup",a.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",h.bind(this)):this._eventInput.on("mouseleave",a.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,offsetX:void 0,offsetY:void 0},this._position=null,this._prevCoord=void 0,this._prevTime=void 0}function s(){var t=this._payload;t.delta=null,t.position=null,t.velocity=null,t.clientX=void 0,t.clientY=void 0,t.offsetX=void 0,t.offsetY=void 0}function n(t){t.preventDefault(),s.call(this);var i=t.clientX,e=t.clientY;this._prevCoord=[i,e],this._prevTime=p(),this._position=void 0!==this.options.direction?0:[0,0];var o=this._payload;o.position=this._position,o.clientX=i,o.clientY=e,o.offsetX=t.offsetX,o.offsetY=t.offsetY,this._eventOutput.emit("start",o)}function r(t){if(this._prevCoord){var i=this._prevCoord,e=this._prevTime,s=t.clientX,n=t.clientY,r=p(),a=s-i[0],h=n-i[1];this.options.rails&&(Math.abs(a)>Math.abs(h)?h=0:a=0);var c,l,f=Math.max(r-e,u),d=a/f,m=h/f,g=this.options.scale;this.options.direction===o.DIRECTION_X?(l=g*a,c=g*d,this._position+=l):this.options.direction===o.DIRECTION_Y?(l=g*h,c=g*m,this._position+=l):(l=[g*a,g*h],c=[g*d,g*m],this._position[0]+=l[0],this._position[1]+=l[1]);var y=this._payload;y.delta=l,y.position=this._position,y.velocity=c,y.clientX=s,y.clientY=n,y.offsetX=t.offsetX,y.offsetY=t.offsetY,this._eventOutput.emit("update",y),this._prevCoord=[s,n],this._prevTime=r}}function a(){this._prevCoord&&(this._eventOutput.emit("end",this._payload),this._prevCoord=void 0,this._prevTime=void 0)}function h(t){if(this._prevCoord){var i=r.bind(this),e=function(t){a.call(this,t),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}.bind(this,t);document.addEventListener("mousemove",i),document.addEventListener("mouseup",e)}}var c=t("famous/core/EventHandler");o.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1,propogate:!0},o.DIRECTION_X=0,o.DIRECTION_Y=1;var u=8,p=Date.now;o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.propogate&&(this.options.propogate=t.propogate)},e.exports=o}),define("famous/inputs/TwoFingerSync",["require","exports","module","famous/core/EventHandler"],function(t,i,e){function o(){this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this.touchAEnabled=!1,this.touchAId=0,this.posA=null,this.timestampA=0,this.touchBEnabled=!1,this.touchBId=0,this.posB=null,this.timestampB=0,this._eventInput.on("touchstart",this.handleStart.bind(this)),this._eventInput.on("touchmove",this.handleMove.bind(this)),this._eventInput.on("touchend",this.handleEnd.bind(this)),this._eventInput.on("touchcancel",this.handleEnd.bind(this))}var s=t("famous/core/EventHandler");o.calculateAngle=function(t,i){var e=i[0]-t[0],o=i[1]-t[1];return Math.atan2(o,e)},o.calculateDistance=function(t,i){var e=i[0]-t[0],o=i[1]-t[1];return Math.sqrt(e*e+o*o)},o.calculateCenter=function(t,i){return[(t[0]+i[0])/2,(t[1]+i[1])/2]};var n=Date.now;o.prototype.handleStart=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];this.touchAEnabled?this.touchBEnabled||(this.touchBId=e.identifier,this.touchBEnabled=!0,this.posB=[e.pageX,e.pageY],this.timestampB=n(),this._startUpdate(t)):(this.touchAId=e.identifier,this.touchAEnabled=!0,this.posA=[e.pageX,e.pageY],this.timestampA=n())}},o.prototype.handleMove=function(t){if(this.touchAEnabled&&this.touchBEnabled){for(var i,e=this.timestampA,o=this.timestampB,s=0;s<t.changedTouches.length;s++){var r=t.changedTouches[s];r.identifier===this.touchAId?(this.posA=[r.pageX,r.pageY],this.timestampA=n(),i=this.timestampA-e):r.identifier===this.touchBId&&(this.posB=[r.pageX,r.pageY],this.timestampB=n(),i=this.timestampB-o)}i&&this._moveUpdate(i)}},o.prototype.handleEnd=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];(e.identifier===this.touchAId||e.identifier===this.touchBId)&&(this.touchAEnabled&&this.touchBEnabled&&this._eventOutput.emit("end",{touches:[this.touchAId,this.touchBId],angle:this._angle}),this.touchAEnabled=!1,this.touchAId=0,this.touchBEnabled=!1,this.touchBId=0)}},e.exports=o}),define("famous/inputs/PinchSync",["require","exports","module","./TwoFingerSync"],function(t,i,e){function o(t){s.call(this),this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._displacement=0,this._previousDistance=0}var s=t("./TwoFingerSync");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={scale:1},o.prototype._startUpdate=function(t){this._previousDistance=s.calculateDistance(this.posA,this.posB),this._displacement=0,this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._dist,center:s.calculateCenter(this.posA,this.posB)})},o.prototype._moveUpdate=function(t){var i=s.calculateDistance(this.posA,this.posB),e=s.calculateCenter(this.posA,this.posB),o=this.options.scale,n=o*(i-this._previousDistance),r=n/t;this._previousDistance=i,this._displacement+=n,this._eventOutput.emit("update",{delta:n,velocity:r,distance:i,displacement:this._displacement,center:e,touches:[this.touchAId,this.touchBId]})},o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){void 0!==t.scale&&(this.options.scale=t.scale)},e.exports=o}),define("famous/inputs/RotateSync",["require","exports","module","./TwoFingerSync"],function(t,i,e){function o(t){s.call(this),this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._angle=0,this._previousAngle=0}var s=t("./TwoFingerSync");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={scale:1},o.prototype._startUpdate=function(t){this._angle=0,this._previousAngle=s.calculateAngle(this.posA,this.posB);var i=s.calculateCenter(this.posA,this.posB);this._eventOutput.emit("start",{count:t.touches.length,angle:this._angle,center:i,touches:[this.touchAId,this.touchBId]})},o.prototype._moveUpdate=function(t){var i=this.options.scale,e=s.calculateAngle(this.posA,this.posB),o=s.calculateCenter(this.posA,this.posB),n=i*(e-this._previousAngle),r=n/t;this._angle+=n,this._eventOutput.emit("update",{delta:n,velocity:r,angle:this._angle,center:o,touches:[this.touchAId,this.touchBId]}),this._previousAngle=e},o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){void 0!==t.scale&&(this.options.scale=t.scale)},e.exports=o}),define("famous/inputs/ScaleSync",["require","exports","module","./TwoFingerSync"],function(t,i,e){function o(t){n.call(this),this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._scaleFactor=1,this._startDist=0,this._eventInput.on("pipe",s.bind(this))}function s(){this.touchAId=void 0,this.touchBId=void 0}var n=t("./TwoFingerSync");o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={scale:1},o.prototype._startUpdate=function(t){this._scaleFactor=1,this._startDist=n.calculateDistance(this.posA,this.posB),this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._startDist})},o.prototype._moveUpdate=function(t){var i=this.options.scale,e=n.calculateDistance(this.posA,this.posB),o=(e-this._startDist)/this._startDist,s=Math.max(1+i*o,0),r=(s-this._scaleFactor)/t;this._eventOutput.emit("update",{delta:o,scale:s,velocity:r,distance:e,touches:[this.touchAId,this.touchBId]}),this._scaleFactor=s},o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){void 0!==t.scale&&(this.options.scale=t.scale)},e.exports=o}),define("famous/inputs/ScrollSync",["require","exports","module","famous/core/EventHandler","famous/core/Engine"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",n.bind(this)),this._eventInput.on("wheel",n.bind(this)),this._inProgress=!1,this._loopBound=!1}function s(){if(this._inProgress&&c()-this._prevTime>this.options.stallTime){this._position=void 0===this.options.direction?[0,0]:0,this._inProgress=!1;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,i=this._payload;i.position=this._position,i.velocity=t,i.slip=!0,this._eventOutput.emit("end",i)}}function n(t){t.preventDefault(),this._inProgress||(this._inProgress=!0,g=this._payload,g.slip=!0,g.position=this._position,g.clientX=t.clientX,g.clientY=t.clientY,g.offsetX=t.offsetX,g.offsetY=t.offsetY,this._eventOutput.emit("start",g),this._loopBound||(a.on("prerender",s.bind(this)),this._loopBound=!0));var i=c(),e=this._prevTime||i,n=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,r=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(n*=this.options.lineHeight,r*=this.options.lineHeight),this.options.rails&&(Math.abs(n)>Math.abs(r)?r=0:n=0);var u,p,l=Math.max(i-e,h),f=n/l,d=r/l,m=this.options.scale;this.options.direction===o.DIRECTION_X?(p=m*n,u=m*f,this._position+=p):this.options.direction===o.DIRECTION_Y?(p=m*r,u=m*d,this._position+=p):(p=[m*n,m*r],u=[m*f,m*d],this._position[0]+=p[0],this._position[1]+=p[1]);var g=this._payload;g.delta=p,g.velocity=u,g.position=this._position,g.slip=!0,this._eventOutput.emit("update",g),this._prevTime=i,this._prevVel=u}var r=t("famous/core/EventHandler"),a=t("famous/core/Engine");o.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40},o.DIRECTION_X=0,o.DIRECTION_Y=1;var h=8,c=Date.now;o.prototype.getOptions=function(){return this.options},o.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.minimumEndSpeed&&(this.options.minimumEndSpeed=t.minimumEndSpeed),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime)},e.exports=o}),define("famous/inputs/TouchTracker",["require","exports","module","famous/core/EventHandler"],function(t,i,e){function o(t,i,e){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:i.origin,timestamp:u(),count:i.touches.length,history:e}}function s(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=o(e,t,null);this.eventOutput.emit("trackstart",s),this.selective||this.touchHistory[e.identifier]||this.track(s)}}function n(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=this.touchHistory[e.identifier];if(s){var n=o(e,t,s);this.touchHistory[e.identifier].push(n),this.eventOutput.emit("trackmove",n)}}}function r(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=this.touchHistory[e.identifier];if(s){var n=o(e,t,s);this.eventOutput.emit("trackend",n),delete this.touchHistory[e.identifier]}}}function a(){for(var t in this.touchHistory){var i=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:i[i.length-1].touch,timestamp:Date.now(),count:0,history:i}),delete this.touchHistory[t]}}function h(t){this.selective=t,this.touchHistory={},this.eventInput=new c,this.eventOutput=new c,c.setInputHandler(this,this.eventInput),c.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",s.bind(this)),this.eventInput.on("touchmove",n.bind(this)),this.eventInput.on("touchend",r.bind(this)),this.eventInput.on("touchcancel",r.bind(this)),this.eventInput.on("unpipe",a.bind(this))}var c=t("famous/core/EventHandler"),u=Date.now;h.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},e.exports=h}),define("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","famous/core/EventHandler"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._eventOutput=new c,this._touchTracker=new h,c.setOutputHandler(this,this._eventOutput),c.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",n.bind(this)),this._touchTracker.on("trackmove",r.bind(this)),this._touchTracker.on("trackend",a.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null
}function s(){var t=this._payload;t.position=null,t.velocity=null,t.clientX=void 0,t.clientY=void 0,t.count=void 0,t.touch=void 0}function n(t){s.call(this),this._position=void 0!==this.options.direction?0:[0,0];var i=this._payload;i.count=t.count,i.touch=t.identifier,this._eventOutput.emit("start",i)}function r(t){var i=t.history,e=i[i.length-1],s=i[i.length-2],n=s.timestamp,r=e.timestamp,a=e.x-s.x,h=e.y-s.y;this.options.rails&&(Math.abs(a)>Math.abs(h)?h=0:a=0);var c,p,l=Math.max(r-n,u),f=a/l,d=h/l,m=this.options.scale;this.options.direction===o.DIRECTION_X?(p=m*a,c=m*f,this._position+=p):this.options.direction===o.DIRECTION_Y?(p=m*h,c=m*d,this._position+=p):(p=[m*a,m*h],c=[m*f,m*d],this._position[0]+=p[0],this._position[1]+=p[1]);var g=this._payload;g.delta=p,g.velocity=c,g.position=this._position,g.clientX=t.x,g.clientY=t.y,g.count=t.count,g.touch=t.identifier,this._eventOutput.emit("update",g)}function a(t){var i=void 0!==this.options.direction?0:[0,0],e=t.history,s=t.count;if(e.length>1){var n=e[e.length-1],r=e[e.length-2],a=r.timestamp,h=n.timestamp,c=n.x-r.x,p=n.y-r.y;this.options.rails&&(Math.abs(c)>Math.abs(p)?p=0:c=0);var l=Math.max(h-a,u),f=c/l,d=p/l,m=this.options.scale;i=this.options.direction===o.DIRECTION_X?m*f:this.options.direction===o.DIRECTION_Y?m*d:[m*f,m*d]}var g=this._payload;g.velocity=i,g.clientX=t.x,g.clientY=t.y,g.count=s,g.touch=t.identifier,this._eventOutput.emit("end",g)}var h=t("./TouchTracker"),c=t("famous/core/EventHandler");o.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1},o.DIRECTION_X=0,o.DIRECTION_Y=1;var u=8;o.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},o.prototype.getOptions=function(){return this.options},e.exports=o}),define("famous/math/Vector",["require","exports","module"],function(t,i,e){function o(t,i,e){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=i||0,this.z=e||0),this}function s(t,i,e){return this.x=t,this.y=i,this.z=e,this}function n(t){return s.call(this,t[0],t[1],t[2]||0)}function r(t){return s.call(this,t.x,t.y,t.z)}function a(t){return s.call(this,t,0,0)}var h=new o(0,0,0);o.prototype.add=function(t){return s.call(h,this.x+t.x,this.y+t.y,this.z+t.z)},o.prototype.sub=function(t){return s.call(h,this.x-t.x,this.y-t.y,this.z-t.z)},o.prototype.mult=function(t){return s.call(h,t*this.x,t*this.y,t*this.z)},o.prototype.div=function(t){return this.mult(1/t)},o.prototype.cross=function(t){var i=this.x,e=this.y,o=this.z,n=t.x,r=t.y,a=t.z;return s.call(h,o*r-e*a,i*a-o*n,e*n-i*r)},o.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},o.prototype.rotateX=function(t){var i=this.x,e=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return s.call(h,i,e*n-o*r,e*r+o*n)},o.prototype.rotateY=function(t){var i=this.x,e=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return s.call(h,o*r+i*n,e,o*n-i*r)},o.prototype.rotateZ=function(t){var i=this.x,e=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return s.call(h,i*n-e*r,i*r+e*n,o)},o.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},o.prototype.normSquared=function(){return this.dot(this)},o.prototype.norm=function(){return Math.sqrt(this.normSquared())},o.prototype.normalize=function(t){0===arguments.length&&(t=1);var i=this.norm();return i>1e-7?r.call(h,this.mult(t/i)):s.call(h,t,0,0)},o.prototype.clone=function(){return new o(this)},o.prototype.isZero=function(){return!(this.x||this.y||this.z)},o.prototype.set=function(t){return t instanceof Array?n.call(this,t):t instanceof o?r.call(this,t):"number"==typeof t?a.call(this,t):void 0},o.prototype.setXYZ=function(){return s.apply(this,arguments)},o.prototype.set1D=function(t){return a.call(this,t)},o.prototype.put=function(t){r.call(t,h)},o.prototype.clear=function(){return s.call(this,0,0,0)},o.prototype.cap=function c(c){if(1/0===c)return r.call(h,this);var t=this.norm();return t>c?r.call(h,this.mult(c/t)):r.call(h,this)},o.prototype.project=function(t){return t.mult(this.dot(t))},o.prototype.reflectAcross=function(t){return t.normalize().put(t),r(h,this.sub(this.project(t).mult(2)))},o.prototype.get=function(){return[this.x,this.y,this.z]},o.prototype.get1D=function(){return this.x},e.exports=o}),define("famous/math/Matrix",["require","exports","module","./Vector"],function(t,i,e){function o(t){return this.values=t||[[1,0,0],[0,1,0],[0,0,1]],this}var s=t("./Vector"),n=new o,r=new s;o.prototype.get=function(){return this.values},o.prototype.set=function(t){this.values=t},o.prototype.vectorMultiply=function(t){var i=this.get(),e=t.x,o=t.y,s=t.z,n=i[0],a=i[1],h=i[2],c=n[0],u=n[1],p=n[2],l=a[0],f=a[1],d=a[2],m=h[0],g=h[1],y=h[2];return r.setXYZ(c*e+u*o+p*s,l*e+f*o+d*s,m*e+g*o+y*s)},o.prototype.multiply=function(t){for(var i=this.get(),e=[[]],o=0;3>o;o++){e[o]=[];for(var s=0;3>s;s++){for(var r=0,a=0;3>a;a++)r+=i[o][a]*t[a][s];e[o][s]=r}}return n.set(e)},o.prototype.transpose=function(){for(var t=[],i=this.get(),e=0;3>e;e++)for(var o=0;3>o;o++)t[e][o]=i[o][e];return n.set(t)},o.prototype.clone=function(){for(var t=this.get(),i=[],e=0;3>e;e++)i[e]=t[e].slice();return new o(i)},e.exports=o}),define("famous/math/Quaternion",["require","exports","module","./Matrix"],function(t,i,e){function o(t,i,e,o){return 1===arguments.length?this.set(t):(this.w=void 0!==t?t:1,this.x=void 0!==i?i:0,this.y=void 0!==e?e:0,this.z=void 0!==o?o:0),this}var s=t("./Matrix"),n=new o(1,0,0,0);o.prototype.add=function(t){return n.setWXYZ(this.w+t.w,this.x+t.x,this.y+t.y,this.z+t.z)},o.prototype.sub=function(t){return n.setWXYZ(this.w-t.w,this.x-t.x,this.y-t.y,this.z-t.z)},o.prototype.scalarDivide=function(t){return this.scalarMultiply(1/t)},o.prototype.scalarMultiply=function(t){return n.setWXYZ(this.w*t,this.x*t,this.y*t,this.z*t)},o.prototype.multiply=function(t){var i=this.x,e=this.y,o=this.z,s=this.w,r=t.x,a=t.y,h=t.z,c=t.w||0;return n.setWXYZ(s*c-i*r-e*a-o*h,i*c+r*s+a*o-e*h,e*c+a*s+i*h-r*o,o*c+h*s+r*e-i*a)};var r=new o(1,0,0,0);o.prototype.rotateVector=function(t){return r.set(this.conj()),n.set(this.multiply(t).multiply(r))},o.prototype.inverse=function(){return n.set(this.conj().scalarDivide(this.normSquared()))},o.prototype.negate=function(){return this.scalarMultiply(-1)},o.prototype.conj=function(){return n.setWXYZ(this.w,-this.x,-this.y,-this.z)},o.prototype.normalize=function(t){return t=void 0===t?1:t,this.scalarDivide(t*this.norm())},o.prototype.makeFromAngleAndAxis=function(t,i){var e=i.normalize(),o=.5*t,s=-Math.sin(o);return this.x=s*e.x,this.y=s*e.y,this.z=s*e.z,this.w=Math.cos(o),this},o.prototype.setWXYZ=function(t,i,e,o){return n.clear(),this.w=t,this.x=i,this.y=e,this.z=o,this},o.prototype.set=function(t){return t instanceof Array?(this.w=t[0],this.x=t[1],this.y=t[2],this.z=t[3]):(this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z),this!==n&&n.clear(),this},o.prototype.put=function(t){t.set(n)},o.prototype.clone=function(){return new o(this)},o.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},o.prototype.isEqual=function(t){return t.w===this.w&&t.x===this.x&&t.y===this.y&&t.z===this.z},o.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},o.prototype.normSquared=function(){return this.dot(this)},o.prototype.norm=function(){return Math.sqrt(this.normSquared())},o.prototype.isZero=function(){return!(this.x||this.y||this.z)},o.prototype.getTransform=function(){var t=this.normalize(1),i=t.x,e=t.y,o=t.z,s=t.w;return[1-2*e*e-2*o*o,2*i*e-2*o*s,2*i*o+2*e*s,0,2*i*e+2*o*s,1-2*i*i-2*o*o,2*e*o-2*i*s,0,2*i*o-2*e*s,2*e*o+2*i*s,1-2*i*i-2*e*e,0,0,0,0,1]};var a=new s;o.prototype.getMatrix=function(){var t=this.normalize(1),i=t.x,e=t.y,o=t.z,s=t.w;return a.set([[1-2*e*e-2*o*o,2*i*e+2*o*s,2*i*o-2*e*s],[2*i*e-2*o*s,1-2*i*i-2*o*o,2*e*o+2*i*s],[2*i*o+2*e*s,2*e*o-2*i*s,1-2*i*i-2*e*e]])};var h=1e-5;o.prototype.slerp=function(t,i){var e,o,s,r,a;return o=this.dot(t),1-o>h?(e=Math.acos(o),s=Math.sin(e),r=Math.sin((1-i)*e)/s,a=Math.sin(i*e)/s):(r=1-i,a=i),n.set(this.scalarMultiply(r/a).add(t).multiply(a))},e.exports=o}),define("famous/math/Random",["require","exports","module"],function(t,i,e){function o(t,i){return t+n()*(i-t)}function s(t,i){return t+n()*(i-t+1)>>0}var n=Math.random,r={};r.integer=function(t,i,e){if(t=void 0!==t?t:0,i=void 0!==i?i:1,void 0!==e){for(var o=[],n=0;e>n;n++)o.push(s(t,i));return o}return s(t,i)},r.range=function(t,i,e){if(t=void 0!==t?t:0,i=void 0!==i?i:1,void 0!==e){for(var s=[],n=0;e>n;n++)s.push(o(t,i));return s}return o(t,i)},r.sign=function(t){return t=void 0!==t?t:.5,n()<t?1:-1},r.bool=function(t){return t=void 0!==t?t:.5,n()<t},e.exports=r}),define("famous/math/Utilities",["require","exports","module"],function(t,i,e){var o={};o.clamp=function(t,i){return Math.max(Math.min(t,i[1]),i[0])},o.length=function(t){for(var i=0,e=0;e<t.length;e++)i+=t[e]*t[e];return Math.sqrt(i)},e.exports=o}),define("famous/modifiers/Draggable",["require","exports","module","famous/core/Transform","famous/transitions/Transitionable","famous/core/EventHandler","famous/math/Utilities","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/TouchSync"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._positionState=new u([0,0]),this._differential=[0,0],this._active=!0,this.sync=new f(["mouse","touch"],{scale:this.options.scale}),this.eventOutput=new p,p.setInputHandler(this,this.sync),p.setOutputHandler(this,this.eventOutput),h.call(this)}function s(t){var i=this.options,e=i.projection,o=i.snapX,s=i.snapY,n=e&g.x?t[0]:0,r=e&g.y?t[1]:0;return o>0&&(n-=n%o),s>0&&(r-=r%s),[n,r]}function n(){this._active&&(this._positionState.isActive()&&this._positionState.halt(),this.eventOutput.emit("start",{position:this.getPosition()}))}function r(t){if(this._active){var i=this.options;this._differential=t.position;var e=s.call(this,this._differential);this._differential[0]-=e[0],this._differential[1]-=e[1];var o=this.getPosition();if(o[0]+=e[0],o[1]+=e[1],i.xRange){var n=[i.xRange[0]+.5*i.snapX,i.xRange[1]-.5*i.snapX];o[0]=y(o[0],n)}if(i.yRange){var r=[i.yRange[0]+.5*i.snapY,i.yRange[1]-.5*i.snapY];o[1]=y(o[1],r)}this.eventOutput.emit("update",{position:o})}}function a(){this._active&&this.eventOutput.emit("end",{position:this.getPosition()})}function h(){this.sync.on("start",n.bind(this)),this.sync.on("update",r.bind(this)),this.sync.on("end",a.bind(this))}var c=t("famous/core/Transform"),u=t("famous/transitions/Transitionable"),p=t("famous/core/EventHandler"),l=t("famous/math/Utilities"),f=t("famous/inputs/GenericSync"),d=t("famous/inputs/MouseSync"),m=t("famous/inputs/TouchSync");f.register({mouse:d,touch:m});var g={x:1,y:2};o.DIRECTION_X=g.x,o.DIRECTION_Y=g.y;var y=l.clamp;o.DEFAULT_OPTIONS={projection:g.x|g.y,scale:1,xRange:null,yRange:null,snapX:0,snapY:0,transition:{duration:0}},o.prototype.setOptions=function(t){var i=this.options;if(void 0!==t.projection){var e=t.projection;this.options.projection=0,["x","y"].forEach(function(t){-1!==e.indexOf(t)&&(i.projection|=g[t])})}void 0!==t.scale&&(i.scale=t.scale),void 0!==t.xRange&&(i.xRange=t.xRange),void 0!==t.yRange&&(i.yRange=t.yRange),void 0!==t.snapX&&(i.snapX=t.snapX),void 0!==t.snapY&&(i.snapY=t.snapY)},o.prototype.getPosition=function(){return this._positionState.get()},o.prototype.setRelativePosition=function(t,i,e){var o=this.getPosition(),s=[o[0]+t[0],o[1]+t[1]];this.setPosition(s,i,e)},o.prototype.setPosition=function(t,i,e){this._positionState.isActive()&&this._positionState.halt(),this._positionState.set(t,i,e)},o.prototype.activate=function(){this._active=!0},o.prototype.deactivate=function(){this._active=!1},o.prototype.toggle=function(){this._active=!this._active},o.prototype.modify=function(t){var i=this.getPosition();return{transform:c.translate(i[0],i[1]),target:t}},e.exports=o}),define("famous/modifiers/Fader",["require","exports","module","famous/transitions/Transitionable","famous/core/OptionsManager"],function(t,i,e){function o(t,i){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new n(this.options),t&&this.setOptions(t),i||(i=0),this.transitionHelper=new s(i)}var s=t("famous/transitions/Transitionable"),n=t("famous/core/OptionsManager");o.DEFAULT_OPTIONS={cull:!1,transition:!0,pulseInTransition:!0,pulseOutTransition:!0},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},o.prototype.show=function(t,i){t=t||this.options.transition,this.set(1,t,i)},o.prototype.hide=function(t,i){t=t||this.options.transition,this.set(0,t,i)},o.prototype.set=function(t,i,e){this.halt(),this.transitionHelper.set(t,i,e)},o.prototype.halt=function(){this.transitionHelper.halt()},o.prototype.isVisible=function(){return this.transitionHelper.get()>0},o.prototype.modify=function(t){var i=this.transitionHelper.get();return this.options.cull&&!i?void 0:{opacity:i,target:t}},e.exports=o}),define("famous/modifiers/ModifierChain",["require","exports","module"],function(t,i,e){function o(){this._chain=[],arguments.length&&this.addModifier.apply(this,arguments)}o.prototype.addModifier=function(){Array.prototype.push.apply(this._chain,arguments)},o.prototype.removeModifier=function(t){var i=this._chain.indexOf(t);0>i||this._chain.splice(i,1)},o.prototype.modify=function(t){for(var i=this._chain,e=t,o=0;o<i.length;o++)e=i[o].modify(e);return e},e.exports=o}),define("famous/modifiers/StateModifier",["require","exports","module","famous/core/Modifier","famous/core/Transform","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,i,e){function o(t){this._transformState=new a(n.identity),this._opacityState=new r(1),this._originState=new r([0,0]),this._alignState=new r([0,0]),this._sizeState=new r([0,0]),this._modifier=new s({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null}),this._hasOrigin=!1,this._hasAlign=!1,this._hasSize=!1,t&&(t.transform&&this.setTransform(t.transform),void 0!==t.opacity&&this.setOpacity(t.opacity),t.origin&&this.setOrigin(t.origin),t.align&&this.setAlign(t.align),t.size&&this.setSize(t.size))}var s=t("famous/core/Modifier"),n=t("famous/core/Transform"),r=t("famous/transitions/Transitionable"),a=t("famous/transitions/TransitionableTransform");o.prototype.setTransform=function(t,i,e){return this._transformState.set(t,i,e),this},o.prototype.setOpacity=function(t,i,e){return this._opacityState.set(t,i,e),this},o.prototype.setOrigin=function(t,i,e){return null===t?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(t,i,e),this)},o.prototype.setAlign=function(t,i,e){return null===t?(this._hasAlign&&(this._modifier.alignFrom(null),this._hasAlign=!1),this):(this._hasAlign||(this._hasAlign=!0,this._modifier.alignFrom(this._alignState)),this._alignState.set(t,i,e),this)},o.prototype.setSize=function(t,i,e){return null===t?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(t,i,e),this)},o.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._alignState.halt(),this._sizeState.halt()},o.prototype.getTransform=function(){return this._transformState.get()},o.prototype.getFinalTransform=function(){return this._transformState.getFinal()},o.prototype.getOpacity=function(){return this._opacityState.get()},o.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},o.prototype.getAlign=function(){return this._hasAlign?this._alignState.get():null},o.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},o.prototype.modify=function(t){return this._modifier.modify(t)},e.exports=o}),define("famous/physics/PhysicsEngine",["require","exports","module","famous/core/EventHandler"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agents={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=T(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1}function s(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function n(t,i,e){return void 0===i&&(i=this.getParticlesAndBodies()),i instanceof Array||(i=[i]),this._agents[this._currAgentId]={agent:t,targets:i,source:e},s.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return this._agents[t]}function a(t){var i=r.call(this,this._forces[t]);i.agent.applyForce(i.targets,i.source)}function h(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function c(t,i){var e=this._agents[this._constraints[t]];return e.agent.applyConstraint(e.targets,e.source,i)}function u(t){for(var i=0;i<this.options.constraintSteps;){for(var e=this._constraints.length-1;e>-1;e--)c.call(this,e,t);i++}}function p(t,i){t.integrateVelocity(i)}function l(t,i){t.integrateAngularMomentum(i),t.updateAngularVelocity()}function f(t,i){t.integrateOrientation(i)}function d(t,i){t.integratePosition(i),t.emit("update",t)}function m(t){h.call(this,t),this.forEach(p,t),this.forEachBody(l,t),u.call(this,t),this.forEachBody(f,t),this.forEach(d,t)}function g(){var t=0,i=0;return this.forEach(function(e){i=e.getEnergy(),t+=i,i<e.sleepTolerance&&e.sleep()}),t}function y(){for(var t=0,i=this._forces.length-1;i>-1;i--)t+=this._forces[i].getEnergy()||0;return t}function _(){for(var t=0,i=this._constraints.length-1;i>-1;i--)t+=this._constraints[i].getEnergy()||0;return t}var v=t("famous/core/EventHandler"),O=17,S=17,w=1e3/120;o.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7};var T=function(){return Date.now}();o.prototype.setOptions=function(t){for(var i in t)this.options[i]&&(this.options[i]=t[i])},o.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t},o.prototype.removeBody=function(t){var i=t.isBody?this._bodies:this._particles,e=i.indexOf(t);if(e>-1){for(var o=0;o<Object.keys(this._agents).length;o++)this.detachFrom(o,t);i.splice(e,1)}0===this.getBodies().length&&(this._hasBodies=!1)},o.prototype.attach=function(t,i,e){if(t instanceof Array){for(var o=[],s=0;s<t.length;s++)o[s]=n.call(this,t[s],i,e);return o}return n.call(this,t,i,e)},o.prototype.attachTo=function(t,i){r.call(this,t).targets.push(i)},o.prototype.detach=function(t){var i=this.getAgent(t),e=s.call(this,i),o=e.indexOf(t);e.splice(o,1),delete this._agents[t]},o.prototype.detachFrom=function(t,i){var e=r.call(this,t);if(e.source===i)this.detach(t);else{var o=e.targets,s=o.indexOf(i);s>-1&&o.splice(s,1)}},o.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},o.prototype.getAgent=function(t){return r.call(this,t).agent},o.prototype.getParticles=function(){return this._particles},o.prototype.getBodies=function(){return this._bodies},o.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},o.prototype.forEachParticle=function(t,i){for(var e=this.getParticles(),o=0,s=e.length;s>o;o++)t.call(this,e[o],i)},o.prototype.forEachBody=function(t,i){if(this._hasBodies)for(var e=this.getBodies(),o=0,s=e.length;s>o;o++)t.call(this,e[o],i)},o.prototype.forEach=function(t,i){this.forEachParticle(t,i),this.forEachBody(t,i)},o.prototype.getEnergy=function(){return g.call(this)+y.call(this)+_.call(this)},o.prototype.step=function(){var t=T(),i=t-this._prevTime;this._prevTime=t,S>i||(i>w&&(i=w),m.call(this,O))},o.prototype.isSleeping=function(){return this._isSleeping},o.prototype.sleep=function(){this.emit("end",this),this._isSleeping=!0},o.prototype.wake=function(){this._prevTime=T(),this.emit("start",this),this._isSleeping=!1},o.prototype.emit=function(t,i){null!==this._eventHandler&&this._eventHandler.emit(t,i)},o.prototype.on=function(t,i){null===this._eventHandler&&(this._eventHandler=new v),this._eventHandler.on(t,i)},e.exports=o}),define("famous/surfaces/CanvasSurface",["require","exports","module","famous/core/Surface"],function(t,i,e){function o(t){t&&t.canvasSize&&(this._canvasSize=t.canvasSize),s.apply(this,arguments),this._canvasSize||(this._canvasSize=this.getSize()),this._backBuffer=document.createElement("canvas"),this._canvasSize&&(this._backBuffer.width=this._canvasSize[0],this._backBuffer.height=this._canvasSize[1]),this._contextId=void 0}var s=t("famous/core/Surface");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="canvas",o.prototype.elementClass="famous-surface",o.prototype.setContent=function(){},o.prototype.deploy=function(t){this._canvasSize&&(t.width=this._canvasSize[0],t.height=this._canvasSize[1]),"2d"===this._contextId&&(t.getContext(this._contextId).drawImage(this._backBuffer,0,0),this._backBuffer.width=0,this._backBuffer.height=0)},o.prototype.recall=function(t){this.getSize(),this._backBuffer.width=t.width,this._backBuffer.height=t.height,"2d"===this._contextId&&(this._backBuffer.getContext(this._contextId).drawImage(t,0,0),t.width=0,t.height=0)},o.prototype.getContext=function(t){return this._contextId=t,this._currTarget?this._currTarget.getContext(t):this._backBuffer.getContext(t)},o.prototype.setSize=function(t,i){s.prototype.setSize.apply(this,arguments),i&&(this._canvasSize=[i[0],i[1]]),this._currTarget&&(this._currTarget.width=this._canvasSize[0],this._currTarget.height=this._canvasSize[1])},e.exports=o}),define("famous/surfaces/ContainerSurface",["require","exports","module","famous/core/Surface","famous/core/Context"],function(t,i,e){function o(t){s.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new n(this._container),this.setContent(this._container)}var s=t("famous/core/Surface"),n=t("famous/core/Context");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="div",o.prototype.elementClass="famous-surface",o.prototype.add=function(){return this.context.add.apply(this.context,arguments)},o.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),s.prototype.render.apply(this,arguments)},o.prototype.deploy=function(){return this._shouldRecalculateSize=!0,s.prototype.deploy.apply(this,arguments)},o.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,i=s.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),i},e.exports=o}),define("famous/surfaces/FormContainerSurface",["require","exports","module","./ContainerSurface"],function(t,i,e){function o(t){t&&(this._method=t.method||""),s.apply(this,arguments)}var s=t("./ContainerSurface");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="form",o.prototype.deploy=function(t){return this._method&&(t.method=this._method),s.prototype.deploy.apply(this,arguments)},e.exports=o}),define("famous/surfaces/ImageSurface",["require","exports","module","famous/core/Surface"],function(t,i,e){function o(){this._imageUrl=void 0,s.apply(this,arguments)}var s=t("famous/core/Surface");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="img",o.prototype.elementClass="famous-surface",o.prototype.setContent=function(t){this._imageUrl=t,this._contentDirty=!0},o.prototype.deploy=function(t){t.src=this._imageUrl||""},o.prototype.recall=function(t){t.src=""},e.exports=o}),define("famous/surfaces/InputSurface",["require","exports","module","famous/core/Surface"],function(t,i,e){function o(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._type=t.type||"text",this._name=t.name||"",s.apply(this,arguments),this.on("click",this.focus.bind(this))}var s=t("famous/core/Surface");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="input",o.prototype.elementClass="famous-surface",o.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},o.prototype.focus=function(){return this._currTarget&&this._currTarget.focus(),this},o.prototype.blur=function(){return this._currTarget&&this._currTarget.blur(),this},o.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},o.prototype.setType=function(t){return this._type=t,this._contentDirty=!0,this},o.prototype.getValue=function(){return this._currTarget?this._currTarget.value:this._value},o.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},o.prototype.getName=function(){return this._name},o.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),t.value=this._value,t.type=this._type,t.name=this._name},e.exports=o}),define("famous/surfaces/SubmitInputSurface",["require","exports","module","./InputSurface"],function(t,i,e){function o(t){s.apply(this,arguments),this._type="submit",t&&t.onClick&&this.setOnClick(t.onClick)}var s=t("./InputSurface");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.setOnClick=function(t){this.onClick=t},o.prototype.deploy=function(t){this.onclick&&(t.onClick=this.onClick),s.prototype.deploy.apply(this,arguments)},e.exports=o}),define("famous/surfaces/TextareaSurface",["require","exports","module","famous/core/Surface"],function(t,i,e){function o(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._name=t.name||"",this._wrap=t.wrap||"",this._cols=t.cols||"",this._rows=t.rows||"",s.apply(this,arguments),this.on("click",this.focus.bind(this))}var s=t("famous/core/Surface");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.elementType="textarea",o.prototype.elementClass="famous-surface",o.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},o.prototype.focus=function(){return this._currTarget&&this._currTarget.focus(),this},o.prototype.blur=function(){return this._currTarget&&this._currTarget.blur(),this},o.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},o.prototype.getValue=function(){return this._currTarget?this._currTarget.value:this._value},o.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},o.prototype.getName=function(){return this._name},o.prototype.setWrap=function(t){return this._wrap=t,this._contentDirty=!0,this},o.prototype.setColumns=function(t){return this._cols=t,this._contentDirty=!0,this},o.prototype.setRows=function(t){return this._rows=t,this._contentDirty=!0,this},o.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),""!==this._value&&(t.value=this._value),""!==this._name&&(t.name=this._name),""!==this._wrap&&(t.wrap=this._wrap),""!==this._cols&&(t.cols=this._cols),""!==this._rows&&(t.rows=this._rows)},e.exports=o}),define("famous/surfaces/VideoSurface",["require","exports","module","famous/core/Surface"],function(t,i,e){function o(t){this._videoUrl=void 0,this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),s.apply(this,arguments)}var s=t("famous/core/Surface");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={autoplay:!1},o.prototype.elementType="video",o.prototype.elementClass="famous-surface",o.prototype.setOptions=function(t){for(var i in o.DEFAULT_OPTIONS)void 0!==t[i]&&(this.options[i]=t[i])},o.prototype.setContent=function(t){this._videoUrl=t,this._contentDirty=!0},o.prototype.deploy=function(t){t.src=this._videoUrl,t.autoplay=this.options.autoplay},o.prototype.recall=function(t){t.src=""},e.exports=o}),define("famous/transitions/CachedMap",["require","exports","module"],function(t,i,e){function o(t){this._map=t||null,this._cachedOutput=null,this._cachedInput=Number.NaN}o.create=function(t){var i=new o(t);return i.get.bind(i)},o.prototype.get=function(t){return t!==this._cachedInput&&(this._cachedInput=t,this._cachedOutput=this._map(t)),this._cachedOutput},e.exports=o}),define("famous/transitions/Easing",["require","exports","module"],function(t,i,e){var o={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var i=1.70158,e=0,o=1;return 0===t?0:1===t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/o),-(o*Math.pow(2,10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e)))},outElastic:function(t){var i=1.70158,e=0,o=1;return 0===t?0:1===t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/o),o*Math.pow(2,-10*t)*Math.sin(2*(t-i)*Math.PI/e)+1)},inOutElastic:function(t){var i=1.70158,e=0,o=1;return 0===t?0:2===(t/=.5)?1:(e||(e=.3*1.5),i=e/(2*Math.PI)*Math.asin(1/o),1>t?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e):o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e)*.5+1)},inBack:function(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)},outBack:function(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1},inOutBack:function(t,i){return void 0===i&&(i=1.70158),(t/=.5)<1?.5*t*t*(((i*=1.525)+1)*t-i):.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},inBounce:function(t){return 1-o.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*o.inBounce(2*t):.5*o.outBounce(2*t-1)+.5}};e.exports=o}),define("famous/physics/integrators/SymplecticEuler",["require","exports","module","famous/core/OptionsManager"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new s(this.options),t&&this.setOptions(t)}var s=t("famous/core/OptionsManager");o.DEFAULT_OPTIONS={velocityCap:void 0,angularVelocityCap:void 0},o.prototype.setOptions=function(t){this._optionsManager.patch(t)},o.prototype.getOptions=function(){return this._optionsManager.value()},o.prototype.integrateVelocity=function(t,i){var e=t.velocity,o=t.inverseMass,s=t.force;s.isZero()||(e.add(s.mult(i*o)).put(e),s.clear())},o.prototype.integratePosition=function(t,i){var e=t.position,o=t.velocity;this.options.velocityCap&&o.cap(this.options.velocityCap).put(o),e.add(o.mult(i)).put(e)},o.prototype.integrateAngularMomentum=function(t,i){var e=t.angularMomentum,o=t.torque;o.isZero()||(this.options.angularVelocityCap&&o.cap(this.options.angularVelocityCap).put(o),e.add(o.mult(i)).put(e),o.clear())},o.prototype.integrateOrientation=function(t,i){var e=t.orientation,o=t.angularVelocity;o.isZero()||e.add(e.multiply(o).scalarMultiply(.5*i)).put(e)},e.exports=o}),define("famous/physics/bodies/Particle",["require","exports","module","famous/math/Vector","famous/core/Transform","famous/core/EventHandler","../integrators/SymplecticEuler"],function(t,i,e){function o(t){t=t||{},this.position=new n,this.velocity=new n,this.force=new n;
var i=o.DEFAULT_OPTIONS;this.setPosition(t.position||i.position),this.setVelocity(t.velocity||i.velocity),this.force.set(t.force||[0,0,0]),this.mass=void 0!==t.mass?t.mass:i.mass,this.axis=void 0!==t.axis?t.axis:i.axis,this.inverseMass=1/this.mass,this._isSleeping=!1,this._engine=null,this._eventOutput=null,this._positionGetter=null,this.transform=r.identity.slice(),this._spec={transform:this.transform,target:null}}function s(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var n=t("famous/math/Vector"),r=t("famous/core/Transform"),a=t("famous/core/EventHandler"),h=t("../integrators/SymplecticEuler");o.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1,axis:void 0},o.SLEEP_TOLERANCE=1e-7,o.AXES={X:0,Y:1,Z:2},o.INTEGRATOR=new h;var c={start:"start",update:"update",end:"end"},u=function(){return Date.now}();o.prototype.sleep=function(){this._isSleeping||(this.emit(c.end,this),this._isSleeping=!0)},o.prototype.wake=function(){this._isSleeping&&(this.emit(c.start,this),this._isSleeping=!1,this._prevTime=u())},o.prototype.isBody=!1,o.prototype.setPosition=function(t){this.position.set(t)},o.prototype.setPosition1D=function(t){this.position.x=t},o.prototype.getPosition=function(){return this._positionGetter instanceof Function&&this.setPosition(this._positionGetter()),this._engine.step(),this.position.get()},o.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},o.prototype.positionFrom=function(t){this._positionGetter=t},o.prototype.setVelocity=function(t){this.velocity.set(t),this.wake()},o.prototype.setVelocity1D=function(t){this.velocity.x=t,this.wake()},o.prototype.getVelocity=function(){return this.velocity.get()},o.prototype.getVelocity1D=function(){return this.velocity.x},o.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},o.prototype.getMass=function(){return this.mass},o.prototype.reset=function(t,i){this.setPosition(t||[0,0,0]),this.setVelocity(i||[0,0,0])},o.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},o.prototype.applyImpulse=function(t){if(!t.isZero()){var i=this.velocity;i.add(t.mult(this.inverseMass)).put(i)}},o.prototype.integrateVelocity=function(t){o.INTEGRATOR.integrateVelocity(this,t)},o.prototype.integratePosition=function(t){o.INTEGRATOR.integratePosition(this,t)},o.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},o.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},o.prototype.getTransform=function(){this._engine.step();var t=this.position,i=this.axis,e=this.transform;return void 0!==i&&(i&~o.AXES.X&&(t.x=0),i&~o.AXES.Y&&(t.y=0),i&~o.AXES.Z&&(t.z=0)),e[12]=t.x,e[13]=t.y,e[14]=t.z,e},o.prototype.modify=function(t){var i=this._spec;return i.transform=this.getTransform(),i.target=t,i},o.prototype.emit=function(t,i){this._eventOutput&&this._eventOutput.emit(t,i)},o.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},o.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},o.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},o.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},e.exports=o}),define("famous/physics/constraints/Constraint",["require","exports","module","famous/core/EventHandler"],function(t,i,e){function o(){this.options=this.options||{},this._energy=0,this._eventOutput=null}function s(){this._eventOutput=new n,this._eventOutput.bindThis(this),n.setOutputHandler(this,this._eventOutput)}var n=t("famous/core/EventHandler");o.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},o.prototype.applyConstraint=function(){},o.prototype.getEnergy=function(){return this._energy},o.prototype.setEnergy=function(t){this._energy=t},o.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},o.prototype.addListener=function(){return s.call(this),this.addListener.apply(this,arguments)},o.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},o.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},o.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},e.exports=o}),define("famous/physics/constraints/Snap",["require","exports","module","./Constraint","famous/math/Vector"],function(t,i,e){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.pDiff=new r,this.vDiff=new r,this.impulse1=new r,this.impulse2=new r,n.call(this)}function s(t,i,e){return Math.abs(t.dot(i)/e)}var n=t("./Constraint"),r=t("famous/math/Vector");o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,anchor:void 0};var a=Math.PI;o.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor instanceof r&&(this.options.anchor=t.anchor),t.anchor.position instanceof r&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new r(t.anchor))),void 0!==t.length&&(this.options.length=t.length),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.options.period=t.period)},o.prototype.setAnchor=function(t){void 0!==this.options.anchor&&(this.options.anchor=new r),this.options.anchor.set(t)},o.prototype.getEnergy=function(t,i){var e=this.options,o=e.length,s=e.anchor||i.position,n=Math.pow(2*a/e.period,2),r=s.sub(t.position).norm()-o;return.5*n*r*r},o.prototype.applyConstraint=function(t,i,e){for(var o=this.options,n=this.pDiff,r=this.vDiff,h=this.impulse1,c=this.impulse2,u=o.length,p=o.anchor||i.position,l=o.period,f=o.dampingRatio,d=0;d<t.length;d++){var m=t[d],g=m.position,y=m.velocity,_=m.mass,v=m.inverseMass;n.set(g.sub(p));var O,S=n.norm()-u;if(i){var w=i.inverseMass,T=i.velocity;r.set(y.sub(T)),O=1/(v+w)}else r.set(y),O=_;var b,x;if(0===this.options.period)b=0,x=1;else{var E=4*O*a*a/(l*l),I=4*O*a*f/l;x=e*E/(I+e*E),b=1/(I+e*E)}var M=x/e*S;n.normalize(-M).sub(r).mult(e/(b+e/O)).put(h),m.applyImpulse(h),i&&(h.mult(-1).put(c),i.applyImpulse(c)),this.setEnergy(s(h,n,e))}},e.exports=o}),define("famous/transitions/SnapTransition",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/constraints/Snap","famous/math/Vector"],function(t,i,e){function o(t){t=t||0,this.endState=new v(t),this.initState=new v,this._dimensions=1,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new g,this.particle=new y,this.spring=new _({anchor:this.endState}),this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function s(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function n(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function r(t){this.endState.set(t),n.call(this)}function a(){this.PE.wake()}function h(){this.PE.sleep()}function c(t){this.particle.position.set(t)}function u(t){this.particle.velocity.set(t)}function p(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function l(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function f(t){this._callback=t}function d(t){var i=o.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),u.call(this,t.velocity)}function m(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else s.call(this)<this._absRestTolerance&&(c.call(this,this.endState),u.call(this,[0,0,0]),h.call(this))}var g=t("famous/physics/PhysicsEngine"),y=t("famous/physics/bodies/Particle"),_=t("famous/physics/constraints/Snap"),v=t("famous/math/Vector");o.SUPPORTS_MULTIPLE=3,o.DEFAULT_OPTIONS={period:100,dampingRatio:.2,velocity:0},o.prototype.reset=function(t,i){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),c.call(this,t),r.call(this,t),i&&u.call(this,i),f.call(this,void 0)},o.prototype.getVelocity=function(){return l.call(this)},o.prototype.setVelocity=function(t){this.call(this,u(t))},o.prototype.isActive=function(){return!this.PE.isSleeping()},o.prototype.halt=function(){this.set(this.get())},o.prototype.get=function(){return m.call(this),p.call(this)},o.prototype.set=function(t,i,e){return i?(this._dimensions=t instanceof Array?t.length:0,a.call(this),d.call(this,i),r.call(this,t),void f.call(this,e)):(this.reset(t),void(e&&e()))},e.exports=o}),define("famous/physics/forces/Force",["require","exports","module","famous/math/Vector","famous/core/EventHandler"],function(t,i,e){function o(t){this.force=new n(t),this._energy=0,this._eventOutput=null}function s(){this._eventOutput=new r,this._eventOutput.bindThis(this),r.setOutputHandler(this,this._eventOutput)}var n=t("famous/math/Vector"),r=t("famous/core/EventHandler");o.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},o.prototype.applyForce=function(t){t.applyForce(this.force)},o.prototype.getEnergy=function(){return this._energy},o.prototype.setEnergy=function(t){this._energy=t},o.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},o.prototype.addListener=function(){return s.call(this),this.addListener.apply(this,arguments)},o.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},o.prototype.removeListener=function(){return this.removeListener.apply(this,arguments)},o.prototype.unpipe=function(){return this.unpipe.apply(this,arguments)},e.exports=o}),define("famous/physics/forces/Spring",["require","exports","module","./Force","famous/math/Vector"],function(t,i,e){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new u(0,0,0),h.call(this),c.call(this)}function s(t){this.forceFunction=t}function n(){var t=this.options;t.stiffness=Math.pow(2*p/t.period,2)}function r(){var t=this.options;t.damping=4*p*t.dampingRatio/t.period}function a(t,i){return.5*t*i*i}function h(){s.call(this,this.options.forceFunction),n.call(this),r.call(this)}var c=t("./Force"),u=t("famous/math/Vector");o.prototype=Object.create(c.prototype),o.prototype.constructor=o;var p=Math.PI;o.FORCE_FUNCTIONS={FENE:function(t,i){var e=.99*i,o=Math.max(Math.min(t,e),-e);return o/(1-o*o/(i*i))},HOOK:function(t){return t}},o.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:o.FORCE_FUNCTIONS.HOOK},o.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof u&&(this.options.anchor=t.anchor.position),t.anchor instanceof u&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new u(t.anchor))),void 0!==t.period&&(this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),h.call(this)},o.prototype.applyForce=function(t,i){for(var e=this.force,o=this.disp,s=this.options,n=s.stiffness,r=s.damping,h=s.length,c=s.maxLength,u=s.anchor||i.position,p=0;p<t.length;p++){var l=t[p],f=l.position,d=l.velocity;u.sub(f).put(o);var m=o.norm()-h;if(0===m)return;var g=l.mass;n*=g,r*=g,o.normalize(n*this.forceFunction(m,c)).put(e),r&&(i?e.add(d.sub(i.velocity).mult(-r)).put(e):e.add(d.mult(-r)).put(e)),l.applyForce(e),i&&i.applyForce(e.mult(-1)),this.setEnergy(a(n,m))}},o.prototype.getEnergy=function(t){var i=this.options,e=i.length,o=i.anchor,s=i.stiffness,n=o.sub(t.position).norm()-e;return.5*s*n*n},o.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new u),this.options.anchor.set(t)},e.exports=o}),define("famous/transitions/SpringTransition",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Spring","famous/math/Vector"],function(t,i,e){function o(t){t=t||0,this.endState=new v(t),this.initState=new v,this._dimensions=void 0,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new g,this.spring=new _({anchor:this.endState}),this.particle=new y,this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function s(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function n(t){this.particle.setPosition(t)}function r(t){this.particle.setVelocity(t)}function a(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function h(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function c(t){this._callback=t}function u(){this.PE.wake()}function p(){this.PE.sleep()}function l(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else s.call(this)<this._absRestTolerance&&(n.call(this,this.endState),r.call(this,[0,0,0]),p.call(this))}function f(t){var i=o.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),t.period<150&&(t.period=150,console.warn("The period of a SpringTransition is capped at 150 ms. Use a SnapTransition for faster transitions")),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),r.call(this,t.velocity)}function d(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function m(t){this.endState.set(t),d.call(this)}var g=t("famous/physics/PhysicsEngine"),y=t("famous/physics/bodies/Particle"),_=t("famous/physics/forces/Spring"),v=t("famous/math/Vector");o.SUPPORTS_MULTIPLE=3,o.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},o.prototype.reset=function(t,i){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),n.call(this,t),m.call(this,t),i&&r.call(this,i),c.call(this,void 0)},o.prototype.getVelocity=function(){return h.call(this)},o.prototype.setVelocity=function(t){this.call(this,r(t))},o.prototype.isActive=function(){return!this.PE.isSleeping()},o.prototype.halt=function(){this.set(this.get())},o.prototype.get=function(){return l.call(this),a.call(this)},o.prototype.set=function(t,i,e){return i?(this._dimensions=t instanceof Array?t.length:0,u.call(this),f.call(this,i),m.call(this,t),void c.call(this,e)):(this.reset(t),void(e&&e()))},e.exports=o}),define("famous/physics/constraints/Wall",["require","exports","module","./Constraint","famous/math/Vector"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this.diff=new c,this.impulse=new c,h.call(this)}function s(t,i){return i.dot(t)}function n(t){var i=this.options.normal,e=this.options.distance;return t.dot(i)+e}function r(t,i,e){var s=t.position,n=t.velocity,r=t.mass,a=this.options.normal,h=this.options.onContact,c=this.options.restitution,u=this.impulse,p=this.options.drift,l=-this.options.slop,f=0;if(this._eventOutput){var d={particle:t,wall:this,overlap:i,normal:a};this._eventOutput.emit("preCollision",d),this._eventOutput.emit("collision",d)}switch(h){case o.ON_CONTACT.REFLECT:var m=l>i?-((1+c)*a.dot(n)+p/e*(i-l))/(r*e+f):-((1+c)*a.dot(n))/(r*e+f);u.set(a.mult(e*m)),t.applyImpulse(u),t.setPosition(s.add(a.mult(-i)))}this._eventOutput&&this._eventOutput.emit("postCollision",d)}function a(t,i){var e=this.options.onContact,s=t.position,n=this.options.normal;e===o.ON_CONTACT.REFLECT&&t.setPosition(s.add(n.mult(-i)))}var h=t("./Constraint"),c=t("famous/math/Vector");o.prototype=Object.create(h.prototype),o.prototype.constructor=o,o.ON_CONTACT={REFLECT:0,SILENT:1},o.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0,normal:[1,0,0],distance:0,onContact:o.ON_CONTACT.REFLECT},o.prototype.setOptions=function(t){void 0!==t.normal&&(t.normal instanceof c&&(this.options.normal=t.normal.clone()),t.normal instanceof Array&&(this.options.normal=new c(t.normal))),void 0!==t.restitution&&(this.options.restitution=t.restitution),void 0!==t.drift&&(this.options.drift=t.drift),void 0!==t.slop&&(this.options.slop=t.slop),void 0!==t.distance&&(this.options.distance=t.distance),void 0!==t.onContact&&(this.options.onContact=t.onContact)},o.prototype.applyConstraint=function(t,i,e){for(var o=this.options.normal,h=0;h<t.length;h++){var c=t[h],u=c.position,p=c.velocity,l=c.radius||0,f=n.call(this,u.add(o.mult(-l))),d=s.call(this,o,p);0>=f&&(0>d?r.call(this,c,f,e):a.call(this,c,f,e))}},e.exports=o}),define("famous/transitions/WallTransition",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Spring","famous/physics/constraints/Wall","famous/math/Vector"],function(t,i,e){function o(t){t=t||0,this.endState=new O(t),this.initState=new O,this.spring=new _({anchor:this.endState}),this.wall=new v,this._restTolerance=1e-10,this._dimensions=1,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new g,this.particle=new y,this.PE.addBody(this.particle),this.PE.attach([this.wall,this.spring],this.particle)}function s(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function n(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function r(){this.PE.wake()}function a(){this.PE.sleep()}function h(t){this.endState.set(t);var i=this.endState.sub(this.initState).norm();this.wall.setOptions({distance:this.endState.norm(),normal:0===i?this.particle.velocity.normalize(-1):this.endState.sub(this.initState).normalize(-1)}),n.call(this)}function c(t){this.particle.position.set(t)}function u(t){this.particle.velocity.set(t)}function p(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function l(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function f(t){this._callback=t}function d(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else{var i=s.call(this);i<this._absRestTolerance&&(a.call(this),c.call(this,this.endState),u.call(this,[0,0,0]))}}function m(t){var i=o.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),void 0===t.restitution&&(t.restitution=i.restitution),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),this.wall.setOptions({restitution:t.restitution}),u.call(this,t.velocity)}var g=t("famous/physics/PhysicsEngine"),y=t("famous/physics/bodies/Particle"),_=t("famous/physics/forces/Spring"),v=t("famous/physics/constraints/Wall"),O=t("famous/math/Vector");o.SUPPORTS_MULTIPLE=3,o.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0,resitution:.5},o.prototype.reset=function(t,i){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),c.call(this,t),i&&u.call(this,i),h.call(this,t),f.call(this,void 0)},o.prototype.getVelocity=function(){return l.call(this)},o.prototype.setVelocity=function(t){this.call(this,u(t))},o.prototype.isActive=function(){return!this.PE.isSleeping()},o.prototype.halt=function(){this.set(this.get())},o.prototype.get=function(){return d.call(this),p.call(this)},o.prototype.set=function(t,i,e){return i?(this._dimensions=t instanceof Array?t.length:0,r.call(this),m.call(this,i),h.call(this,t),void f.call(this,e)):(this.reset(t),void(e&&e()))},e.exports=o}),define("famous/utilities/KeyCodes",["require","exports","module"],function(t,i,e){var o={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};e.exports=o}),define("famous/utilities/Timer",["require","exports","module","famous/core/Engine"],function(t,i,e){function o(t){return u.on(p,t),t}function s(t,i){var e=l(),s=function(){var o=l();o-e>=i&&(t.apply(this,arguments),u.removeListener(p,s))};return o(s)}function n(t,i){var e=l(),s=function(){var o=l();o-e>=i&&(t.apply(this,arguments),e=l())};return o(s)}function r(t,i){if(void 0===i)return void 0;var e=function(){i--,0>=i&&(t.apply(this,arguments),h(e))};return o(e)}function a(t,i){i=i||1;var e=i,s=function(){i--,0>=i&&(t.apply(this,arguments),i=e)};return o(s)}function h(t){u.removeListener(p,t)}function c(t,i){var e,o,n,r,a;return function(){o=this,a=arguments,n=l();var h=function(){var c=l-n;i>c?e=s(h,i-c):(e=null,r=t.apply(o,a))};return e||(e=s(h,i)),r}}var u=t("famous/core/Engine"),p="prerender",l=window.performance?function(){return window.performance.now()}:function(){return Date.now()};e.exports={setTimeout:s,setInterval:n,debounce:c,after:r,every:a,clear:h}}),define("famous/views/ContextualView",["require","exports","module","famous/core/Entity","famous/core/Transform","famous/core/EventHandler","famous/core/OptionsManager"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new r(this.options),t&&this.setOptions(t),this._eventInput=new n,this._eventOutput=new n,n.setInputHandler(this,this._eventInput),n.setOutputHandler(this,this._eventOutput),this._id=s.register(this)}var s=t("famous/core/Entity"),n=(t("famous/core/Transform"),t("famous/core/EventHandler")),r=t("famous/core/OptionsManager");o.DEFAULT_OPTIONS={},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},o.prototype.getOptions=function(){return this._optionsManager.getOptions()},o.prototype.render=function(){return this._id},o.prototype.commit=function(){},e.exports=o}),define("famous/views/SequentialLayout",["require","exports","module","famous/core/OptionsManager","famous/core/Transform","famous/core/ViewSequence","famous/utilities/Utility"],function(t,i,e){function o(t){this._items=null,this._size=null,this._outputFunction=o.DEFAULT_OUTPUT_FUNCTION,this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this.optionsManager=new s(this.options),t&&this.setOptions(t)}var s=t("famous/core/OptionsManager"),n=t("famous/core/Transform"),r=t("famous/core/ViewSequence"),a=t("famous/utilities/Utility");o.DEFAULT_OPTIONS={direction:a.Direction.Y,defaultItemSize:[50,50]},o.DEFAULT_OUTPUT_FUNCTION=function(t,i){var e=this.options.direction===a.Direction.X?n.translate(i,0):n.translate(0,i);return{transform:e,target:t.render()}},o.prototype.getSize=function(){return this._size||this.render(),this._size},o.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new r(t)),this._items=t,this},o.prototype.setOptions=function(){return this.optionsManager.setOptions.apply(this.optionsManager,arguments),this},o.prototype.setOutputFunction=function(t){return this._outputFunction=t,this},o.prototype.render=function(){for(var t=0,i=0,e=this.options.direction===a.Direction.X?0:1,o=this.options.direction===a.Direction.X?1:0,s=this._items,n=[];s;){var r,h=s.get();h&&h.getSize&&(r=h.getSize()),r||(r=this.options.defaultItemSize),r[o]!==!0&&(i=Math.max(i,r[o]));var c=this._outputFunction.call(this,h,t,n.length);n.push(c),r[e]&&r[e]!==!0&&(t+=r[e]),s=s.getNext()}return i||(i=void 0),this._size||(this._size=[0,0]),this._size[e]=t,this._size[o]=i,{size:this.getSize(),target:n}},e.exports=o}),define("famous/views/Deck",["require","exports","module","famous/core/Transform","famous/core/OptionsManager","famous/transitions/Transitionable","famous/utilities/Utility","./SequentialLayout"],function(t,i,e){function o(){u.apply(this,arguments),this.state=new h(0),this._isOpen=!1,this.setOutputFunction(function(t,i,e){var o=s.call(this),n=this.options.direction===c.Direction.X?r.translate(o*i,0,.001*(o-1)*i):r.translate(0,o*i,.001*(o-1)*i),a=t.render();if(this.options.stackRotation){var h=this.options.stackRotation*e*(1-o);a={transform:r.rotateZ(h),origin:[.5,.5],target:a}}return{transform:n,size:t.getSize(),target:a}})}function s(t){return t?this._isOpen?1:0:this.state.get()}function n(t,i,e){this.state.halt(),this.state.set(t,i,e)}var r=t("famous/core/Transform"),a=t("famous/core/OptionsManager"),h=t("famous/transitions/Transitionable"),c=t("famous/utilities/Utility"),u=t("./SequentialLayout");o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS=a.patch(u.DEFAULT_OPTIONS,{transition:{curve:"easeOutBounce",duration:500},stackRotation:0}),o.prototype.getSize=function(){var t=u.prototype.getSize.apply(this,arguments),i=this._items?this._items.get().getSize():[0,0];i||(i=[0,0]);var e=s.call(this),o=1-e;return[i[0]*o+t[0]*e,i[1]*o+t[1]*e]},o.prototype.isOpen=function(){return this._isOpen},o.prototype.open=function(t){this._isOpen=!0,n.call(this,1,this.options.transition,t)},o.prototype.close=function(t){this._isOpen=!1,n.call(this,0,this.options.transition,t)},o.prototype.toggle=function(t){this._isOpen?this.close(t):this.open(t)},e.exports=o}),define("famous/views/RenderController",["require","exports","module","famous/core/Modifier","famous/core/RenderNode","famous/core/Transform","famous/transitions/Transitionable","famous/core/View"],function(t,i,e){function o(){c.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=o.DefaultMap.transform,this.inOpacityMap=o.DefaultMap.opacity,this.inOriginMap=o.DefaultMap.origin,this.outTransformMap=o.DefaultMap.transform,this.outOpacityMap=o.DefaultMap.opacity,this.outOriginMap=o.DefaultMap.origin,this._output=[]}function s(t,i){return t(i.get())}var n=t("famous/core/Modifier"),r=t("famous/core/RenderNode"),a=t("famous/core/Transform"),h=t("famous/transitions/Transitionable"),c=t("famous/core/View");o.prototype=Object.create(c.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},o.DefaultMap={transform:function(){return a.identity},opacity:function(t){return t},origin:null},o.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},o.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},o.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},o.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw Error("inTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},o.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw Error("inOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},o.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw Error("inOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},o.prototype.show=function(t,i,e){if(!t)return this.hide(e);if(i instanceof Function&&(e=i,i=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,e),this._nextRenderable=null})));this.hide()}var o=null,a=this._renderables.indexOf(t);if(a>=0){this._showing=a,o=this._states[a],o.halt();var c=this._outgoingRenderables.indexOf(t);c>=0&&this._outgoingRenderables.splice(c,1)}else{o=new h(0);var u=new n({transform:this.inTransformMap?s.bind(this,this.inTransformMap,o):null,opacity:this.inOpacityMap?s.bind(this,this.inOpacityMap,o):null,origin:this.inOriginMap?s.bind(this,this.inOriginMap,o):null}),p=new r;p.add(u).add(t),this._showing=this._nodes.length,this._nodes.push(p),this._modifiers.push(u),this._states.push(o),this._renderables.push(t)}i||(i=this.options.inTransition),o.set(1,i,e)},o.prototype.hide=function(t,i){if(!(this._showing<0)){var e=this._showing;this._showing=-1,t instanceof Function&&(i=t,t=void 0);var o=this._nodes[e],n=this._modifiers[e],r=this._states[e],a=this._renderables[e];n.transformFrom(this.outTransformMap?s.bind(this,this.outTransformMap,r):null),n.opacityFrom(this.outOpacityMap?s.bind(this,this.outOpacityMap,r):null),n.originFrom(this.outOriginMap?s.bind(this,this.outOriginMap,r):null),this._outgoingRenderables.indexOf(a)<0&&this._outgoingRenderables.push(a),t||(t=this.options.outTransition),r.halt(),r.set(0,t,function(t,e,o,s){if(this._outgoingRenderables.indexOf(s)>=0){var n=this._nodes.indexOf(t);this._nodes.splice(n,1),this._modifiers.splice(n,1),this._states.splice(n,1),this._renderables.splice(n,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(s),1),this._showing>=n&&this._showing--}i&&i.call(this)}.bind(this,o,n,r,a))}},o.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var i=0;i<this._nodes.length;i++)t[i]=this._nodes[i].render();return t},e.exports=o}),define("famous/views/EdgeSwapper",["require","exports","module","famous/transitions/CachedMap","famous/core/Entity","famous/core/EventHandler","famous/core/Transform","./RenderController"],function(t,i,e){function o(t){this._currentTarget=null,this._size=[void 0,void 0],this._controller=new c(t),this._controller.inTransformFrom(n.create(s.bind(this,1e-4))),this._controller.outTransformFrom(n.create(s.bind(this,-1e-4))),this._eventInput=new a,a.setInputHandler(this,this._eventInput),this._entityId=r.register(this),t&&this.setOptions(t)}function s(t,i){return h.translate(this._size[0]*(1-i),0,t*(1-i))}var n=t("famous/transitions/CachedMap"),r=t("famous/core/Entity"),a=t("famous/core/EventHandler"),h=t("famous/core/Transform"),c=t("./RenderController");o.prototype.show=function(t){this._currentTarget&&this._eventInput.unpipe(this._currentTarget),this._currentTarget=t,this._currentTarget&&this._currentTarget.trigger&&this._eventInput.pipe(this._currentTarget),this._controller.show.apply(this._controller,arguments)},o.prototype.setOptions=function(t){this._controller.setOptions(t)},o.prototype.render=function(){return this._entityId},o.prototype.commit=function(t){return this._size[0]=t.size[0],this._size[1]=t.size[1],{transform:t.transform,opacity:t.opacity,origin:t.origin,size:t.size,target:this._controller.render()}},e.exports=o}),define("famous/views/FlexibleLayout",["require","exports","module","famous/core/Entity","famous/core/Transform","famous/core/OptionsManager","famous/core/EventHandler","famous/transitions/Transitionable"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this.optionsManager=new a(this.options),t&&this.setOptions(t),this.id=n.register(this),this._ratios=new c(this.options.ratios),this._nodes=[],this._cachedDirection=null,this._cachedTotalLength=!1,this._cachedLengths=[],this._cachedTransforms=null,this._eventOutput=new h,h.setOutputHandler(this,this._eventOutput)}function s(t,i,e){var s,n,a,h,c=0,u=i,p=0;for(this._cachedLengths=[],this._cachedTransforms=[],h=0;h<t.length;h++)n=t[h],a=this._nodes[h],"number"!=typeof n?u-=a.getSize()[e]||0:p+=n;for(h=0;h<t.length;h++)a=this._nodes[h],n=t[h],i="number"==typeof n?u*n/p:a.getSize()[e],s=e===o.DIRECTION_X?r.translate(c,0,0):r.translate(0,c,0),this._cachedTransforms.push(s),this._cachedLengths.push(i),c+=i
}var n=t("famous/core/Entity"),r=t("famous/core/Transform"),a=t("famous/core/OptionsManager"),h=t("famous/core/EventHandler"),c=t("famous/transitions/Transitionable");o.DIRECTION_X=0,o.DIRECTION_Y=1,o.DEFAULT_OPTIONS={direction:o.DIRECTION_X,transition:!1,ratios:[]},o.prototype.render=function(){return this.id},o.prototype.setOptions=function(t){this.optionsManager.setOptions(t)},o.prototype.sequenceFrom=function(t){if(this._nodes=t,0===this._ratios.get().length){for(var i=[],e=0;e<this._nodes.length;e++)i.push(1);this.setRatios(i)}},o.prototype.setRatios=function(t,i,e){void 0===i&&(i=this.options.transition);var o=this._ratios;0===o.get().length&&(i=void 0),o.isActive()&&o.halt(),o.set(t,i,e)},o.prototype.commit=function(t){var i,e=t.size,o=t.transform,n=t.origin,a=this._ratios.get(),h=this.options.direction,c=e[h];(c!==this._cachedTotalLength||this._ratios.isActive()||h!==this._cachedDirection)&&(s.call(this,a,c,h),c!==this._cachedTotalLength&&(this._cachedTotalLength=c),h!==this._cachedDirection&&(this._cachedDirection=h));for(var u=[],p=0;p<a.length;p++)i=[void 0,void 0],c=this._cachedLengths[p],i[h]=c,u.push({transform:this._cachedTransforms[p],size:i,target:this._nodes[p].render()});return e&&0!==n[0]&&0!==n[1]&&(o=r.moveThen([-e[0]*n[0],-e[1]*n[1],0],o)),{transform:o,size:e,target:u}},e.exports=o}),define("famous/views/Flipper",["require","exports","module","famous/core/Transform","famous/transitions/Transitionable","famous/core/RenderNode","famous/core/OptionsManager"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new r(this.options),t&&this.setOptions(t),this.angle=new n(0),this.frontNode=void 0,this.backNode=void 0,this.flipped=!1}var s=t("famous/core/Transform"),n=t("famous/transitions/Transitionable"),r=(t("famous/core/RenderNode"),t("famous/core/OptionsManager"));o.DIRECTION_X=0,o.DIRECTION_Y=1;var a=1;o.DEFAULT_OPTIONS={transition:!0,direction:o.DIRECTION_X},o.prototype.flip=function(t,i){var e=this.flipped?0:Math.PI;this.setAngle(e,t,i),this.flipped=!this.flipped},o.prototype.setAngle=function(t,i,e){void 0===i&&(i=this.options.transition),this.angle.isActive()&&this.angle.halt(),this.angle.set(t,i,e)},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},o.prototype.setFront=function(t){this.frontNode=t},o.prototype.setBack=function(t){this.backNode=t},o.prototype.render=function(){var t,i,e=this.angle.get();this.options.direction===o.DIRECTION_X?(t=s.rotateY(e),i=s.rotateY(e+Math.PI)):(t=s.rotateX(e),i=s.rotateX(e+Math.PI));var n=[];return this.frontNode&&n.push({transform:t,target:this.frontNode.render()}),this.backNode&&n.push({transform:s.moveThen([0,0,a],i),target:this.backNode.render()}),n},e.exports=o}),define("famous/views/GridLayout",["require","exports","module","famous/core/Entity","famous/core/RenderNode","famous/core/Transform","famous/core/ViewSequence","famous/core/EventHandler","famous/core/Modifier","famous/core/OptionsManager","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this.optionsManager=new l(this.options),t&&this.setOptions(t),this.id=a.register(this),this._modifiers=[],this._states=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0,this._eventOutput=new u,u.setOutputHandler(this,this._eventOutput)}function s(t,i,e){var o=[t[0],t[1]];o[0]-=this.options.gutterSize[0]*(i-1),o[1]-=this.options.gutterSize[1]*(e-1);for(var s,a=Math.round(o[1]/e),h=Math.round(o[0]/i),c=0,u=0,p=0;e>p;p++){s=0;for(var l=0;i>l;l++)void 0===this._modifiers[u]?n.call(this,u,[h,a],[s,c,0],1):r.call(this,u,[h,a],[s,c,0],1),u++,s+=h+this.options.gutterSize[0];c+=a+this.options.gutterSize[1]}for(this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[t[0],t[1]],this._activeCount=e*i,p=this._activeCount;p<this._modifiers.length;p++)r.call(this,p,[Math.round(h),Math.round(a)],[0,0],0);this._eventOutput.emit("reflow")}function n(t,i,e,o){var s={transform:new d(h.translate.apply(null,e)),opacity:new f(o),size:new f(i)},n=new p({transform:s.transform,opacity:s.opacity,size:s.size});this._states[t]=s,this._modifiers[t]=n}function r(t,i,e,o){var s=this._states[t],n=s.size,r=s.opacity,a=s.transform,h=this.options.transition;a.halt(),r.halt(),n.halt(),a.setTranslate(e,h),n.set(i,h),r.set(o,h)}var a=t("famous/core/Entity"),h=(t("famous/core/RenderNode"),t("famous/core/Transform")),c=t("famous/core/ViewSequence"),u=t("famous/core/EventHandler"),p=t("famous/core/Modifier"),l=t("famous/core/OptionsManager"),f=t("famous/transitions/Transitionable"),d=t("famous/transitions/TransitionableTransform");o.DEFAULT_OPTIONS={dimensions:[1,1],transition:!1,gutterSize:[0,0]},o.prototype.render=function(){return this.id},o.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},o.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new c(t)),this.sequence=t},o.prototype.commit=function(t){var i=t.transform,e=t.opacity,o=t.origin,n=t.size,r=this.options.dimensions[0],a=this.options.dimensions[1];(n[0]!==this._contextSizeCache[0]||n[1]!==this._contextSizeCache[1]||r!==this._dimensionsCache[0]||a!==this._dimensionsCache[1])&&s.call(this,n,r,a);for(var c=this.sequence,u=[],p=0;c&&p<this._modifiers.length;){var l=c.get(),f=this._modifiers[p];p>=this._activeCount&&this._states[p].opacity.isActive()&&(this._modifiers.splice(p,1),this._states.splice(p,1)),l&&(u[p]=f.modify({origin:o,target:l.render()})),c=c.getNext(),p++}return n&&(i=h.moveThen([-n[0]*o[0],-n[1]*o[1],0],i)),{transform:i,opacity:e,size:n,target:u}},e.exports=o}),define("famous/views/HeaderFooterLayout",["require","exports","module","famous/core/Entity","famous/core/RenderNode","famous/core/Transform","famous/core/OptionsManager"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new u(this.options),t&&this.setOptions(t),this._entityId=a.register(this),this.header=new h,this.footer=new h,this.content=new h}function s(t,i){var e=t.getSize();return e?e[this.options.direction]:i}function n(t){return this.options.direction===o.DIRECTION_X?c.translate(t,0,0):c.translate(0,t,0)}function r(t,i){return this.options.direction===o.DIRECTION_X?[t,i[1]]:[i[0],t]}var a=t("famous/core/Entity"),h=t("famous/core/RenderNode"),c=t("famous/core/Transform"),u=t("famous/core/OptionsManager");o.DIRECTION_X=0,o.DIRECTION_Y=1,o.DEFAULT_OPTIONS={direction:o.DIRECTION_Y,headerSize:void 0,footerSize:void 0,defaultHeaderSize:0,defaultFooterSize:0},o.prototype.render=function(){return this._entityId},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},o.prototype.commit=function(t){var i=t.transform,e=t.origin,o=t.size,a=t.opacity,h=void 0!==this.options.headerSize?this.options.headerSize:s.call(this,this.header,this.options.defaultHeaderSize),u=void 0!==this.options.footerSize?this.options.footerSize:s.call(this,this.footer,this.options.defaultFooterSize),p=o[this.options.direction]-h-u;o&&(i=c.moveThen([-o[0]*e[0],-o[1]*e[1],0],i));var l=[{size:r.call(this,h,o),target:this.header.render()},{transform:n.call(this,h),size:r.call(this,p,o),target:this.content.render()},{transform:n.call(this,h+p),size:r.call(this,u,o),target:this.footer.render()}];return{transform:i,opacity:a,size:o,target:l}},e.exports=o}),define("famous/views/Lightbox",["require","exports","module","famous/core/Transform","famous/core/Modifier","famous/core/RenderNode","famous/utilities/Utility","famous/core/OptionsManager","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._showing=!1,this.nodes=[],this.transforms=[],this.states=[]}var s=t("famous/core/Transform"),n=t("famous/core/Modifier"),r=t("famous/core/RenderNode"),a=t("famous/utilities/Utility"),h=t("famous/core/OptionsManager"),c=t("famous/transitions/Transitionable"),u=t("famous/transitions/TransitionableTransform");o.DEFAULT_OPTIONS={inTransform:s.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],outTransform:s.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],showTransform:s.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},o.prototype.show=function(t,i,e){if(!t)return this.hide(e);if(i instanceof Function&&(e=i,i=void 0),this._showing){if(!this.options.overlap)return this.hide(this.show.bind(this,t,i,e));this.hide()}this._showing=!0;var o={transform:new u(this.options.inTransform),origin:new c(this.options.inOrigin),opacity:new c(this.options.inOpacity)},s=new n({transform:o.transform,opacity:o.opacity,origin:o.origin}),h=new r;h.add(s).add(t),this.nodes.push(h),this.states.push(o),this.transforms.push(s);var p=e?a.after(3,e):void 0;i||(i=this.options.inTransition),o.transform.set(this.options.showTransform,i,p),o.opacity.set(this.options.showOpacity,i,p),o.origin.set(this.options.showOrigin,i,p)},o.prototype.hide=function(t,i){if(this._showing){this._showing=!1,t instanceof Function&&(i=t,t=void 0);var e=this.nodes[this.nodes.length-1],o=this.transforms[this.transforms.length-1],s=this.states[this.states.length-1],n=a.after(3,function(){this.nodes.splice(this.nodes.indexOf(e),1),this.states.splice(this.states.indexOf(s),1),this.transforms.splice(this.transforms.indexOf(o),1),i&&i.call(this)}.bind(this));t||(t=this.options.outTransition),s.transform.set(this.options.outTransform,t,n),s.opacity.set(this.options.outOpacity,t,n),s.origin.set(this.options.outOrigin,t,n)}},o.prototype.render=function(){for(var t=[],i=0;i<this.nodes.length;i++)t.push(this.nodes[i].render());return t},e.exports=o}),define("famous/physics/forces/Drag",["require","exports","module","./Force"],function(t,i,e){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),s.call(this)}var s=t("./Force");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},o.DEFAULT_OPTIONS={strength:.01,forceFunction:o.FORCE_FUNCTIONS.LINEAR},o.prototype.applyForce=function(t){for(var i=this.options.strength,e=this.options.forceFunction,o=this.force,s=0;s<t.length;s++){var n=t[s];e(n.velocity).mult(-i).put(o),n.applyForce(o)}},o.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},e.exports=o}),define("famous/views/Scroller",["require","exports","module","famous/core/Entity","famous/core/Group","famous/core/OptionsManager","famous/core/Transform","famous/utilities/Utility","famous/core/ViewSequence","famous/core/EventHandler"],function(t,i,e){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new p(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new u,this.group.add({render:h.bind(this)}),this._entityId=c.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new m,this._eventOutput=new m,m.setInputHandler(this,this._eventInput),m.setOutputHandler(this,this._eventOutput)}function s(t){t||(t=this._contextSize);var i=this.options.direction===f.Direction.X?0:1;return void 0===t[i]?this._contextSize[i]:t[i]}function n(t,i,e){var o=t.getSize?t.getSize():this._contextSize,n=this._outputFunction(i);return e.push({transform:n,target:t.render()}),s.call(this,o)}function r(){return this.options.clipSize?this.options.clipSize:s.call(this,this._contextSize)}function a(){for(var t=s.call(this,this._node.getSize()),i=this._node&&this._node.getNext?this._node.getNext():null;i&&this._position+this._positionOffset>=t;)this._positionOffset-=t,this._node=i,t=s.call(this,this._node.getSize()),i=this._node&&this._node.getNext?this._node.getNext():null;for(var e=this._node&&this._node.getPrevious?this._node.getPrevious():null;e&&this._position+this._positionOffset<0;){var o=s.call(this,e.getSize());this._positionOffset+=o,this._node=e,e=this._node&&this._node.getPrevious?this._node.getPrevious():null}}function h(){var t=null,i=this._position,e=[];this._onEdge=0;for(var o=-this._positionOffset,h=r.call(this),c=this._node;c&&o-i<h+this.options.margin;)o+=n.call(this,c,o,e),c=c.getNext?c.getNext():null;var u=this._node,p=s.call(this,u.getSize());if(h>o){for(;u&&h>p;)u=u.getPrevious(),u&&(p+=s.call(this,u.getSize()));for(u=this._node;u&&h>p;)u=u.getNext(),u&&(p+=s.call(this,u.getSize()))}var l=void 0!==p&&h>p?p:h;for(!c&&l>=o-i?(this._onEdge=1,this._eventOutput.emit("edgeHit",{position:o-l})):!this._node.getPrevious()&&0>=i&&(this._onEdge=-1,this._eventOutput.emit("edgeHit",{position:0})),c=this._node&&this._node.getPrevious?this._node.getPrevious():null,o=-this._positionOffset,c&&(t=c.getSize?c.getSize():this._contextSize,o-=s.call(this,t));c&&o-i>-(r.call(this)+this.options.margin);)n.call(this,c,o,e),c=c.getPrevious?c.getPrevious():null,c&&(t=c.getSize?c.getSize():this._contextSize,o-=s.call(this,t));return a.call(this),e}var c=t("famous/core/Entity"),u=t("famous/core/Group"),p=t("famous/core/OptionsManager"),l=t("famous/core/Transform"),f=t("famous/utilities/Utility"),d=t("famous/core/ViewSequence"),m=t("famous/core/EventHandler");o.DEFAULT_OPTIONS={direction:f.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1},o.prototype.setOptions=function(t){this._optionsManager.setOptions(t),this.options.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)},o.prototype.onEdge=function(){return this._onEdge},o.prototype.outputFrom=function(t,i){t||(t=function(t){return this.options.direction===f.Direction.X?l.translate(t,0):l.translate(0,t)}.bind(this),i||(i=t)),this._outputFunction=t,this._masterOutputFunction=i?i:function(i){return l.inverse(t(-i))}},o.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},o.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new d({array:t})),this._node=t,this._positionOffset=0},o.prototype.getSize=function(t){return t?this._contextSize:this._size},o.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},o.prototype.commit=function(t){var i=t.transform,e=t.opacity,o=t.origin,s=t.size;this.options.clipSize||s[0]===this._contextSize[0]&&s[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=s[0],this._contextSize[1]=s[1],this.options.direction===f.Direction.X?(this._size[0]=r.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=r.call(this)));var n=this._masterOutputFunction(-this._position);return{transform:l.multiply(i,n),size:s,opacity:e,origin:o,target:this.group.render()}},e.exports=o}),define("famous/views/Scrollview",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Drag","famous/physics/forces/Spring","famous/core/EventHandler","famous/core/OptionsManager","famous/core/ViewSequence","famous/views/Scroller","famous/utilities/Utility","famous/inputs/GenericSync","famous/inputs/ScrollSync","famous/inputs/TouchSync"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new S(this.options),this._node=null,this._physicsEngine=new g,this._particle=new y,this._physicsEngine.addBody(this._particle),this.spring=new v({anchor:[0,0,0]}),this.drag=new _({forceFunction:_.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new _({forceFunction:_.FORCE_FUNCTIONS.LINEAR}),this.sync=new x(["scroll","touch"],{direction:this.options.direction}),this._eventInput=new O,this._eventOutput=new O,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),O.setInputHandler(this,this._eventInput),O.setOutputHandler(this,this._eventOutput),this._touchCount=0,this._springState=0,this._onEdge=0,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=void 0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._scroller=new T,this._scroller.positionFrom(this.getPosition.bind(this)),this.setOptions(t),a.call(this)}function s(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),c.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function n(t){var i=-t.velocity,e=-t.delta;this._onEdge&&t.slip&&(0>i&&this._onEdge<0||i>0&&this._onEdge>0?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(i)>Math.abs(this.getVelocity())&&s.call(this,t)),this._earlyEnd||(this._touchVelocity=i,t.slip?this.setVelocity(i):this.setPosition(this.getPosition()+e))}function r(t){if(this._touchCount=t.count||0,!this._touchCount){c.call(this),this._onEdge&&f.call(this,this._edgeSpringPosition,C.EDGE),h.call(this);var i=-t.velocity,e=this.options.speedLimit;t.slip&&(e*=this.options.edgeGrip),-e>i?i=-e:i>e&&(i=e),this.setVelocity(i),this._touchVelocity=void 0,this._needsPaginationCheck=!0}}function a(){this._eventInput.bindThis(this),this._eventInput.on("start",s),this._eventInput.on("update",n),this._eventInput.on("end",r),this._scroller.on("edgeHit",function(t){this._edgeSpringPosition=t.position}.bind(this))}function h(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function c(){this._springState=C.NONE,this._physicsEngine.detachAll()}function u(t){var i=this.options.direction,e=(t.getSize()||this._scroller.getSize())[i];return e||(e=this._scroller.getSize()[i]),e}function p(t){!this._onEdge&&t?(this.sync.setOptions({scale:this.options.edgeGrip}),this._touchCount||this._springState===C.EDGE||f.call(this,this._edgeSpringPosition,C.EDGE)):this._onEdge&&!t&&(this.sync.setOptions({scale:1}),this._springState&&Math.abs(this.getVelocity())<.001&&(c.call(this),h.call(this))),this._onEdge=t}function l(){if(this._needsPaginationCheck&&!this._touchCount&&this._springState!==C.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var i=this.getPosition(),e=Math.abs(t)>this.options.pageSwitchSpeed,o=u.call(this,this._node),s=i>.5*o,n=t>0;s&&!e||e&&n?this.goToNextPage():f.call(this,0,C.PAGE),this._needsPaginationCheck=!1}}}function f(t,i){var e;i===C.EDGE?(this._edgeSpringPosition=t,e={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):i===C.PAGE&&(this._pageSpringPosition=t,e={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(e),i&&!this._springState&&(c.call(this),this._springState=i,h.call(this)),this._springState=i}function d(){for(var t=this.getPosition(),i=u.call(this,this._node),e=this._node.getNext();t>i+M&&e;)m.call(this,-i),t-=i,this._scroller.sequenceFrom(e),this._node=e,e=this._node.getNext(),i=u.call(this,this._node);for(var o,s=this._node.getPrevious();-M>t&&s;)o=u.call(this,s),this._scroller.sequenceFrom(s),this._node=s,m.call(this,o),t+=o,s=this._node.getPrevious()}function m(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._springState===C.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===C.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var g=t("famous/physics/PhysicsEngine"),y=t("famous/physics/bodies/Particle"),_=t("famous/physics/forces/Drag"),v=t("famous/physics/forces/Spring"),O=t("famous/core/EventHandler"),S=t("famous/core/OptionsManager"),w=t("famous/core/ViewSequence"),T=t("famous/views/Scroller"),b=t("famous/utilities/Utility"),x=t("famous/inputs/GenericSync"),E=t("famous/inputs/ScrollSync"),I=t("famous/inputs/TouchSync");x.register({scroll:E,touch:I});var M=.5;o.DEFAULT_OPTIONS={direction:b.Direction.Y,rails:!0,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:10,groupScroll:!1};var C={NONE:0,EDGE:1,PAGE:2};o.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},o.prototype.getPosition=function(){return this._particle.getPosition1D()},o.prototype.setPosition=function(t){this._particle.setPosition1D(t)},o.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},o.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},o.prototype.setOptions=function(t){t&&(void 0!==t.direction&&("x"===t.direction?t.direction=b.Direction.X:"y"===t.direction&&(t.direction=b.Direction.Y)),this._scroller.setOptions(t),this._optionsManager.setOptions(t)),this.drag.setOptions({strength:this.options.drag}),this.friction.setOptions({strength:this.options.friction}),this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===b.Direction.X?x.DIRECTION_X:x.DIRECTION_Y})},o.prototype.goToPreviousPage=function(){if(!this._node)return null;var t=this._node.getPrevious();if(t){var i=this.getPosition(),e=u.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var o=M>i?-e:0;f.call(this,o,C.PAGE),m.call(this,e)}return this._eventOutput.emit("pageChange",{direction:-1}),t},o.prototype.goToNextPage=function(){if(!this._node)return null;var t=this._node.getNext();if(t){var i=this.getPosition(),e=u.call(this,this._node),o=u.call(this,t);this._scroller.sequenceFrom(t),this._node=t;var s=i>e-M?e+o:e;f.call(this,s,C.PAGE),m.call(this,-e)}return this._eventOutput.emit("pageChange",{direction:1}),t},o.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new w({array:t})),this._node=t,this._scroller.sequenceFrom(t)},o.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},o.prototype.render=function(){return this._node?(d.call(this),p.call(this,this._scroller.onEdge()),this.options.paginated&&l.call(this),this._scroller.render()):null},e.exports=o}),define("famous/views/ScrollContainer",["require","exports","module","famous/surfaces/ContainerSurface","famous/core/EventHandler","./Scrollview","famous/utilities/Utility","famous/core/OptionsManager"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this.container=new s(this.options.container),this.scrollview=new r(this.options.scrollview),this.container.add(this.scrollview),n.setInputHandler(this,this.scrollview),n.setOutputHandler(this,this.scrollview),this.scrollview.subscribe(this.container)}var s=t("famous/surfaces/ContainerSurface"),n=t("famous/core/EventHandler"),r=t("./Scrollview"),a=t("famous/utilities/Utility"),h=t("famous/core/OptionsManager");o.DEFAULT_OPTIONS={container:{properties:{overflow:"hidden"}},scrollview:{direction:a.Direction.X}},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},o.prototype.sequenceFrom=function(){return this.scrollview.sequenceFrom.apply(this.scrollview,arguments)},o.prototype.render=function(){return this.container.render.apply(this.container,arguments)},e.exports=o}),define("famous/widgets/NavigationBar",["require","exports","module","famous/core/Scene","famous/core/Surface","famous/core/Transform","famous/core/View"],function(t,i,e){function o(){a.apply(this,arguments),this.title=new n({classes:this.options.classes,content:this.options.content}),this.back=new n({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.backContent}),this.back.on("click",function(){this._eventOutput.emit("back",{})}.bind(this)),this.more=new n({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.moreContent}),this.more.on("click",function(){this._eventOutput.emit("more",{})}.bind(this)),this.layout=new s({id:"master",size:this.options.size,target:[{transform:r.inFront,origin:[0,.5],target:this.back},{origin:[.5,.5],target:this.title},{transform:r.inFront,origin:[1,.5],target:this.more}]}),this._add(this.layout),this._optionsManager.on("change",function(t){var i=t.id,e=t.value;"size"===i?(this.layout.id.master.setSize(e),this.title.setSize(e),this.back.setSize([e[1],e[1]]),this.more.setSize([e[1],e[1]])):"backClasses"===i?this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}):"backContent"===i?this.back.setContent(this.options.backContent):"classes"===i?(this.title.setOptions({classes:this.options.classes}),this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}),this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)})):"content"===i?this.setContent(this.options.content):"moreClasses"===i?this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)}):"moreContent"===i&&this.more.setContent(this.options.content)}.bind(this))}var s=t("famous/core/Scene"),n=t("famous/core/Surface"),r=t("famous/core/Transform"),a=t("famous/core/View");o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={size:[void 0,50],backClasses:["back"],backContent:"&#x25c0;",classes:["navigation"],content:"",moreClasses:["more"],moreContent:"&#x271a;"},o.prototype.setContent=function(t){return this.title.setContent(t)},e.exports=o}),define("famous/widgets/Slider",["require","exports","module","famous/core/Surface","famous/surfaces/CanvasSurface","famous/core/Transform","famous/core/EventHandler","famous/math/Utilities","famous/core/OptionsManager","famous/inputs/MouseSync","famous/inputs/TouchSync","famous/inputs/GenericSync"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this.optionsManager=new u(this.options),t&&this.setOptions(t),this.indicator=new r({size:this.options.indicatorSize,classes:["slider-back"]}),this.label=new n({size:this.options.labelSize,content:this.options.label,properties:{pointerEvents:"none"},classes:["slider-label"]}),this.eventOutput=new h,this.eventInput=new h,h.setInputHandler(this,this.eventInput),h.setOutputHandler(this,this.eventOutput);var i=(this.options.range[1]-this.options.range[0])/this.options.indicatorSize[0];this.sync=new f(["mouse","touch"],{scale:i,direction:f.DIRECTION_X}),this.indicator.pipe(this.sync),this.sync.pipe(this),this.eventInput.on("update",function(t){this.set(t.position)}.bind(this)),this._drawPos=0,s.call(this)}function s(){this.label.setContent(this.options.label+'<span style="float: right">'+this.get().toFixed(this.options.precision)+"</span>")}var n=t("famous/core/Surface"),r=t("famous/surfaces/CanvasSurface"),a=t("famous/core/Transform"),h=t("famous/core/EventHandler"),c=t("famous/math/Utilities"),u=t("famous/core/OptionsManager"),p=t("famous/inputs/MouseSync"),l=t("famous/inputs/TouchSync"),f=t("famous/inputs/GenericSync");f.register({mouse:p,touch:l}),o.DEFAULT_OPTIONS={size:[200,60],indicatorSize:[200,30],labelSize:[200,30],range:[0,1],precision:2,value:0,label:"",fillColor:"rgba(170, 170, 170, 1)"},o.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},o.prototype.get=function(){return this.options.value},o.prototype.set=function(t){t!==this.options.value&&(this.options.value=c.clamp(t,this.options.range),s.call(this),this.eventOutput.emit("change",{value:t}))},o.prototype.getSize=function(){return this.options.size},o.prototype.render=function(){var t=this.options.range,i=Math.floor((this.get()-t[0])/(t[1]-t[0])*this.options.indicatorSize[0]);if(i<this._drawPos)this.indicator.getContext("2d").clearRect(i,0,this._drawPos-i+1,this.options.indicatorSize[1]);else if(i>this._drawPos){var e=this.indicator.getContext("2d");e.fillStyle=this.options.fillColor,e.fillRect(this._drawPos-1,0,i-this._drawPos+1,this.options.indicatorSize[1])}return this._drawPos=i,{size:this.options.size,target:[{origin:[0,0],target:this.indicator.render()},{transform:a.translate(0,0,1),origin:[0,0],target:this.label.render()}]}},e.exports=o}),define("famous/widgets/ToggleButton",["require","exports","module","famous/core/Surface","famous/core/EventHandler","famous/views/RenderController"],function(t,i,e){function o(t){this.options={content:"",offClasses:["off"],onClasses:["on"],size:void 0,outTransition:{curve:"easeInOut",duration:300},inTransition:{curve:"easeInOut",duration:300},toggleMode:o.TOGGLE,crossfade:!0},this._eventOutput=new n,n.setOutputHandler(this,this._eventOutput),this.offSurface=new s,this.offSurface.on("click",function(){this.options.toggleMode!==o.OFF&&this.select()}.bind(this)),this.offSurface.pipe(this._eventOutput),this.onSurface=new s,this.onSurface.on("click",function(){this.options.toggleMode!==o.ON&&this.deselect()}.bind(this)),this.onSurface.pipe(this._eventOutput),this.arbiter=new r({overlap:this.options.crossfade}),this.deselect(),t&&this.setOptions(t)}var s=t("famous/core/Surface"),n=t("famous/core/EventHandler"),r=t("famous/views/RenderController");o.OFF=0,o.ON=1,o.TOGGLE=2,o.prototype.select=function(){this.selected=!0,this.arbiter.show(this.onSurface,this.options.inTransition),this._eventOutput.emit("select")},o.prototype.deselect=function(){this.selected=!1,this.arbiter.show(this.offSurface,this.options.outTransition),this._eventOutput.emit("deselect")},o.prototype.isSelected=function(){return this.selected},o.prototype.setOptions=function(t){void 0!==t.content&&(this.options.content=t.content,this.offSurface.setContent(this.options.content),this.onSurface.setContent(this.options.content)),t.offClasses&&(this.options.offClasses=t.offClasses,this.offSurface.setClasses(this.options.offClasses)),t.onClasses&&(this.options.onClasses=t.onClasses,this.onSurface.setClasses(this.options.onClasses)),void 0!==t.size&&(this.options.size=t.size,this.onSurface.setSize(this.options.size),this.offSurface.setSize(this.options.size)),void 0!==t.toggleMode&&(this.options.toggleMode=t.toggleMode),void 0!==t.outTransition&&(this.options.outTransition=t.outTransition),void 0!==t.inTransition&&(this.options.inTransition=t.inTransition),void 0!==t.crossfade&&(this.options.crossfade=t.crossfade,this.arbiter.setOptions({overlap:this.options.crossfade}))},o.prototype.getSize=function(){return this.options.size},o.prototype.render=function(){return this.arbiter.render()},e.exports=o}),define("famous/widgets/TabBar",["require","exports","module","famous/utilities/Utility","famous/core/View","famous/views/GridLayout","./ToggleButton"],function(t,i,e){function o(){a.apply(this,arguments),this.layout=new h,this.buttons=[],this._buttonIds={},this._buttonCallbacks={},this.layout.sequenceFrom(this.buttons),this._add(this.layout),this._optionsManager.on("change",s.bind(this))}function s(t){var i=t.id,e=t.value;if("direction"===i)this.layout.setOptions({dimensions:n.call(this.buttons.length,this.options.direction)});else if("buttons"===i)for(var o in this.buttons)this.buttons[o].setOptions(e);else if("sections"===i)for(var s in this.options.sections)this.defineSection(s,this.options.sections[s])}function n(t,i){return i===r.Direction.X?[t,1]:[1,t]}var r=t("famous/utilities/Utility"),a=t("famous/core/View"),h=t("famous/views/GridLayout"),c=t("./ToggleButton");o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={sections:[],widget:c,size:[void 0,50],direction:r.Direction.X,buttons:{toggleMode:c.ON}},o.prototype.defineSection=function(t,i){var e,o=this._buttonIds[t];if(void 0===o){o=this.buttons.length,this._buttonIds[t]=o;var s=this.options.widget;e=new s,this.buttons[o]=e,this.layout.setOptions({dimensions:n(this.buttons.length,this.options.direction)})}else e=this.buttons[o],e.unbind("select",this._buttonCallbacks[t]);
this.options.buttons&&e.setOptions(this.options.buttons),e.setOptions(i),this._buttonCallbacks[t]=this.select.bind(this,t),e.on("select",this._buttonCallbacks[t])},o.prototype.select=function(t){var i=this._buttonIds[t];this.buttons[i]&&this.buttons[i].isSelected()?this._eventOutput.emit("select",{id:t}):this.buttons[i]&&this.buttons[i].select();for(var e=0;e<this.buttons.length;e++)e!==i&&this.buttons[e].deselect()},e.exports=o}),define("famous/physics/bodies/Body",["require","exports","module","./Particle","famous/core/Transform","famous/math/Vector","famous/math/Quaternion","famous/math/Matrix"],function(t,i,e){function o(t){s.call(this,t),t=t||{},this.orientation=new a,this.angularVelocity=new r,this.angularMomentum=new r,this.torque=new r,t.orientation&&this.orientation.set(t.orientation),t.angularVelocity&&this.angularVelocity.set(t.angularVelocity),t.angularMomentum&&this.angularMomentum.set(t.angularMomentum),t.torque&&this.torque.set(t.torque),this.setMomentsOfInertia(),this.angularVelocity.w=0,this.pWorld=new r}var s=t("./Particle"),n=t("famous/core/Transform"),r=t("famous/math/Vector"),a=t("famous/math/Quaternion"),h=t("famous/math/Matrix");o.DEFAULT_OPTIONS=s.DEFAULT_OPTIONS,o.DEFAULT_OPTIONS.orientation=[0,0,0,1],o.DEFAULT_OPTIONS.angularVelocity=[0,0,0],o.AXES=s.AXES,o.SLEEP_TOLERANCE=s.SLEEP_TOLERANCE,o.INTEGRATOR=s.INTEGRATOR,o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.isBody=!0,o.prototype.setMass=function(){s.prototype.setMass.apply(this,arguments),this.setMomentsOfInertia()},o.prototype.setMomentsOfInertia=function(){this.inertia=new h,this.inverseInertia=new h},o.prototype.updateAngularVelocity=function(){this.angularVelocity.set(this.inverseInertia.vectorMultiply(this.angularMomentum))},o.prototype.toWorldCoordinates=function(t){return this.pWorld.set(this.orientation.rotateVector(t))},o.prototype.getEnergy=function(){return s.prototype.getEnergy.call(this)+.5*this.inertia.vectorMultiply(this.angularVelocity).dot(this.angularVelocity)},o.prototype.reset=function(t,i,e,o){s.prototype.reset.call(this,t,i),this.angularVelocity.clear(),this.setOrientation(e||[1,0,0,0]),this.setAngularMomentum(o||[0,0,0])},o.prototype.setOrientation=function(t){this.orientation.set(t)},o.prototype.setAngularVelocity=function(t){this.wake(),this.angularVelocity.set(t)},o.prototype.setAngularMomentum=function(t){this.wake(),this.angularMomentum.set(t)},o.prototype.applyForce=function(t,i){s.prototype.applyForce.call(this,t),void 0!==i&&this.applyTorque(i.cross(t))},o.prototype.applyTorque=function(t){this.wake(),this.torque.set(this.torque.add(t))},o.prototype.getTransform=function(){return n.thenMove(this.orientation.getTransform(),n.getTranslate(s.prototype.getTransform.call(this)))},o.prototype._integrate=function(t){s.prototype._integrate.call(this,t),this.integrateAngularMomentum(t),this.updateAngularVelocity(t),this.integrateOrientation(t)},o.prototype.integrateAngularMomentum=function(t){o.INTEGRATOR.integrateAngularMomentum(this,t)},o.prototype.integrateOrientation=function(t){o.INTEGRATOR.integrateOrientation(this,t)},e.exports=o}),define("famous/physics/bodies/Circle",["require","exports","module","./Body","famous/math/Matrix"],function(t,i,e){function o(t){t=t||{},this.setRadius(t.radius||0),s.call(this,t)}var s=t("./Body"),n=t("famous/math/Matrix");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.setRadius=function(t){this.radius=t,this.size=[2*this.radius,2*this.radius],this.setMomentsOfInertia()},o.prototype.setMomentsOfInertia=function(){var t=this.mass,i=this.radius;this.inertia=new n([[.25*t*i*i,0,0],[0,.25*t*i*i,0],[0,0,.5*t*i*i]]),this.inverseInertia=new n([[4/(t*i*i),0,0],[0,4/(t*i*i),0],[0,0,2/(t*i*i)]])},e.exports=o}),define("famous/physics/bodies/Rectangle",["require","exports","module","./Body","famous/math/Matrix"],function(t,i,e){function o(t){t=t||{},this.size=t.size||[0,0],s.call(this,t)}var s=t("./Body"),n=t("famous/math/Matrix");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.setSize=function(t){this.size=t,this.setMomentsOfInertia()},o.prototype.setMomentsOfInertia=function(){var t=this.mass,i=this.size[0],e=this.size[1];this.inertia=new n([[t*e*e/12,0,0],[0,t*i*i/12,0],[0,0,t*(i*i+e*e)/12]]),this.inverseInertia=new n([[12/(t*e*e),0,0],[0,12/(t*i*i),0],[0,0,12/(t*(i*i+e*e))]])},e.exports=o}),define("famous/physics/constraints/Collision",["require","exports","module","./Constraint","famous/math/Vector"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this.normal=new n,this.pDiff=new n,this.vDiff=new n,this.impulse1=new n,this.impulse2=new n,s.call(this)}var s=t("./Constraint"),n=t("famous/math/Vector");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0},o.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},o.prototype.applyConstraint=function(t,i,e){if(void 0!==i)for(var o=i.velocity,s=i.position,n=i.inverseMass,r=i.radius,a=this.options,h=a.drift,c=-a.slop,u=a.restitution,p=this.normal,l=this.pDiff,f=this.vDiff,d=this.impulse1,m=this.impulse2,g=0;g<t.length;g++){var y=t[g];if(y!==i){var _=y.velocity,v=y.position,O=y.inverseMass,S=y.radius;l.set(v.sub(s)),f.set(_.sub(o));var w=l.norm(),T=w-(r+S),b=1/(n+O),x=0;if(0>T){if(p.set(l.normalize()),this._eventOutput){var E={target:y,source:i,overlap:T,normal:p};this._eventOutput.emit("preCollision",E),this._eventOutput.emit("collision",E)}var I=c>=T?((1+u)*p.dot(f)+h/e*(T-c))/(x+e/b):(1+u)*p.dot(f)/(x+e/b);p.mult(e*I).put(d),d.mult(-1).put(m),i.applyImpulse(d),y.applyImpulse(m),this._eventOutput&&this._eventOutput.emit("postCollision",E)}}}},e.exports=o}),define("famous/physics/constraints/Curve",["require","exports","module","./Constraint","famous/math/Vector"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this.J=new n,this.impulse=new n,s.call(this)}var s=t("./Constraint"),n=t("famous/math/Vector");o.prototype=Object.create(s.prototype),o.prototype.constructor=o;var r=1e-7,a=Math.PI;o.DEFAULT_OPTIONS={equation:function(){return 0},plane:function(t,i,e){return e},period:0,dampingRatio:0},o.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},o.prototype.applyConstraint=function(t,i,e){for(var o=this.options,s=this.impulse,n=this.J,h=o.equation,c=o.plane,u=o.dampingRatio,p=o.period,l=0;l<t.length;l++){var f,d,m=t[l],g=m.velocity,y=m.position,_=m.mass;if(0===p)f=0,d=1;else{var v=4*_*a*u/p,O=4*_*a*a/(p*p);f=1/(v+e*O),d=e*O/(v+e*O)}var S=y.x,w=y.y,T=y.z,b=h(S,w,T),x=(h(S+r,y,y)-b)/r,E=(h(S,w+r,y)-b)/r,I=(h(S,w,y+r)-b)/r,M=c(S,w,T),C=(c(S+r,w,T)-M)/r,z=(c(S,w+r,T)-M)/r,P=(c(S,w,T+r)-M)/r;n.setXYZ(x+C,E+z,I+P);var F=d/e*(b+M),N=-(n.dot(g)+F)/(f+e*n.normSquared()/_);s.set(n.mult(e*N)),m.applyImpulse(s)}},e.exports=o}),define("famous/physics/constraints/Distance",["require","exports","module","./Constraint","famous/math/Vector"],function(t,i,e){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.impulse=new n,this.normal=new n,this.diffP=new n,this.diffV=new n,s.call(this)}var s=t("./Constraint"),n=t("famous/math/Vector");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={anchor:null,length:0,minLength:0,period:0,dampingRatio:0};var r=Math.PI;o.prototype.setOptions=function(t){t.anchor&&(t.anchor.position instanceof n&&(this.options.anchor=t.anchor.position),t.anchor instanceof n&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new n(t.anchor))),void 0!==t.length&&(this.options.length=t.length),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.options.period=t.period),void 0!==t.minLength&&(this.options.minLength=t.minLength)},o.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new n),this.options.anchor.set(t)},o.prototype.applyConstraint=function(t,i,e){var o,s,n=this.normal,a=this.diffP,h=this.diffV,c=this.impulse,u=this.options,p=u.dampingRatio,l=u.period,f=u.minLength;if(i){var d=i.velocity;o=i.position,s=i.inverseMass}else o=this.options.anchor,s=0;for(var m=this.options.length,g=0;g<t.length;g++){var y=t[g],_=y.velocity,v=y.position,O=y.inverseMass;a.set(v.sub(o)),n.set(a.normalize());var S=a.norm()-m;if(Math.abs(S)<f)return;h.set(i?_.sub(d):_);var w,T,b=1/(O+s);if(0===l)w=0,T=1;else{var x=4*b*r*p/l,E=4*b*r*r/(l*l);w=1/(x+e*E),T=e*E/(x+e*E)}var I=T/e*S,M=-(n.dot(h)+I)/(w+e/b);c.set(n.mult(e*M)),y.applyImpulse(c),i&&i.applyImpulse(c.mult(-1))}},e.exports=o}),define("famous/physics/constraints/Surface",["require","exports","module","./Constraint","famous/math/Vector"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this.J=new n,this.impulse=new n,s.call(this)}var s=t("./Constraint"),n=t("famous/math/Vector");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={equation:void 0,period:0,dampingRatio:0};var r=1e-7,a=Math.PI;o.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},o.prototype.applyConstraint=function(t,i,e){for(var o=this.impulse,s=this.J,n=this.options,h=n.equation,c=n.dampingRatio,u=n.period,p=0;p<t.length;p++){var l,f,d=t[p],m=d.velocity,g=d.position,y=d.mass;if(0===u)l=0,f=1;else{var _=4*y*a*c/u,v=4*y*a*a/(u*u);l=1/(_+e*v),f=e*v/(_+e*v)}var O=g.x,S=g.y,w=g.z,T=h(O,S,w),b=(h(O+r,g,g)-T)/r,x=(h(O,S+r,g)-T)/r,E=(h(O,S,g+r)-T)/r;s.setXYZ(b,x,E);var I=f/e*T,M=-(s.dot(m)+I)/(l+e*s.normSquared()/y);o.set(s.mult(e*M)),d.applyImpulse(o)}},e.exports=o}),define("famous/physics/constraints/Walls",["require","exports","module","./Constraint","./Wall","famous/math/Vector"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),n.call(this,t.sides||this.options.sides),a.call(this)}function s(t,i,e){var s,n=o.SIDES;switch(parseInt(t)){case n.LEFT:s=i[0]*e[0];break;case n.TOP:s=i[1]*e[1];break;case n.FRONT:s=i[2]*e[2];break;case n.RIGHT:s=i[0]*(1-e[0]);break;case n.BOTTOM:s=i[1]*(1-e[1]);break;case n.BACK:s=i[2]*(1-e[2])}return s}function n(t){this.components={};for(var i=this.components,e=0;e<t.length;e++){var o=t[e];i[e]=new h({normal:u[o].clone(),distance:s(o,this.options.size,this.options.origin)})}}function r(t){this.forEach(function(i){i.setOptions(t)});for(var i in t)this.options[i]=t[i]}var a=t("./Constraint"),h=t("./Wall"),c=t("famous/math/Vector");o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.ON_CONTACT=h.ON_CONTACT,o.SIDES={LEFT:0,RIGHT:1,TOP:2,BOTTOM:3,FRONT:4,BACK:5,TWO_DIMENSIONAL:[0,1,2,3],THREE_DIMENSIONAL:[0,1,2,3,4,5]},o.DEFAULT_OPTIONS={sides:o.SIDES.TWO_DIMENSIONAL,size:[window.innerWidth,window.innerHeight,0],origin:[.5,.5,.5],drift:.5,slop:0,restitution:.5,onContact:o.ON_CONTACT.REFLECT};var u={0:new c(1,0,0),1:new c(-1,0,0),2:new c(0,1,0),3:new c(0,-1,0),4:new c(0,0,1),5:new c(0,0,-1)};o.prototype.setOptions=function(t){var i=!1;void 0!==t.restitution&&r.call(this,{restitution:t.restitution}),void 0!==t.drift&&r.call(this,{drift:t.drift}),void 0!==t.slop&&r.call(this,{slop:t.slop}),void 0!==t.onContact&&r.call(this,{onContact:t.onContact}),void 0!==t.size&&(i=!0),void 0!==t.sides&&(this.options.sides=t.sides),void 0!==t.origin&&(i=!0),i&&this.setSize(t.size,t.origin)},o.prototype.setSize=function(t,i){i=i||this.options.origin,i.length<3&&(i[2]=.5),this.forEach(function(e,o){var n=s(o,t,i);e.setOptions({distance:n})}),this.options.size=t,this.options.origin=i},o.prototype.applyConstraint=function(t,i,e){this.forEach(function(o){o.applyConstraint(t,i,e)})},o.prototype.forEach=function(t){for(var i in this.sides)t(this.sides[i],i)},o.prototype.rotateZ=function(t){this.forEach(function(i){var e=i.options.normal;e.rotateZ(t).put(e)})},o.prototype.rotateX=function(t){this.forEach(function(i){var e=i.options.normal;e.rotateX(t).put(e)})},o.prototype.rotateY=function(t){this.forEach(function(i){var e=i.options.normal;e.rotateY(t).put(e)})},e.exports=o}),define("famous/physics/forces/Repulsion",["require","exports","module","./Force","famous/math/Vector"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new n,s.call(this)}var s=t("./Force"),n=t("famous/math/Vector");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DECAY_FUNCTIONS={LINEAR:function(t,i){return Math.max(1-1/i*t,0)},MORSE:function(t,i){var e=0===i?100:i,o=t+e*(1-Math.log(2));return Math.max(1-Math.pow(1-Math.exp(o/e-1),2),0)},INVERSE:function(t,i){return 1/(1-i+t)},GRAVITY:function(t,i){return 1/(1-i+t*t)}},o.DEFAULT_OPTIONS={strength:1,anchor:void 0,range:[0,1/0],cutoff:0,cap:1/0,decayFunction:o.DECAY_FUNCTIONS.GRAVITY},o.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof n&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new n(t.anchor)),delete t.anchor);for(var i in t)this.options[i]=t[i]},o.prototype.applyForce=function(t,i){var e=this.options,o=this.force,s=this.disp,n=e.strength,r=e.anchor||i.position,a=e.cap,h=e.cutoff,c=e.range[0],u=e.range[1],p=e.decayFunction;if(0!==n)for(var l in t){var f=t[l];if(f!==i){var d=f.mass,m=f.position;s.set(m.sub(r));var g=s.norm();u>g&&g>c&&(o.set(s.normalize(n*d*p(g,h)).cap(a)),f.applyForce(o))}}},e.exports=o}),define("famous/physics/forces/RotationalDrag",["require","exports","module","./Drag"],function(t,i,e){function o(t){s.call(this,t)}var s=t("./Drag");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS=s.DEFAULT_OPTIONS,o.FORCE_FUNCTIONS=s.FORCE_FUNCTIONS,o.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},o.prototype.applyForce=function(t){for(var i=this.options.strength,e=this.options.forceFunction,o=this.force,s=0;s<t.length;s++){var n=t[s];e(n.angularVelocity).mult(-100*i).put(o),n.applyTorque(o)}},o.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},e.exports=o}),define("famous/physics/forces/RotationalSpring",["require","exports","module","./Spring"],function(t,i,e){function o(t){s.call(this,t)}var s=t("./Spring");o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS=s.DEFAULT_OPTIONS,o.FORCE_FUNCTIONS=s.FORCE_FUNCTIONS,o.prototype.applyForce=function(t){for(var i=this.force,e=this.options,o=this.disp,s=e.stiffness,n=e.damping,r=e.length,a=e.anchor,h=0;h<t.length;h++){var c=t[h];o.set(a.sub(c.orientation));var u=o.norm()-r;if(0===u)return;var p=c.mass;s*=p,n*=p,i.set(o.normalize(s*this.forceFunction(u,this.options.lMax))),n&&i.set(i.add(c.angularVelocity.mult(-n))),c.applyTorque(i)}},o.prototype.getEnergy=function(t){var i=this.options,e=i.length,o=i.anchor,s=i.stiffness,n=o.sub(t.orientation).norm()-e;return.5*s*n*n},e.exports=o}),define("famous/physics/forces/VectorField",["require","exports","module","./Force","famous/math/Vector"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),t&&this.setOptions(t),s.call(this,this.options.field),r.call(this),this.evaluation=new a(0,0,0)}function s(t){var i=o.FIELDS;switch(t){case i.CONSTANT:this.options.direction||(this.options.direction=new a(0,1,0));break;case i.POINT_ATTRACTOR:this.options.position||(this.options.position=new a(0,0,0));break;case i.SPHERE_ATTRACTOR:this.options.radius||(this.options.radius=1)}}function n(t){var i=this.evaluation,e=this.options.field;return i.set(t),e(i,this.options)}var r=t("./Force"),a=t("famous/math/Vector");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.FIELDS={CONSTANT:function(t,i){return t.set(i.direction)},LINEAR:function(t){return t},RADIAL:function(t){return t.set(t.mult(-1,t))},SPHERE_ATTRACTOR:function(t,i){return t.set(t.mult((i.radius-t.norm())/t.norm()))},POINT_ATTRACTOR:function(t,i){return t.set(i.position.sub(t))}},o.DEFAULT_OPTIONS={strength:1,field:o.FIELDS.CONSTANT},o.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},o.prototype.applyForce=function(t){for(var i=this.force,e=0;e<t.length;e++){var o=t[e];i.set(n.call(this,o.position).mult(o.mass*this.options.strength)),o.applyForce(i)}},e.exports=o}),define("js/lib/famous.min",function(){}),define("models/Slide0",["require","exports","module"],function(t,i,e){var o=Backbone.Model.extend({getDataUrl:function(){}});o=Backbone.UniqueModel(o,"Slide0","localStorage"),e.exports=o}),define("configs/Helper",["require","exports","module"],function(t,i,e){var o={getLocalUrl:function(t,i,e){e&&setTimeout(function(){e(t)},10)},readEmbedLink:function(t,i,e){"What is de Mobo?"===i?$.getJSON("./assets/slidesData2.json",function(t){console.log(t.slides),e(t.slides)}):$.getJSON("./assets/slidesData.json",function(t){console.log(t.slides),e(t.slides)})}};e.exports=o}),define("configs/Setting",["require","exports","module"],function(t,i,e){var o="Presentation Setting",s=Backbone.Model.extend({localStorage:new Store("Settings")});s=Backbone.UniqueModel(s,"Setting","localStorage"),s.load=_.memoize(function(){return console.log("Setting init"),this.appSetting=new s({id:o}),this.appSetting}),e.exports=s.load()}),define("collections/Slides0",["require","exports","module","models/Slide0","configs/Helper","configs/Setting"],function(t,i,e){var o=t("models/Slide0"),s=(t("configs/Helper"),t("configs/Setting"),Backbone.Collection.extend({localStorage:new Backbone.LocalStorage("slides0"),model:o}));e.exports=s}),define("models/Slide1",["require","exports","module"],function(t,i,e){var o=Backbone.Model.extend({getDataUrl:function(){}});o=Backbone.UniqueModel(o,"Slide1","localStorage"),e.exports=o}),define("collections/Slides1",["require","exports","module","models/Slide1","configs/Helper","configs/Setting"],function(t,i,e){var o=t("models/Slide1"),s=(t("configs/Helper"),t("configs/Setting"),Backbone.Collection.extend({localStorage:new Backbone.LocalStorage("slides1"),model:o}));e.exports=s}),define("models/Slide",["require","exports","module"],function(t,i,e){var o=Backbone.Model.extend({initialize:function(){},getDataUrl:function(){}});o=Backbone.UniqueModel(o,"Slide12","localStorage"),e.exports=o}),define("views/SlideShow",["require","exports","module","famous/core/Engine","famous/core/View","famous/core/Surface","famous/core/Transform","famous/core/Modifier","famous/modifiers/StateModifier","famous/core/RenderNode","famous/views/Lightbox"],function(t,i,e){function o(t){this.collection=t.collection,this.numberOfSlides=this.collection.models.length,c.apply(this,arguments),n.call(this),r.call(this),a.call(this),s.call(this)}function s(){window.slideshow=this,window.Transform=p}function n(){this.currIndex=0,this.slidesArray=[];for(var t=0;t<this.numberOfSlides;t++)this.slidesArray.push(this.addSlide(this.collection.models[t]))}function r(){this.lightbox=new l,this.getEffects("wipe"),this.add(this.lightbox),this.showSlide(this.currIndex)}function a(){this.fakeEvent()}var h=t("famous/core/Engine"),c=t("famous/core/View"),u=t("famous/core/Surface"),p=t("famous/core/Transform"),l=(t("famous/core/Modifier"),t("famous/modifiers/StateModifier"),t("famous/core/RenderNode"),t("famous/views/Lightbox"));o.prototype=Object.create(c.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={},o.prototype.fakeEvent=function(){h.on("keydown",function(t){switch(t.keyCode){case 37:this.previousSlide();break;case 39:this.nextSlide();break;case 38:var i=["fade","wipe","upDown"],e=i[Math.floor(Math.random()*i.length)];console.log("change effect",e),this.changeEffect(e);break;case 32:var o=Math.floor(Math.random()*this.numberOfSlides);this.showSlide(o)}}.bind(this))},o.prototype.previousSlide=function(){this.currIndex=Math.max(0,this.currIndex-1),this.lightbox.show(this.slidesArray[this.currIndex])},o.prototype.nextSlide=function(){this.currIndex=Math.min(this.numberOfSlides,this.currIndex+1),this.lightbox.show(this.slidesArray[this.currIndex])},o.prototype.showSlide=function(t){this.currIndex=t,this.lightbox.show(this.slidesArray[this.currIndex])},o.prototype.changeEffect=function(t){this.getEffects(t)},o.prototype.addSlide=function(t){return new u({size:[void 0,void 0],content:t.get("content"),properties:{color:"black",background:"yellow"}})},o.prototype.getEffects=function(t){switch(t){case"fade":this.lightbox.setOptions({inTransform:p.identity,outTransform:p.identity});break;case"wipe":this.lightbox.setOptions({inTransform:p.translate(window.innerWidth,0,0),outTransform:p.translate(-window.innerWidth,0,0),overlap:!0});break;case"upDown":this.lightbox.setOptions({inTransform:p.translate(0,window.innerHeight,0),outTransform:p.translate(0,-window.innerHeight,0),overlap:!0});break;default:this.lightbox.setOptions({inTransform:p.identity,outTransform:p.identity})}},e.exports=o}),define("widgets/Scroller",["require","exports","module","famous/core/Entity","famous/core/Group","famous/core/OptionsManager","famous/core/Transform","famous/utilities/Utility","famous/core/ViewSequence","famous/core/EventHandler"],function(t,i,e){function o(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new u(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new c,this.group.add({render:a.bind(this)}),this._entityId=h.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new d,this._eventOutput=new d,d.setInputHandler(this,this._eventInput),d.setOutputHandler(this,this._eventOutput)}function s(t){t||(t=this._contextSize);var i=this.options.direction===l.Direction.X?0:1;return void 0===t[i]?this._contextSize[i]:t[i]}function n(t,i,e){var o=t.getSize?t.getSize():this._contextSize,n=this._outputFunction(i);return e.push({transform:n,target:t.render()}),s.call(this,o)}function r(){return this.options.clipSize?this.options.clipSize:s.call(this,this._contextSize)}function a(){for(var t=null,i=this._position,e=[],o=-this._positionOffset,a=r.call(this),h=this._node;h&&o-i<a+this.options.margin;)o+=n.call(this,h,o,e),h=h.getNext?h.getNext():null;var c=this._node,u=s.call(this,c.getSize());if(a>o){for(;c&&a>u;)c=c.getPrevious(),c&&(u+=s.call(this,c.getSize()));for(c=this._node;c&&a>u;)c=c.getNext(),c&&(u+=s.call(this,c.getSize()))}var p=void 0!==u&&a>u?u:a;for(!h&&p>=o-i?1!==this._onEdge&&(this._onEdge=1,this._eventOutput.emit("edgeHit",{position:o-p})):!this._node.getPrevious()&&-m>i?-1!==this._onEdge&&(this._onEdge=-1,this._eventOutput.emit("edgeHit",{position:0})):0!==this._onEdge&&(this._onEdge=0,this._eventOutput.emit("offEdge")),h=this._node&&this._node.getPrevious?this._node.getPrevious():null,o=-this._positionOffset,h&&(t=h.getSize?h.getSize():this._contextSize,o-=s.call(this,t));h&&o-i>-(r.call(this)+this.options.margin);)n.call(this,h,o,e),h=h.getPrevious?h.getPrevious():null,h&&(t=h.getSize?h.getSize():this._contextSize,o-=s.call(this,t));return e}var h=t("famous/core/Entity"),c=t("famous/core/Group"),u=t("famous/core/OptionsManager"),p=t("famous/core/Transform"),l=t("famous/utilities/Utility"),f=t("famous/core/ViewSequence"),d=t("famous/core/EventHandler");o.DEFAULT_OPTIONS={direction:l.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1};var m=.1;o.prototype.setOptions=function(t){this._optionsManager.setOptions(t),this.options.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)},o.prototype.onEdge=function(){return this._onEdge},o.prototype.outputFrom=function(t,i){t||(t=function(t){return this.options.direction===l.Direction.X?p.translate(t,0):p.translate(0,t)}.bind(this),i||(i=t)),this._outputFunction=t,this._masterOutputFunction=i?i:function(i){return p.inverse(t(-i))}},o.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},o.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new f({array:t})),this._node=t,this._positionOffset=0},o.prototype.getSize=function(t){return t?this._contextSize:this._size},o.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},o.prototype.commit=function(t){var i=t.transform,e=t.opacity,o=t.origin,s=t.size;this.options.clipSize||s[0]===this._contextSize[0]&&s[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=s[0],this._contextSize[1]=s[1],this.options.direction===l.Direction.X?(this._size[0]=r.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=r.call(this)));var n=this._masterOutputFunction(-this._position);return{transform:p.multiply(i,n),size:s,opacity:e,origin:o,target:this.group.render()}},e.exports=o}),define("widgets/Scrollview",["require","exports","module","famous/physics/PhysicsEngine","famous/physics/bodies/Particle","famous/physics/forces/Drag","famous/physics/forces/Spring","famous/core/EventHandler","famous/core/OptionsManager","famous/core/ViewSequence","widgets/Scroller","famous/utilities/Utility","famous/inputs/GenericSync","famous/inputs/ScrollSync","famous/inputs/TouchSync"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new S(this.options),this._node=null,this._physicsEngine=new g,this._particle=new y,this._physicsEngine.addBody(this._particle),this.spring=new v({anchor:[0,0,0]}),this.drag=new _({forceFunction:_.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new _({forceFunction:_.FORCE_FUNCTIONS.LINEAR}),this.sync=new x(["scroll","touch"],{direction:this.options.direction}),this._eventInput=new O,this._eventOutput=new O,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),O.setInputHandler(this,this._eventInput),O.setOutputHandler(this,this._eventOutput),this._touchCount=0,this._springState=0,this._onEdge=0,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._scroller=new T,this._scroller.positionFrom(this.getPosition.bind(this)),this.setOptions(t),this._displacement=0,this.totalShift=0,a.call(this)}function s(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),c.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function n(t){var i=-t.velocity,e=-t.delta;this._onEdge&&t.slip&&(0>i&&this._onEdge<0||i>0&&this._onEdge>0?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(i)>Math.abs(this.getVelocity())&&s.call(this,t)),this._earlyEnd||(this._touchVelocity=i,t.slip?this.setVelocity(i):(this.setPosition(this.getPosition()+e),this._displacement+=e))}function r(t){if(this._touchCount=t.count||0,!this._touchCount){c.call(this),this._onEdge&&f.call(this,this._edgeSpringPosition,M.EDGE),h.call(this);var i=-t.velocity,e=this.options.speedLimit;t.slip&&(e*=this.options.edgeGrip),-e>i?i=-e:i>e&&(i=e),this.setVelocity(i),this._touchVelocity=0,this._needsPaginationCheck=!0}}function a(){this._eventInput.bindThis(this),this._eventInput.on("start",s),this._eventInput.on("update",n),this._eventInput.on("end",r),this._scroller.on("edgeHit",function(t){this._edgeSpringPosition=t.position,p.call(this,this._scroller.onEdge())}.bind(this)),this._scroller.on("offEdge",function(){this.sync.setOptions({scale:1}),this._onEdge=this._scroller.onEdge()}.bind(this)),this._particle.on("update",function(t){this._displacement=t.position.x-this.totalShift}.bind(this)),this._particle.on("end",function(){this._eventOutput.emit("atRest")}.bind(this))}function h(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function c(){this._springState=M.NONE,this._physicsEngine.detachAll()}function u(t){var i=this.options.direction,e=(t.getSize()||this._scroller.getSize())[i];return e||(e=this._scroller.getSize()[i]),e}function p(t){this.sync.setOptions({scale:this.options.edgeGrip}),this._onEdge=t,this._touchCount||this._springState===M.EDGE||f.call(this,this._edgeSpringPosition,M.EDGE),this._springState&&Math.abs(this.getVelocity())<.001&&(c.call(this),h.call(this))}function l(){if(!this._touchCount&&this._springState!==M.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var i=this.getPosition(),e=Math.abs(t)>this.options.pageSwitchSpeed,o=u.call(this,this._node),s=i>.5*o,n=t>0;s&&!e||e&&n?this.goToNextPage():f.call(this,0,M.PAGE),this._needsPaginationCheck=!1}}}function f(t,i){var e;i===M.EDGE?(this._edgeSpringPosition=t,e={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):i===M.PAGE&&(this._pageSpringPosition=t,e={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(e),i&&!this._springState&&(c.call(this),this._springState=i,h.call(this)),this._springState=i}function d(){for(var t=0,i=this.getPosition(),e=u.call(this,this._node),o=this._node.getNext();t+i>e&&o;)t-=e,this._scroller.sequenceFrom(o),this._node=o,o=this._node.getNext(),e=u.call(this,this._node);for(var s,n=this._node.getPrevious();0>t+i&&n;)s=u.call(this,n),this._scroller.sequenceFrom(n),this._node=n,t+=s,n=this._node.getPrevious();t&&m.call(this,t)}function m(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this.totalShift+=t,this._springState===M.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===M.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var g=t("famous/physics/PhysicsEngine"),y=t("famous/physics/bodies/Particle"),_=t("famous/physics/forces/Drag"),v=t("famous/physics/forces/Spring"),O=t("famous/core/EventHandler"),S=t("famous/core/OptionsManager"),w=t("famous/core/ViewSequence"),T=t("widgets/Scroller"),b=t("famous/utilities/Utility"),x=t("famous/inputs/GenericSync"),E=t("famous/inputs/ScrollSync"),I=t("famous/inputs/TouchSync");x.register({scroll:E,touch:I}),o.DEFAULT_OPTIONS={direction:b.Direction.Y,rails:!0,friction:.005,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:10,groupScroll:!1};var M={NONE:0,EDGE:1,PAGE:2};o.prototype.goToPreviousPage=function(t){if(!this._node)return null;var i=this._node.getPrevious();if(i){var e=u.call(this,i);this._scroller.sequenceFrom(i),this._node=i,t||(m.call(this,e),f.call(this,0,M.PAGE))}return this._eventOutput.emit("pageChange",{direction:-1}),i},o.prototype.goToNextPage=function(t){if(!this._node)return null;var i=this._node.getNext();if(i){var e=u.call(this,this._node);this._scroller.sequenceFrom(i),this._node=i,t||(m.call(this,-e),f.call(this,0,M.PAGE))}return this._eventOutput.emit("pageChange",{direction:1}),i},o.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},o.prototype.getPosition=function(){return this._particle.getPosition1D()},o.prototype.setPosition=function(t){this._particle.setPosition1D(t)},o.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},o.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},o.prototype.setOptions=function(t){t&&(void 0!==t.direction&&("x"===t.direction?t.direction=b.Direction.X:"y"===t.direction&&(t.direction=b.Direction.Y)),this._scroller.setOptions(t),this._optionsManager.setOptions(t)),this._scroller.setOptions(this.options),this.options.groupScroll?this._scroller.pipe(this._eventInput):this._scroller.unpipe(this._eventInput),this.drag.setOptions({strength:this.options.drag}),this.friction.setOptions({strength:this.options.friction}),this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===b.Direction.X?x.DIRECTION_X:x.DIRECTION_Y})
},o.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new w({array:t})),this._node=t,this._scroller.sequenceFrom(t)},o.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},o.prototype.render=function(){return this._node?(this._springState===M.NONE&&d.call(this),this.options.paginated&&this._needsPaginationCheck&&l.call(this),this._scroller.render()):null},e.exports=o}),define("views/GenericSlidesView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Transform","famous/core/Modifier","famous/modifiers/StateModifier","famous/core/ViewSequence","models/Slide","models/Slide0","models/Slide1","configs/Helper"],function(t,i,e){function o(t){n.apply(this,arguments),this.collection=t.collection,this.slidesIndex=t.slidesIndex,this.setEvents.call(this),this.createViews.call(this),this.setListeners.call(this),s.call(this)}function s(){window.slideView=this}{var n=t("famous/core/View"),r=(t("famous/core/Surface"),t("famous/core/Transform"),t("famous/core/Modifier"),t("famous/modifiers/StateModifier"),t("famous/core/ViewSequence"));t("models/Slide"),t("models/Slide0"),t("models/Slide1"),t("configs/Helper")}o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.createViews=function(){this.createScrollView.call(this),this.slidesArray=[],this.slidesSequence=new r({array:this.slidesArray,index:0,loop:!1}),this.scrollview.sequenceFrom(this.slidesSequence)},o.prototype.createScrollView=function(){},o.prototype.setListeners=function(){this.collection.on("change:timeStamp",function(t){var i=this.collection.indexOf(t);this.scrollToPage(i)}.bind(this)),this.collection.on("all",function(t,i){var e=this.collection.indexOf(i);switch(t){case"remove":this.slidesSequence.splice(e,1)}}.bind(this)),this.collection.fetch(),_.each(this.reusableSlides,function(t){t._eventOutput.pipe(this.scrollview)}.bind(this))},o.prototype.addSlides=function(t){this.slidesNumber=t.length,this.downloadedNumber=0,_.each(t,function(t,i){t.index=i,this.collection.create(t)}.bind(this)),setTimeout(function(){this.selectByIndex(0)}.bind(this),1e3)},o.prototype.reset=function(){for(var t=this.slidesSequence;this.slidesSequence.getPrevious();)t=this.slidesSequence.getPrevious();t&&this.scrollview.sequenceFrom(t),this.collection.forEach(function(t){t.save("notes",void 0),t.save("localURL",void 0),t.save("remoteURL",void 0)}),_(this.collection.toArray()).invoke("destroy")},o.prototype.scrollToPage=function(t,i){var e=this.getCurPage(),o=t-e;if(o>0)for(;0!==o;)this.scrollview.goToNextPage(i),o--;else if(0>o)for(;0!==o;)this.scrollview.goToPreviousPage(i),o++},o.prototype.goToPage=function(t){o.prototype.scrollToPage.call(this,t,!0)},o.prototype.setEvents=function(){},o.prototype.getSelectedPage=function(){var t=this.collection.max(function(t){return t.get("timeStamp")}),i=this.collection.indexOf(t);return-1==i&&(i=0),i},o.prototype.getCurPage=function(){return this.scrollview._node.getIndex()},o.prototype.selectByIndex=function(t){var i=this.collection.at(t);i&&i.save("timeStamp",Date.now())},e.exports=o}),define("collections/Slides",["require","exports","module","models/Slide","configs/Helper","configs/Setting"],function(t,i,e){var o=t("models/Slide"),s=(t("configs/Helper"),t("configs/Setting"),Backbone.Collection.extend({localStorage:new Backbone.LocalStorage("slides"),model:o}));e.exports=s}),define("widgets/SvgView",["require","exports","module","famous/core/Engine","famous/core/View","famous/core/Surface","famous/core/Transform","famous/core/Modifier","famous/modifiers/StateModifier","configs/Setting"],function(t,i,e){function o(t){this.useImg=t.useImg,h.apply(this,arguments),n.call(this),r.call(this),s.call(this)}function s(){window.SvgView=this}function n(){this.surface=new c({classes:["thumbnail"],size:this.options.size,properties:{zIndex:2}}),this.add(new u({origin:[.5,.5]})).add(this.surface),this.surface.pipe(this._eventOutput)}function r(){this.surface.on("click",function(){this._eventOutput.emit("click")}.bind(this))}function a(){_(this.snap.selectAll("a")).each(function(t){var i=$(t.node.outerHTML).attr("xlink:href");t.node.onclick=function(t){t.preventDefault(),navigator.app.loadUrl(i,{openExternal:!0})}})}var h=(t("famous/core/Engine"),t("famous/core/View")),c=t("famous/core/Surface"),u=(t("famous/core/Transform"),t("famous/core/Modifier"),t("famous/modifiers/StateModifier")),p=t("configs/Setting");o.prototype=Object.create(h.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={size:[640,480],zIndex:2,surfacesNumber:15,totalTime:1e4,timeInterval:1e3,origin:[.5,.5],align:[.5,.5]},o.prototype.updateWithUrl=function(t){this.useImg?this.surface.setContent('<div><img src="'+t+'"></img></div>'):Snap.load(t,function(t){this.snap?this.snap.clear():this.snap=new Snap,this.snap.append(t),this.animateQueue=_.filter(this.snap.selectAll("path"),function(t){return t.node.outerHTML.length>600}),a.call(this),this.surface.setContent($("<div></div>").append(this.snap.node)[0])}.bind(this))},o.prototype.prepareAnimate=function(){_.each(this.animateQueue,function(t){console.log(t,0),t.animate({transform:t.transform().localMatrix.translate(0,-500,0),opacity:0},100)})},o.prototype.doAnimate=function(){if(0!==this.animateQueue.length&&"on"===p.get("animation")){var t=this.animateQueue.shift();t.animate({transform:t.transform().localMatrix.translate(0,500,0),opacity:1},2e3,mina.bounce)}},o.prototype.reset=function(){this.svg&&this.svg.clear()},o.prototype.pause=function(){console.log("pause"),this.p=!0},o.prototype.resume=function(){console.log("resume"),this.p=!1},e.exports=o}),define("views/SecondSlidesViewItem",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Transform","famous/core/Modifier","famous/modifiers/StateModifier","famous/utilities/Utility","collections/Slides","models/Slide","widgets/SvgView","configs/Setting"],function(t,i,e){function o(t){c.apply(this,arguments),this.model=t.model,this.collection=t.model.collection,a.call(this),n.call(this),r.call(this),s.call(this)}function s(){window.slideViewItem=this}function n(){this.item=new p({size:this.options.thumbnailSize,id:this.model.get("id")}),this.itemMod=new u({size:this.options.size}),this.updateContent.call(this),this.add(this.itemMod).add(this.item)}function r(){this.item.pipe(this._eventOutput)}function a(){this.model.on("all",function(t,i){"change:timeStamp"===t&&console.log("show item animation in the future",i),"change:localURL"==t&&i.get("localURL")&&this.item.updateWithUrl(i.get("localURL"))}.bind(this))}function h(t){return t=t.match("Top")?t.replace("Top","Bottom"):t.replace("Bottom","Top"),t=t.match("Left")?t.replace("Left","Right"):t.replace("Right","Left")}var c=t("famous/core/View"),u=(t("famous/core/Surface"),t("famous/core/Transform"),t("famous/core/Modifier")),p=(t("famous/modifiers/StateModifier"),t("famous/utilities/Utility"),t("collections/Slides"),t("models/Slide"),t("widgets/SvgView")),l=t("configs/Setting");o.prototype=Object.create(c.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={size:[window.innerWidth,window.innerHeight],thumbnailSize:[4*window.innerHeight/3,window.innerHeight]},o.prototype.updateContent=function(){this.model.get("localURL")&&(this.item.updateWithUrl(this.model.get("localURL")),"on"===l.get("animation")&&setTimeout(function(){this.item.prepareAnimate()}.bind(this),1e3))},o.prototype.addClass=function(t){var i=$(this.item.surface._currTarget);i.find("div").attr("class",t)},o.prototype.show=function(t,i){i&&(t=h(t));var e=$(this.item.surface._currTarget).find("div"),o=e.html(),s=$(".pt-page-hide").last();s.html(o).attr("class","pt-page pt-page-hide pt-page-current "+t).on("webkitAnimationEnd",function(){s.off("webkitAnimationEnd"),s.attr("class","pt-page pt-page-show pt-page-current")})},o.prototype.hide=function(t,i){i&&(t=h(t));var e=$(".pt-page-show").last();e.attr("class","pt-page pt-page-show pt-page-current "+t).on("webkitAnimationEnd",function(){e.off("webkitAnimationEnd"),e.attr("class","pt-page pt-page-hide")})},e.exports=o}),define("widgets/StatesLightbox",["require","exports","module","famous/core/Transform","famous/core/Modifier","famous/core/RenderNode","famous/utilities/Utility","famous/core/OptionsManager","famous/transitions/Transitionable","famous/transitions/TransitionableTransform"],function(t,i,e){function o(t){this.options=Object.create(o.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._showing=!1,this.nodes=[],this.transforms=[],this.states=[]}var s=t("famous/core/Transform"),n=t("famous/core/Modifier"),r=t("famous/core/RenderNode"),a=t("famous/utilities/Utility"),h=t("famous/core/OptionsManager"),c=t("famous/transitions/Transitionable"),u=t("famous/transitions/TransitionableTransform");o.DEFAULT_OPTIONS={inTransform:s.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],outTransform:s.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],showTransform:s.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},o.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},o.prototype.show=function(t,i,e){if(!t)return this.hide(e);if(i instanceof Function&&(e=i,i=void 0),this._showing){if(!this.options.overlap)return this.hide(this.show.bind(this,t,e)),void 0;this.hide()}this._showing=!0;var o={transform:new u(this.options.inTransform),origin:new c(this.options.inOrigin),opacity:new c(this.options.inOpacity)},s=new n({transform:o.transform,opacity:o.opacity,origin:o.origin}),h=new r;h.add(s).add(t),this.nodes.push(h),this.states.push(o),this.transforms.push(s);var p=e?a.after(3,e):void 0;i||(i=this.options.inTransition),o.opacity.set(this.options.showOpacity,i,p),o.origin.set(this.options.showOrigin,i,p),this.options.showTransforms?this.options.showTransforms.map(function(t,i){o.transform.set(t,this.options.showTransitions[i])}.bind(this)):o.transform.set(this.options.showTransform,i,p)},o.prototype.hide=function(t,i){if(this._showing){this._showing=!1,t instanceof Function&&(i=t,t=void 0);var e=this.nodes[this.nodes.length-1],o=this.transforms[this.transforms.length-1],s=this.states[this.states.length-1],n=a.after(3,function(){this.nodes.splice(this.nodes.indexOf(e),1),this.states.splice(this.states.indexOf(s),1),this.transforms.splice(this.transforms.indexOf(o),1),i&&i.call(this)}.bind(this));t||(t=this.options.outTransition),s.opacity.set(this.options.outOpacity,t,n),s.origin.set(this.options.outOrigin,t,n),this.options.outTransforms?this.options.outTransforms.map(function(t,i){s.transform.set(t,this.options.outTransitions[i])}.bind(this)):s.transform.set(this.options.outTransform,t,n)}},o.prototype.render=function(){for(var t=[],i=0;i<this.nodes.length;i++)t.push(this.nodes[i].render());return t},e.exports=o}),define("views/SecondSlidesView",["require","exports","module","famous/core/Engine","famous/core/Surface","famous/core/Transform","famous/core/Modifier","famous/modifiers/StateModifier","widgets/Scrollview","famous/views/Scroller","famous/utilities/Utility","famous/inputs/GenericSync","famous/inputs/MouseSync","famous/inputs/TouchSync","famous/transitions/Transitionable","famous/transitions/Easing","views/GenericSlidesView","views/SecondSlidesViewItem","widgets/StatesLightbox","configs/Setting","collections/Slides","collections/Slides0","collections/Slides1","models/Slide"],function(t,i,e){function o(){this.SlidesViewItem=_;var t=(v.get("transition")||"horizontal slide").toLowerCase();this.pageTransition=O[t],y.apply(this,arguments),this.setEvents.call(this),s.call(this)}function s(){this.hintView=new r({size:[500,100],content:v.get("transition"),properties:{fontFamily:"Lucida Console",color:"grey",fontSize:"30px",lineHeight:"100px",textAlign:"Right"}}),this.hintPos=new c({origin:[1,0],align:[.92,0],transform:a.translate(0,0,1)}),this.hintMod=new c({opacity:0}),this.add(this.hintPos).add(this.hintMod).add(this.hintView)}var n=t("famous/core/Engine"),r=t("famous/core/Surface"),a=t("famous/core/Transform"),h=t("famous/core/Modifier"),c=t("famous/modifiers/StateModifier"),u=t("widgets/Scrollview"),p=(t("famous/views/Scroller"),t("famous/utilities/Utility")),l=t("famous/inputs/GenericSync"),f=t("famous/inputs/MouseSync"),d=t("famous/inputs/TouchSync");l.register({mouse:f,touch:d});{var m=t("famous/transitions/Transitionable"),g=t("famous/transitions/Easing"),y=t("views/GenericSlidesView"),_=t("views/SecondSlidesViewItem"),v=(t("widgets/StatesLightbox"),t("configs/Setting"));t("collections/Slides"),t("collections/Slides0"),t("collections/Slides1"),t("models/Slide")}o.prototype=Object.create(y.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={slidesNumber:30,slideViewItemSize:[window.innerWidth,window.innerHeight]},o.prototype.createScrollView=function(){this.scrollview=new u({direction:p.Direction.X,margin:2*window.innerWidth,paginated:!0}),n.pipe(this.scrollview),this.scrollviewScale=new m(1),this.scrollviewMod=new h({transform:function(){return a.scale(this.scrollviewScale.get(),this.scrollviewScale.get(),1)}.bind(this)}),this.scrollviewMod2=new h({origin:[.5,.5],size:[window.innerWidth,window.innerHeight]}),this.scrollviewGalleryMod=new h,this.add(this.scrollviewGalleryMod).add(this.scrollviewMod).add(this.scrollviewMod2).add(this.scrollview)},o.prototype.setEvents=function(){},o.prototype.setListeners=function(){y.prototype.setListeners.call(this),this.collection.on("add",function(t){var i=new this.SlidesViewItem({model:t});this.slidesArray[t.get("index")]=i,this.scrollview&&i._eventOutput.pipe(this.scrollview),this.sync&&i._eventOutput.pipe(this.sync)}.bind(this)),v.on("change:transition",function(t,i){console.log(i),this.hintView.setContent(i),this.hintMod.setOpacity(1,{duration:400,curve:g.outElastic},function(){this.hintMod.setOpacity(0,{duration:2e3,curve:g.easein},function(){this.hintMod.setTransform(a.scale(1,1,1))}.bind(this))}.bind(this)),this.changeTransition(i)}.bind(this)),this.changeTransition(v.get("transition"))},o.prototype.scrollToPage=function(t){var i=this.scrollview._node.get(),e=this.slidesArray[t];if(this.getCurPage()==t)i.item.doAnimate();else{if(this.slidesArray.map(function(t){this.pageTransition.showClass?t.addClass(this.pageTransition.showClass):t.addClass("")}.bind(this)),this.pageTransition.outClass&&this.pageTransition.inClass){var o=t<this.getCurPage();y.prototype.scrollToPage.call(this,t,!0),this.scrollviewScale.set(0),$("#pt-main").show(),setTimeout(function(){i.hide(this.pageTransition.outClass,o),e.show(this.pageTransition.inClass,o)}.bind(this),0)}else y.prototype.scrollToPage.call(this,t,!1),this.scrollviewScale.set(1),$("#pt-main").hide(),1!=this.pageTransition.scale&&this.scrollviewScale.set(this.pageTransition.scale,{duration:300}).set(1,{duration:700});1==this.pageTransition.galleryMod&&(this.scrollviewGalleryMod.setTransform(a.rotateY(Math.PI/4),{duration:300}),this.scrollviewGalleryMod.setTransform(a.rotateY(0),{duration:700,curve:g.inExpo}))}},o.prototype.goToPage=function(t){if(y.prototype.goToPage.call(this,t),this.pageTransition.outClass&&this.pageTransition.inClass){this.scrollviewScale.set(0),$("#pt-main").show();var i=this.scrollview._node.get(),e=this.slidesArray[t];e&&(i.hide(this.pageTransition.outClass,t<this.getCurPage()),e.show(this.pageTransition.inClass,t<this.getCurPage()))}else this.scrollviewScale.set(1),$("#pt-main").hide()},o.prototype.changeTransition=function(t){var t=(t||"").toLowerCase();this.pageTransition=O[t]||O["horizontal slide"],this.pageTransition.scale&&this.scrollviewScale.set(this.pageTransition.scale,{duration:300}).set(1,{duration:700}),this.pageTransition.outputFunction&&this.scrollview.outputFrom(this.pageTransition.outputFunction),this.pageTransition.options&&this.scrollview.setOptions(this.pageTransition.options),this.goToPage(this.getSelectedPage())};var O={"horizontal slide":{galleryMod:!1,scale:.8,showScale:1,outputFunction:function(t){return a.translate(t+10,0)},options:{direction:p.Direction.X,margin:2*window.innerWidth}},"vertical slide":{galleryMod:!1,scale:.8,outputFunction:function(t){return a.translate(0,t)},options:{direction:p.Direction.Y,margin:2*window.innerWidth}},"diagonal slide":{galleryMod:!1,scale:.8,outputFunction:function(t){return a.translate(t,t,0)},options:{direction:p.Direction.Y,margin:2*window.innerWidth}},"in and out":{galleryMod:!1,scale:.8,outputFunction:function(t){return a.translate(0,1.3*-t,-t)},options:{direction:p.Direction.Y,margin:2*window.innerWidth}},hexagonal:{galleryMod:!1,scale:.8,outputFunction:function(t){return a.moveThen([-window.innerWidth/2,1.5*window.innerHeight,0],a.rotateZ(-t/window.innerHeight*Math.PI/3))},options:{direction:p.Direction.Y,margin:2*window.innerWidth}},calender:{galleryMod:!1,scale:1,outputFunction:function(t){return a.moveThen([0,0,0],a.rotateX(t/window.innerHeight*Math.PI/2))},options:{direction:p.Direction.Y,margin:2*window.innerWidth}},gallery:{galleryMod:!0,scale:.8,outputFunction:function(t){return a.translate(t,0)},options:{direction:p.Direction.X,margin:2*window.innerWidth},showClass:"shadow"},cube:{galleryMod:!1,scale:1,outputFunction:function(t){return a.moveThen([-window.innerWidth/2,0,window.innerWidth/2],a.rotateY(t/window.innerWidth*Math.PI/2))},options:{direction:p.Direction.X,margin:2*window.innerWidth}},gravity:{galleryMod:!1,scale:1,outputFunction:function(){return a.identity},options:{direction:p.Direction.Y,margin:2*window.innerWidth},outClass:"pt-page-rotateFall pt-page-ontop",inClass:"pt-page-scaleUp"},"extra! extra!":{galleryMod:!1,scale:1,outputFunction:function(){return a.identity},options:{direction:p.Direction.Y,margin:2*window.innerWidth},outClass:"pt-page-rotateOutNewspaper",inClass:"pt-page-rotateInNewspaper pt-page-delay500"},fold:{galleryMod:!1,scale:1,outputFunction:function(){return a.identity},options:{direction:p.Direction.Y,margin:2*window.innerWidth},outClass:"pt-page-rotateFoldLeft",inClass:"pt-page-moveFromRightFade"},flip:{galleryMod:!1,scale:1,outputFunction:function(){return a.identity},options:{direction:p.Direction.Y,margin:2*window.innerWidth},outClass:"pt-page-flipOutRight",inClass:"pt-page-flipInLeft pt-page-delay500"},scale:{galleryMod:!1,scale:1,outputFunction:function(){return a.identity},options:{direction:p.Direction.Y,margin:2*window.innerWidth},outClass:"pt-page-scaleDownCenter",inClass:"pt-page-scaleUpCenter pt-page-delay400"},carousel:{galleryMod:!1,scale:1,outputFunction:function(){return a.identity},options:{direction:p.Direction.Y,margin:2*window.innerWidth},outClass:"pt-page-rotateCarouselBottomOut pt-page-ontop",inClass:"pt-page-rotateCarouselBottomIn"},push:{galleryMod:!1,scale:1,outputFunction:function(){return a.identity},options:{direction:p.Direction.Y,margin:2*window.innerWidth},outClass:"pt-page-rotatePushBottom",inClass:"pt-page-rotatePullTop pt-page-delay180"}};e.exports=o}),define("views/LoadingbarView",["require","exports","module","famous/core/View","famous/core/Surface","famous/core/Transform","famous/core/Modifier","famous/modifiers/StateModifier","famous/utilities/Utility","configs/Setting"],function(t,i,e){function o(t){a.apply(this,arguments),this.slidesTransitionable=t.slidesTransitionable,n.call(this),r.call(this),s.call(this)}function s(){window.LoadingbarView=this}function n(){this.loadingbarViewMod=new c({origin:function(){return[.5,.5]},align:function(){return[.5,.5]}}),this.loadingbarViewMod.opacityFrom(function(){return 1-Math.abs(1-this.slidesTransitionable.get())}.bind(this)),this.loadingbarSurface=new h({size:this.options.loadingbarViewSize,properties:{zIndex:10,textAlign:"center",backgroundColor:"transparent",color:"#413E3F",borderRadius:"10px",cursor:"pointer",fontSize:"20px",lineHeight:"50px"}}),this.titleMod=new c({origin:function(){return[.5,.5]},align:function(){return[.5,.45]}}),this.options.isSecondScreen&&this.titleMod.opacityFrom(function(){return 1-Math.abs(1-this.slidesTransitionable.get())}.bind(this)),this.titleSurface=new h({size:this.options.titleViewSize,properties:{zIndex:10,textAlign:"center",backgroundColor:"transparent",color:"#413E3F",borderRadius:"10px",cursor:"pointer",fontSize:"20px",fontWeight:"bold",lineHeight:"50px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",width:"100%",textTransform:"capitalize"}}),this.add(this.titleMod).add(this.titleSurface),this.add(this.loadingbarViewMod).add(this.loadingbarSurface)}function r(){u.on("change:downloadedRatio",function(t,i){console.log(i),this.updateWithRatio(i),parseInt(i.split("/")[1])===parseInt(i.split("/")[2])&&this._eventOutput.emit("allDownloaded")}.bind(this)),this.titleSurface.pipe(this._eventOutput),this.loadingbarSurface.pipe(this._eventOutput)}var a=t("famous/core/View"),h=t("famous/core/Surface"),c=(t("famous/core/Transform"),t("famous/core/Modifier")),u=(t("famous/modifiers/StateModifier"),t("famous/utilities/Utility"),t("configs/Setting"));o.prototype=Object.create(a.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={backgroundSize:[window.innerWidth,.3*window.innerHeight],loadingbarViewSize:[.6*window.innerWidth,.1*window.innerHeight],titleViewSize:[.6*window.innerWidth,.1*window.innerHeight]},o.prototype.updateWithRatio=function(t){console.log(t);var i=t.split("/"),e=parseInt(i[2]),o=parseInt(i[1]),s=Math.round(o/e*100)+"",n='<progress value="0" max="100"> </progress>';$("progress").attr("value",s);var r=i[0];this.loadingbarSurface.setContent(n),this.titleSurface.setContent(r)},e.exports=o}),define("views/SecondScreen",["require","exports","module","famous/core/Engine","famous/core/View","famous/core/Surface","famous/core/Transform","famous/core/Modifier","famous/modifiers/StateModifier","famous/views/Scrollview","famous/utilities/Utility","famous/transitions/Transitionable","collections/Slides0","collections/Slides1","models/Slide0","models/Slide1","models/Slide","views/SlideShow","views/SecondSlidesView","configs/Setting","views/LoadingbarView"],function(t,i,e){function o(){h.apply(this,arguments),n.call(this),r.call(this),a.call(this),s.call(this)}function s(){this.setting=S,window.secondView=this,window.Slides0=d,window.Slides1=m,window.Slide=v}function n(){this.slidesCollection=[],this.slidesCollection[0]=new d,this.slidesCollection[1]=new m,g.on("uniquemodel.add",_.bind(this.slidesCollection[0].add,this.slidesCollection[0])),y.on("uniquemodel.add",_.bind(this.slidesCollection[1].add,this.slidesCollection[1])),this.currentSlidesIndex=S.get("currentSlidesIndex")?S.get("currentSlidesIndex"):0}function r(){this.currentSlidesIndex=0,this.slidesViewArray=[],this.slidesViewArray[0]=new O({collection:this.slidesCollection[0],slidesIndex:0}),this.slidesViewArray[1]=new O({collection:this.slidesCollection[1],slidesIndex:1}),this.slidesViewMods=[],this.slidesTransitionable=new f(0),this.slidesViewMods[0]=new p({opacity:function(){return 1.5-this.slidesTransitionable.get()}.bind(this),transform:function(){var t=0;return t=this.currentSlidesIndex?3*window.innerWidth:3*-window.innerWidth,u.translate(-this.slidesTransitionable.get()*t,0,0)}.bind(this)}),this.slidesViewMods[1]=new p({opacity:function(){return this.slidesTransitionable.get()+.5}.bind(this),transform:function(){var t=0;return t=this.currentSlidesIndex?3*window.innerWidth:3*-window.innerWidth,u.translate((2-this.slidesTransitionable.get())*t,0,0)}.bind(this)}),this.add(this.slidesViewMods[0]).add(this.slidesViewArray[0]),this.add(this.slidesViewMods[1]).add(this.slidesViewArray[1]),this.loadingbarViewMod=new p({}),this.loadingbarView=new w({slidesTransitionable:this.slidesTransitionable,isSecondScreen:!0}),this.add(this.loadingbarViewMod).add(this.loadingbarView),this.splashMod=new l({origin:[.5,0],align:[.5,0],opacity:0}),this.splashSurface=new c({content:"<iframe src='./splashScreen.html' id='splashIframe'></iframe>",properties:{zIndex:-2,width:window.innerWidth,height:.5*window.innerHeight}}),this.add(this.splashMod).add(this.splashSurface)}function a(){setTimeout(function(){document.getElementById("splashIframe").onload=function(){this.splashMod.setOpacity(1)}.bind(this)}.bind(this),0),S.on("change:currentSlidesIndex",function(t,i){this.splashMod&&this.splashMod.setOpacity(0,{duration:1e3}),this.currentSlidesIndex=i,this.slidesTransitionable.set(1,{duration:2e3,curve:"easeInOut"},function(){this.slidesViewArray[i].goToPage(0)}.bind(this))}.bind(this)),this.loadingbarView._eventOutput.on("allDownloaded",function(){this.slidesTransitionable.set(2*this.currentSlidesIndex,{duration:2e3,curve:"easeInOut"})}.bind(this))}var h=(t("famous/core/Engine"),t("famous/core/View")),c=t("famous/core/Surface"),u=t("famous/core/Transform"),p=t("famous/core/Modifier"),l=t("famous/modifiers/StateModifier"),f=(t("famous/views/Scrollview"),t("famous/utilities/Utility"),t("famous/transitions/Transitionable")),d=t("collections/Slides0"),m=t("collections/Slides1"),g=t("models/Slide0"),y=t("models/Slide1"),v=t("models/Slide"),O=(t("views/SlideShow"),t("views/SecondSlidesView")),S=t("configs/Setting"),w=t("views/LoadingbarView");o.prototype=Object.create(h.prototype),o.prototype.constructor=o,o.DEFAULT_OPTIONS={},o.prototype.getCurSlidesView=function(){return this.slidesViewArray[this.currentSlidesIndex]},o.prototype.getNextSlidesView=function(){return this.slidesViewArray[1-this.currentSlidesIndex]},e.exports=o}),define("../secondScreen",["require","exports","module","famous/core/Engine","views/SecondScreen"],function(t){var i=t("famous/core/Engine"),e=t("views/SecondScreen"),o=i.createContext(),s=new e;o.add(s),o.setPerspective(1e3)}),require(["js/lib/famous.min"],function(){require.config({baseUrl:"js"}),require(["../secondScreen"])}),define("secondRequire",function(){});