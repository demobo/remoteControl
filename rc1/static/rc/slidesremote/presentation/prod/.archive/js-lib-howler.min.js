!function(){var n={},g=null,l=!0,q=!1;try{"undefined"!=typeof AudioContext?g=new AudioContext:"undefined"!=typeof webkitAudioContext?g=new webkitAudioContext:l=!1}catch(x){l=!1}if(!l)if("undefined"!=typeof Audio)try{new Audio}catch(y){q=!0}else q=!0;if(l){var p=void 0===g.createGain?g.createGainNode():g.createGain();p.gain.value=1;p.connect(g.destination)}var s=function(a){this._volume=1;this._muted=!1;this.usingWebAudio=l;this.noAudio=q;this._howls=[];this._codecs=a;this.iOSAutoEnable=!0};s.prototype=
{volume:function(a){if(a=parseFloat(a),0<=a&&1>=a){this._volume=a;l&&(p.gain.value=a);for(var c in this._howls)if(this._howls.hasOwnProperty(c)&&!1===this._howls[c]._webAudio)for(a=0;a<this._howls[c]._audioNode.length;a++)this._howls[c]._audioNode[a].volume=this._howls[c]._volume*this._volume;return this}return l?p.gain.value:this._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(a){this._muted=a;l&&(p.gain.value=a?0:this._volume);
for(var c in this._howls)if(this._howls.hasOwnProperty(c)&&!1===this._howls[c]._webAudio)for(var b=0;b<this._howls[c]._audioNode.length;b++)this._howls[c]._audioNode[b].muted=a},codecs:function(a){return this._codecs[a]},_enableiOSAudio:function(){var a=this;if(!g||!a._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){a._iOSEnabled=!1;var c=function(){var b=g.createBuffer(1,1,22050),d=g.createBufferSource();d.buffer=b;d.connect(g.destination);void 0===d.start?d.noteOn(0):d.start(0);setTimeout(function(){(d.playbackState===
d.PLAYING_STATE||d.playbackState===d.FINISHED_STATE)&&(a._iOSEnabled=!0,a.iOSAutoEnable=!1,window.removeEventListener("touchstart",c,!1))},0)};return window.addEventListener("touchstart",c,!1),a}}};var h=null,t={};q||(h=new Audio,t={mp3:!!h.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!h.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,
""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var k=new s(t),r=function(a){this._autoplay=a.autoplay||!1;this._buffer=a.buffer||!1;this._duration=a.duration||0;this._format=a.format||null;this._loop=a.loop||!1;this._loaded=!1;this._sprite=a.sprite||
{};this._src=a.src||"";this._pos3d=a.pos3d||[0,0,-0.5];this._volume=void 0!==a.volume?a.volume:1;this._urls=a.urls||[];this._rate=a.rate||1;this._model=a.model||null;this._onload=[a.onload||function(){}];this._onloaderror=[a.onloaderror||function(){}];this._onend=[a.onend||function(){}];this._onpause=[a.onpause||function(){}];this._onplay=[a.onplay||function(){}];this._onendTimer=[];this._webAudio=l&&!this._buffer;this._audioNode=[];this._webAudio&&this._setupAudioNode();void 0!==g&&k.iOSAutoEnable&&
k._enableiOSAudio();k._howls.push(this);this.load()};if(r.prototype={load:function(){var a=this,c=null;if(q)return void a.on("loaderror");for(var b=0;b<a._urls.length;b++){var d,e;if(a._format)d=a._format;else{if(e=a._urls[b].toLowerCase().split("?")[0],d=e.match(/.+\.([^?]+)(\?|$)/),d=d&&2<=d.length?d:e.match(/data\:audio\/([^?]+);/),!d)return void a.on("loaderror");d=d[1]}if(t[d]){c=a._urls[b];break}}if(!c)return void a.on("loaderror");if(a._src=c,a._webAudio)v(a,c);else{var f=new Audio;f.addEventListener("error",
function(){f.error&&4===f.error.code&&(s.noAudio=!0);a.on("loaderror",{type:f.error?f.error.code:0})},!1);a._audioNode.push(f);f.src=c;f._pos=0;f.preload="auto";f.volume=k._muted?0:a._volume*k.volume();n[c]=a;var g=function(){a._duration=Math.ceil(10*f.duration)/10;0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1E3*a._duration]});a._loaded||(a._loaded=!0,a.on("load"));a._autoplay&&a.play();f.removeEventListener("canplaythrough",g,!1)};f.addEventListener("canplaythrough",
g,!1);f.load()}return a},urls:function(a){return a?(this.stop(),this._urls="string"==typeof a?[a]:a,this._loaded=!1,this.load(),this):this._urls},play:function(a,c){var b=this;return"function"==typeof a&&(c=a),a&&"function"!=typeof a||(a="_default"),b._loaded?b._sprite[a]?(b._inactiveNode(function(d){d._sprite=a;var e=0<d._pos?d._pos:b._sprite[a][0]/1E3,f=0;b._webAudio?(f=b._sprite[a][1]/1E3-d._pos,0<d._pos&&(e=b._sprite[a][0]/1E3+e)):f=b._sprite[a][1]/1E3-(e-b._sprite[a][0]/1E3);var h,l=!(!b._loop&&
!b._sprite[a][2]),m="string"==typeof c?c:Math.round(Date.now()*Math.random())+"";if(function(){h=setTimeout(function(){!b._webAudio&&l&&b.stop(m).play(a,m);b._webAudio&&!l&&(b._nodeById(m).paused=!0,b._nodeById(m)._pos=0,b._clearEndTimer(m));b._webAudio||l||b.stop(m);b.on("end",m)},1E3*f);b._onendTimer.push({timer:h,id:m})}(),b._webAudio){var n=b._sprite[a][0]/1E3,p=b._sprite[a][1]/1E3;d.id=m;d.paused=!1;w(b,[l,n,p],m);b._playStart=g.currentTime;d.gain.value=b._volume;void 0===d.bufferSource.start?
d.bufferSource.noteGrainOn(0,e,f):d.bufferSource.start(0,e,f)}else{if(4!==d.readyState&&(d.readyState||!navigator.isCocoonJS))return b._clearEndTimer(m),function(){var e=a,f=c,g=function(){b.play(e,f);d.removeEventListener("canplaythrough",g,!1)};d.addEventListener("canplaythrough",g,!1)}(),b;d.readyState=4;d.id=m;d.currentTime=e;d.muted=k._muted||d.muted;d.volume=b._volume*k.volume();setTimeout(function(){d.play()},0)}return b.on("play"),"function"==typeof c&&c(m),b}),b):("function"==typeof c&&c(),
b):(b.on("load",function(){b.play(a,c)}),b)},pause:function(a){var c=this;if(!c._loaded)return c.on("play",function(){c.pause(a)}),c;c._clearEndTimer(a);var b=a?c._nodeById(a):c._activeNode();if(b)if(b._pos=c.pos(null,a),c._webAudio){if(!b.bufferSource||b.paused)return c;b.paused=!0;void 0===b.bufferSource.stop?b.bufferSource.noteOff(0):b.bufferSource.stop(0)}else b.pause();return c.on("pause"),c},stop:function(a){var c=this;if(!c._loaded)return c.on("play",function(){c.stop(a)}),c;c._clearEndTimer(a);
var b=a?c._nodeById(a):c._activeNode();if(b)if(b._pos=0,c._webAudio){if(!b.bufferSource||b.paused)return c;b.paused=!0;void 0===b.bufferSource.stop?b.bufferSource.noteOff(0):b.bufferSource.stop(0)}else isNaN(b.duration)||(b.pause(),b.currentTime=0);return c},mute:function(a){var c=this;if(!c._loaded)return c.on("play",function(){c.mute(a)}),c;var b=a?c._nodeById(a):c._activeNode();return b&&(c._webAudio?b.gain.value=0:b.muted=!0),c},unmute:function(a){var c=this;if(!c._loaded)return c.on("play",function(){c.unmute(a)}),
c;var b=a?c._nodeById(a):c._activeNode();return b&&(c._webAudio?b.gain.value=c._volume:b.muted=!1),c},volume:function(a,c){var b=this;if(a=parseFloat(a),0<=a&&1>=a){if(b._volume=a,!b._loaded)return b.on("play",function(){b.volume(a,c)}),b;var d=c?b._nodeById(c):b._activeNode();return d&&(b._webAudio?d.gain.value=a:d.volume=a*k.volume()),b}return b._volume},loop:function(a){return"boolean"==typeof a?(this._loop=a,this):this._loop},sprite:function(a){return"object"==typeof a?(this._sprite=a,this):this._sprite},
pos:function(a,c){var b=this;if(!b._loaded)return b.on("load",function(){b.pos(a)}),"number"==typeof a?b:b._pos||0;a=parseFloat(a);var d=c?b._nodeById(c):b._activeNode();if(d)return 0<=a?(b.pause(c),d._pos=a,b.play(d._sprite,c),b):b._webAudio?d._pos+(g.currentTime-b._playStart):d.currentTime;if(0<=a)return b;for(d=0;d<b._audioNode.length;d++)if(b._audioNode[d].paused&&4===b._audioNode[d].readyState)return b._webAudio?b._audioNode[d]._pos:b._audioNode[d].currentTime},pos3d:function(a,c,b,d){var e=
this;if(c=void 0!==c&&c?c:0,b=void 0!==b&&b?b:-0.5,!e._loaded)return e.on("play",function(){e.pos3d(a,c,b,d)}),e;if(!(0<=a||0>a))return e._pos3d;if(e._webAudio){var f=d?e._nodeById(d):e._activeNode();f&&(e._pos3d=[a,c,b],f.panner.setPosition(a,c,b),f.panner.panningModel=e._model||"HRTF")}return e},fade:function(a,c,b,d,e){var f=this,g=Math.abs(a-c),h=a>c?"down":"up",g=g/0.01,l=b/g;if(!f._loaded)return f.on("load",function(){f.fade(a,c,b,d,e)}),f;f.volume(a,e);for(var k=1;g>=k;k++)!function(){var a=
Math.round(1E3*(f._volume+("up"===h?0.01:-0.01)*k))/1E3;setTimeout(function(){f.volume(a,e);a===c&&d&&d()},l*k)}()},fadeIn:function(a,c,b){return this.volume(0).play().fade(0,a,c,b)},fadeOut:function(a,c,b,d){var e=this;return e.fade(e._volume,a,c,function(){b&&b();e.pause(d);e.on("end")},d)},_nodeById:function(a){for(var c=this._audioNode[0],b=0;b<this._audioNode.length;b++)if(this._audioNode[b].id===a){c=this._audioNode[b];break}return c},_activeNode:function(){for(var a=null,c=0;c<this._audioNode.length;c++)if(!this._audioNode[c].paused){a=
this._audioNode[c];break}return this._drainPool(),a},_inactiveNode:function(a){for(var c=null,b=0;b<this._audioNode.length;b++)if(this._audioNode[b].paused&&4===this._audioNode[b].readyState){a(this._audioNode[b]);c=!0;break}if(this._drainPool(),!c){var d;if(this._webAudio)d=this._setupAudioNode(),a(d);else{this.load();d=this._audioNode[this._audioNode.length-1];var e=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",f=function(){d.removeEventListener(e,f,!1);a(d)};d.addEventListener(e,f,!1)}}},
_drainPool:function(){var a,c=0;for(a=0;a<this._audioNode.length;a++)this._audioNode[a].paused&&c++;for(a=this._audioNode.length-1;0<=a&&!(5>=c);a--)this._audioNode[a].paused&&(this._webAudio&&this._audioNode[a].disconnect(0),c--,this._audioNode.splice(a,1))},_clearEndTimer:function(a){for(var c=0,b=0;b<this._onendTimer.length;b++)if(this._onendTimer[b].id===a){c=b;break}(a=this._onendTimer[c])&&(clearTimeout(a.timer),this._onendTimer.splice(c,1))},_setupAudioNode:function(){var a=this._audioNode,
c=this._audioNode.length;return a[c]=void 0===g.createGain?g.createGainNode():g.createGain(),a[c].gain.value=this._volume,a[c].paused=!0,a[c]._pos=0,a[c].readyState=4,a[c].connect(p),a[c].panner=g.createPanner(),a[c].panner.panningModel=this._model||"equalpower",a[c].panner.setPosition(this._pos3d[0],this._pos3d[1],this._pos3d[2]),a[c].panner.connect(a[c]),a[c]},on:function(a,c){var b=this["_on"+a];if("function"==typeof c)b.push(c);else for(var d=0;d<b.length;d++)c?b[d].call(this,c):b[d].call(this);
return this},off:function(a,c){for(var b=this["_on"+a],d=""+c,e=0;e<b.length;e++)if(d===""+b[e]){b.splice(e,1);break}return this},unload:function(){for(var a=this._audioNode,c=0;c<this._audioNode.length;c++)a[c].paused||this.stop(a[c].id),this._webAudio?a[c].disconnect(0):a[c].src="";for(c=0;c<this._onendTimer.length;c++)clearTimeout(this._onendTimer[c].timer);a=k._howls.indexOf(this);null!==a&&0<=a&&k._howls.splice(a,1);delete n[this._src]}},l)var v=function(a,c){if(c in n)a._duration=n[c].duration,
u(a);else{var b=new XMLHttpRequest;b.open("GET",c,!0);b.responseType="arraybuffer";b.onload=function(){g.decodeAudioData(b.response,function(b){b&&(n[c]=b,u(a,b))},function(){a.on("loaderror")})};b.onerror=function(){a._webAudio&&(a._buffer=!0,a._webAudio=!1,a._audioNode=[],delete a._gainNode,a.load())};try{b.send()}catch(d){b.onerror()}}},u=function(a,c){a._duration=c?c.duration:a._duration;0===Object.getOwnPropertyNames(a._sprite).length&&(a._sprite={_default:[0,1E3*a._duration]});a._loaded||(a._loaded=
!0,a.on("load"));a._autoplay&&a.play()},w=function(a,c,b){b=a._nodeById(b);b.bufferSource=g.createBufferSource();b.bufferSource.buffer=n[a._src];b.bufferSource.connect(b.panner);b.bufferSource.loop=c[0];c[0]&&(b.bufferSource.loopStart=c[1],b.bufferSource.loopEnd=c[1]+c[2]);b.bufferSource.playbackRate.value=a._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:k,Howl:r}});"undefined"!=typeof exports&&(exports.Howler=k,exports.Howl=r);"undefined"!=typeof window&&(window.Howler=
k,window.Howl=r)}();
